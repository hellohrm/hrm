var dopostqueue = {}, helloguy, db_dat = ['attunits', 'hols', 'ots']

 , _ierr = function (im, lk) {
     im.removeAttribute("onerror");
     im.setAttribute("src", lk);
 }

 , iframe_load = function (iframe) {
     try {
         iframe.contentWindow.postMessage([], iframe.src);
         //iframe.contentWindow.Finsh_FrameLoad();
     }
     catch (err)
     { };
     //$(iframe.contentWindow.document).on("mousedown touchstart", function (evt) {
     //    //evt.preventDefault();
     //    $(document).trigger(evt);
     //});
     helloguy.css({ 'display': 'none' });
 }
 , st1 = function (a, k, p) {
     return st(a, k, p);
 }
 , _o$h = function () {}// ham rong de khi ko decode duoc id cua script thi se nhay vao day.
 //{
 //    'abcde': function (a, b, c, d) {
 //        console.log('_o$h: ' + new Date().getTime());
 //        //$(a.target).trigger(a.type);
 //        c.resolve(b);
 //    }
 //    ,'y':
 //}
 , elTAB //moi doi len day , de popup edit time s3 compare vi tri xem co bi tab che khuat de scroll nguoc lai
 , admin$ = function () {
     apisvr.a$.isAndroid = function () {
         alert('fuck');//test override...
     }
     apisvr.a$.olshift = function () {
         var puhwnd = $('#popuphwnd');
         var _hwnd = puhwnd.find('.modal-dialog');
         _hwnd[(apisvr.a$.mobsrc ? 'add' : 'remove') + 'Class']('modal-dialog-full-width');
         _hwnd = puhwnd.find('.modal-content');
         _hwnd[(apisvr.a$.mobsrc ? 'add' : 'remove') + 'Class']('modal-content-full-width');
         puhwnd.modal('show');
     }

     w0w['apisvr'].a$.a1 = function (p) {
         //ham nay chinh la _o$h.me;
         //nhung co tinh gan qua apisvr.a$.a1 de trigger, hide code
         return p.split("\x1C").reduce(function (n, i) { return n.hasOwnProperty(i) ? n[i] : n; }, w0w[this]);
     };

     var devpopup = function (opts, selCB, loadCB) {
         srclocked(true);
         setTimeout(function () {
             w0w['_gsC'](srcpf$ + '/media/js/devlookup.js', 'js', function () {
                 var ops = $.extend(opts, {
                     mainO: new shareMe(), loadcb: loadCB, urlk: aLAN[''] || ''
                 });
                 if (selCB) ops[selcb] = selCB;
                 //
                 //khi regis OT,LV co the lk khac emps nen se reset trong do. st1.lkE = null;//reset
                 if (!st1.lkE) {
                     //aLAN['']=aLAN[\x04\x05\x06\03\08\07] <=> chua server api data khach hang liwayway
                     lookupem = null;
                     st1.lkE = new DevExpress.myLK(ops);
                 } else {
                     st1.lkE.reopen(ops);
                 };
             }, 'devlookup.js');//

         }, 20);
     }

     , init = function () {
         NProgress.configure({ showSpinner: !1 }), NProgress.start(), NProgress.set(.4); var interval = setInterval(function () { NProgress.inc() }, 1e3);
         NProgress.done(), clearInterval(interval), Main.init({ cS: true });//closedSidebar
         //
         chromeTAB();
         size_TAB();
         //
         //
         $('.app-aside').on('click', 'li a', function (e, para) {
             if (!this.id) return;
             _mnujob(this, this.id, para);
         });
         //
         //////////////var olShift = gQRY(window.location.href)['ols'];
         //////////////if (olShift) {
         //////////////    $('.main-navigation-menu #nor_payrollonline').trigger('click', { 'demo': olShift });
         //////////////} else {
         //////////////    //
             //2023/03/03 them vao vi odat doi qua lau
             app_container.closest("#app").fadeIn();
         //
             $('#' + apisvr.a$.deftab).trigger('click');
         //////////////    //
         //////////////};
         //
         //_mnujob($('<div><i class="ti-home"></i><span class="title">cakip_overview</span></div>')[0], 'cakip_overview');
         //
         $(document).on('click.bs.dropdown.data-api keyup.bs.dropdown.data-api', function (e, para) {
             if (!para || !para.causeby || para.causeby != 'ifrmTab') {
                 chromeTabs.tabEls.filter(function (t) {
                     return $(t).data().tabkind == 1;
                 }).map(function (t) {
                     var eachF = $("#tabBODY_" + $(t).data().tabId + ' iframe');
                     if (eachF.length > 0) {
                         eachF[0].contentWindow.postMessage({ 'msgtype': 'resetdropdown' }, "*");
                     };
                 });
             };
         });

         $('script').remove();

         $('#popuphwnd').on('hidden.bs.modal', function () {
             $(this).find('.modal-content *').unbind().removeData();
             $(this).find('.modal-body').empty();
         });

         $('#sellan a').click(function (e) {
             var lan = $(this).attr('lang');
             if (lan != Cookies.get('selected_language')) {
                 cok('selected_language=' + lan, 15);
                 //window.location.reload();
                 window.location.replace(location.href.split('#')[0]);
             };
         });
         $('.acclogin_menu').on('click', 'li', function (e) {
             var $that = this;
             setTimeout(function () {
                 var puhwnd = admin$.popup({ a: 'f', fw: 1, t: '' }), session = (lanjs == 'html') ? 'pages.dev-demo' : new Date().getTime(), hostdata = window.location.protocol + "//" + apisvr.a$.mainHolePath + '/hostfirewall.php?XDEBUG_SESSION_START=154A5348';
                 var divaddto = puhwnd.find('.modal-body'); divaddto.addClass('iframe-fullscreen');
                 puhwnd.find('.modal-header').remove(); puhwnd.find('.modal-footer').remove();
                 var btndone = puhwnd.find('#popupdone');//puhwnd.find('#popupdone').remove();
                 btndone.click(function () {
                     puhwnd.find('iframe')[0].contentWindow.postMessage({ 'msgtype': 'resetdropdown' }, "*");
                 });
                 //
                 w0w.apisvr.a$.sessions[session] = {
                     hwndTO: null,
                     id: session,
                     fn: function (a, b, c) {
                         var that = this;
                         if (a == 'postmsg') {

                         } else if (a == 'job') {
                             if (b.evtData.evt == 'startredirect') {
                                 datcnt = datcnt.concat([b.evtData.svr].filter(function (item) { return datcnt.indexOf(item) < 0 }));
                             } else if (b.evtData.evt == 'loaded') {
                                 clearTimeout(dathwnd);
                                 dathwnd = -1; datfn = null;
                                 wting.remove();
                                 //
                             } else if (b.evtData.evt == 'lockform') {
                                 helloguy.css('display', b.evtData.state);
                             } else if (b.evtData.evt == 'loginok') {
                                 apisvr.a$.scod($(b.evtData.html)[0]);
                                 //window.location.replace(location.href.split('#')[0]);
                             } else if (b.evtData.evt == 'closed') {
                                 puhwnd.modal('hide');
                             };
                         };
                     }
                 };
                 //
                 puhwnd.one('shown.bs.modal', function () {
                     datfn();
                 }).one('hidden.bs.modal', function () {
                     delete apisvr.a$.sessions[session];
                 });
                 //
                 var wting = helloguy.clone(), datcnt = [], dathwnd, datfn = function (cnt) {
                     clearTimeout(dathwnd);
                     if (dathwnd == -1) return;
                     //
                     divaddto.find('iframe').remove();
                     var ifrm = document.createElement('iframe');
                     ifrm.style.opacity = 1;
                     //ifrm.style.width = "100%";
                     //ifrm.style.height = "300px";
                     ifrm.setAttribute("scrolling", "no"); ifrm.setAttribute("frameBorder", "0");
                     //
                     divaddto.find('iframe').remove();
                     divaddto[0].appendChild(ifrm);
                     var te = ifrm.contentWindow.document;
                     te.open();
                     te.write('<form method="post" action="' + hostdata + '" id="reg_log"><input type="hidden" name="selected_language" value="' + apisvr.a$.selected_language + '"/><input type="hidden" name="duty" value="' +
                         window[st0('1')](session + '|' + apisvr.a$.mainHolePath + '|' + window.location.origin + '|' + datcnt.join(',') + '|' + $($that).attr('lang')) +
                         '"/></form>');
                     te.close();
                     //
                     //dathwnd = setTimeout(datfn, 10000);
                     document.createElement('form').submit.call(te.getElementById('reg_log'));
                     //
                 }; wting.removeAttr('id').css('display', ''); divaddto.append(wting);
                 //
                 setTimeout(function () { puhwnd.modal('show'); }, 1);
                 //
             }, 1);
         }).on('click', 'lo', function (e) {
             //tai sao code nay ko hieu qua voi landing page cloudflare
             //cok('_IWKFHTBZ=; Max-Age=0; path=/;');
             //debugger;
             //isLogout = true;
             //debugger;
             var mnu = e.currentTarget.getAttribute('lang');
             if (mnu == 'out') {
                 var doma = { domain: (/^((\d){1,3}\.){3}(\d){1,3}$/.test(window.location.hostname) ? '' : '.') + window.location.hostname.replace('www.', ''), secure: (window.location.protocol.indexOf('https:') >= 0 ? true : false), path: '/' };
                 $.removeCookie('tokin', doma);
                 $.removeCookie('_IWKFHTBZ', doma);
                 $.removeCookie(cGFnZXMuZGV2LWRlbW8, doma);//variable at pm.js cGFnZXMuZGV2LWRlbW8 = 'pages.dev-demo'
                 //
                 st('removeItem', 'IWKFHTBZ');

                 window.location.replace(location.href.split('#')[0]);
             } else {

                 //test coi noi len k?
                 $('#JS_userprofile').trigger('click');

             };
         });
         //
         if (admined) admined();
     };
     //
     //
     w0w['_gsC']('https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js', 'js', function () {//jquery sau khi load cai nay moi co.
         //

         w0w['_gsC'](srcpf$ + '/media/js/vendors.bundle.min.js', 'js', function () {//jquery sau khi load cai nay moi co.

             w0w['_gsC'](srcpf$ + '/media/js/main.js', 'js', function () {

                 helloguy = $('#helloguy');


                 var intT = whatT(cS$.t), ta = $(".toikhoqua")//[intT[1] + 'Class']('chrome-tabs-dark-theme')
                     .parent().parent().on("\x1C\x1D\x1E\x1F", w0w.cok['']);//"\x02" app-content dung offset de hide muc dich



                 ta[intT[1] + 'Class']('chrome-tabs-dark-theme');



                 w0w.sockjo = null;
                 window.JO = function () { };//de tmp, so load ko kip


                 init();


                 if (unlockedHWND === -1) {
                     helloguy.fadeOut("300", function () {

                         //
                         //var dxl = 'dx-loadindicator', sg = 'segment';
                         //$(this).html('<div></div><div style="width: 60px; height: 60px;"><div class="dxl-wrapper"><div class="dxl-content"><div class="dxl-icon"><div class="dx_sg dx_sg7"></div><div class="dx_sg dx_sg6"></div><div class="dx_sg dx_sg5"></div><div class="dx_sg dx_sg4"></div><div class="dx_sg dx_sg3"></div><div class="dx_sg dx_sg2"></div><div class="dx_sg dx_sg1"></div><div class="dx_sg dx_sg0"></div></div></div></div><div>'
                         //    .replace(/dxl/g, dxl).replace(/dx_sg/g, dxl + '-' + sg));

                     });
                 };


                 $(document.body).removeClass("darkcolor lightcolor").addClass(intT[0] + 'color');


                 ta.parent().removeClass("darkcolor lightcolor").addClass(intT[0] + 'color')
                     .on('\x67\x65\x03\x74', function (v, u, t) {
                         var a = btoa(u).replace(/=/g, "").replace(/\//g, "_").replace(/\+/g, "-")//du me co ky tu dac biet no jquery find element error
                             , b;// = w0w.dynload[a];
                         if (b) {
                             t.call(a, b);//a: base64 cua url
                         } else {
                             $['get'](u, function (data) {
                                 t.call(a, data);//a: base64 cua url
                             });
                         };
                     }).fadeIn(function () {
                         //
                         //sau khi #app show roi thi se load socket io
                         setTimeout(w0w['_gsC'](srcp$f + '/media/utils/jsc/sockjo.js', 'js', function () {
                             var loader_html = function () {//vi thay ko can thiet load lien, nen bo vao day de giam tai cho file admin.min.js
                                 var dxl = 'dx-loadindicator', sg = 'segment';
                                 return '<div></div><div style="width: 60px; height: 60px;"><div class="dxl-wrapper"><div class="dxl-content"><div class="dxl-icon"><div class="dx_sg dx_sg7"></div><div class="dx_sg dx_sg6"></div><div class="dx_sg dx_sg5"></div><div class="dx_sg dx_sg4"></div><div class="dx_sg dx_sg3"></div><div class="dx_sg dx_sg2"></div><div class="dx_sg dx_sg1"></div><div class="dx_sg dx_sg0"></div></div></div></div><div>'
                                     .replace(/dxl/g, dxl).replace(/dx_sg/g, dxl + '-' + sg);
                             };

                             helloguy.html(loader_html());

                         }, "sockjo.js"), 2000);
                     });//  $("#app").
             });
         });

     }, 'jquery.min.js');
     //
     var _mnujob = function (mnu, id, clickArgs) {
         //helloguy.css({ 'display': '' });
         srclocked(true);//end show menu
         //
         $(document).trigger("mousedown");
         //
         setTimeout(function () {
             var isNEW;
             chromeTabs.tabEls.forEach(function (tabEl, originalIndex) {
                 if (tabEl.getAttribute('data-tab-id') == id) {
                     isNEW = tabEl;
                     chromeTabs.setCurrentTab(tabEl);
                     //
                     if (clickArgs && w0w.tabglobalJS.hasOwnProperty(id) && w0w.tabglobalJS[id].mod && typeof w0w.tabglobalJS[id].mod == 'function') {
                         w0w.tabglobalJS[id].mod(clickArgs);
                     };
                 };
             });
             if (!isNEW) {
                 //
                 var tabdata,

                     title = $(mnu).find('.title').text().trim(),

                     tabicon = $(mnu).find('i');

                 if (tabicon.length > 0) {

                     tabicon = tabicon[0].outerHTML;

                 } else {

                     tabicon = null;

                 };

                 tabdata = {//id == 'nor_payrollonline','tmp_cakip_overview'
                     'id': id,
                     'title': title,
                     'tabicon': tabicon,
                     'tabtype': id.split('_')[0],
                     'clickArgs': clickArgs,
                     'EVTS': {},
                     'raid': btoa(new Date().getTime()),//random id
                 };
                 //
                 //
                 st1.úûüýþ = cok.\u00fa\u00fb\u00fc\u00fd\u00fe.bind(mnu, tabdata);
                 //
                 chromeTabs.addTab(tabdata);
                 //
             } else {
                 //helloguy.css({ 'display': 'none' });
                 srclocked(false);//end show menu
             };
         }, 10);
     }
     , svrDAT = function (pArgs) {
         //
         //////////if (gcok('_IWKFHTBZ', true) !== 1) {//bi mat cookie user login
         //////////    $('.acclogin_menu lo').trigger('click');
         //////////    return;
         //////////};
         var d = new $.Deferred();
         //$.ajax({
         //    type: 'POST',
         //    url: window.location.href,//'data/testjson.php'
         //    dataType: 'html',
         //    data: pArgs,
         //    success: function (data) {
         //        d.resolve(data);
         //    },
         //    error: function (jqXHR, textStatus, ex) {
         //        d.reject(textStatus + "," + ex + "," + jqXHR.responseText);
         //    }
         //});
         var ajaxsession = new Date().getTime() +  Math.random().toString(36).substring(7);
         w0w.dopostqueue[ajaxsession] = function (rst) {
             d[rst.kq](rst.result);
             delete w0w.dopostqueue[ajaxsession];
         };
         //
         //
 
            //admintrial.php
            //if (count($uDat)>0) $lanJS[chr(4).chr(5).chr(6).chr(3).chr(8).chr(7)]=base64_encode($uDat[1]);
            w0w.apisvr.ajax($.extend({}, {
                'ajaxsession': ajaxsession, 'auri': encodeURIComponent(window.location.href), 'basejs': [w0w.tabglobalJS.hasOwnProperty('JS_' + pArgs.tabId), window.dynload.indexOf(pArgs.tabId + '.js')], 'iwkfhtbz': w0w.apisvr.a$.iwkfhtbz, 'selected_language': w0w.apisvr.a$.selected_language
                , 'lan': aLAN['']//'\x04\x05\x06\x03\x08\x02', password decrypt user login
                , 'masterdat': !masterdat ? '1' : '0'
            }, pArgs));



         return d.promise();
     }
     , shareMe = (function () { // scoping
        //
         function MyObj(opts) { // constructor
             this.resTyp= aLAN[''] ? 1 : 2;
        };
            
        MyObj.prototype.svrDAT = function (pArgs) {
            //
            //
            if (aLAN['']) {
                //admintrial.php
                //if (count($uDat)>0) $lanJS[chr(4).chr(5).chr(6).chr(3).chr(8).chr(7)]=base64_encode($uDat[1]);
                //'\x04\x05\x06\x03\x08\x02', password decrypt user login
                this.resTyp = 1;//backend server return Json string
                return new svrDAT(pArgs);
                //
                //
            } else {
                //
                //dung local
                //in main.js
                this.resTyp = 2;//local database return Json object
                return dbXLSX(pArgs);
                //
            };
            //
            //
            //
        };
         //
        return MyObj;

    })()
     , __DEV = function (cb) {


         ////qua do, vi phai de cai nay truoc khi xuat excel
         //_gsC('https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js', 'js', function () {

         //}, '');


         if (window.DevExpress) {
             cb();
         } else {
             //
             helloguy.css({ 'display': '' });
             //
             setTimeout(function () {
                 if (GetIEVersion() == '11') {
                     deV = $.extend({}, deV, deIE)
                     //_gsC('https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.10.4/polyfill.min.js', 'js', function () {
                     //}, 'polyfill.min.js');
                 };
                 //
                 var loc = apisvr.a$.selected_language,
                     devMSG = $.Deferred(),
                     devjs = function () {
                         //console.log('https://cdn3.devexpress.com/jslib/' + deV.v + '/js/dx.web.js')
                         //
                         w0w['_gsC'](/*'/media/dx.web.debug.js'*/'https://cdn3.devexpress.com/jslib/' + deV.v + '/js/dx.web.js', 'js', function () {//'/media/dx.web.debug.js'//'https://cdn3.devexpress.com/jslib/20.1.3/js/dx.all.js',
                             //
                             //
                             $.when(devMSG).done(function (dat) {

                                 if (dat) DevExpress.localization.loadMessages(dat);
                                 //logT('DevExpress.localization.loadMessages:');



                                 delete devjs.loFU_shift;



                                 //logT('cb:');
                                 cb();


                             });
                             //
                             //

                             //
                             if (DevExpress.devices._currentDevice.deviceType !== 'desktop') {
                                 DevExpress.devices.off("orientationChanged").on("orientationChanged", function (orie) {
                                     //if (ComApp.app.maCurrentView && ComApp.app.maCurrentView._orientationChanged) ComApp.app.maCurrentView._orientationChanged(orientation);
                                     //vi su kien nay co bind //WS_START //WS_END
                                     // goi thong tin qua main.js
                                     $(w0w).trigger('scroll', orie);
                                 });
                             };
                             //
                         });
                     };
                 //, start = new Date(),
                 //logT = function (n) {
                 //    var end = new Date();
                 //    var time = end.getTime() - start.getTime();
                 //    console.log('Timer:', n, 'finished in', time, 'ms');
                 //};


                 if (loc == 'vi') {

                     var locMSG = $.Deferred(),
                         gitpath = 'https://caicangcua.github.io/jscssmoi/';

                     //logT('Start locJS:');

                     w0w['_gsC']('https://cdnjs.cloudflare.com/ajax/libs/cldrjs/0.5.1/cldr.min.js', 'js', function () {
                         w0w['_gsC']('https://cdnjs.cloudflare.com/ajax/libs/cldrjs/0.5.1/cldr/event.min.js', 'js', function () {
                             w0w['_gsC']('https://cdnjs.cloudflare.com/ajax/libs/cldrjs/0.5.1/cldr/supplemental.min.js', 'js', function () {
                                 w0w['_gsC']('https://cdnjs.cloudflare.com/ajax/libs/globalize/1.7.0/globalize.min.js', 'js', function () {
                                     w0w['_gsC']('https://cdnjs.cloudflare.com/ajax/libs/globalize/1.7.0/globalize/message.min.js', 'js', function () {
                                         w0w['_gsC']('https://cdnjs.cloudflare.com/ajax/libs/globalize/1.7.0/globalize/number.min.js', 'js', function () {
                                             w0w['_gsC']('https://cdnjs.cloudflare.com/ajax/libs/globalize/1.7.0/globalize/currency.min.js', 'js', function () {
                                                 w0w['_gsC']('https://cdnjs.cloudflare.com/ajax/libs/globalize/1.7.0/globalize/date.min.js', 'js', function () {
                                                     //
                                                     //logT('Before load DEV:');
                                                     //load het cac globalize roi load devExpress
                                                     //
                                                     devjs();
                                                     //
                                                     $.when(locMSG)

                                                         .then(Globalize.load)

                                                         .then(function (z) {
                                                             //
                                                             Globalize.locale('vi');
                                                             //
                                                             devMSG.resolve(devjs.loFU_shift);
                                                             //
                                                             //setTimeout(function () { cb(); }, 10);
                                                         });


                                                     //.fail(function () {
                                                     //    //setTimeout(function () { cb(); }, 10);
                                                     //});


                                                 }, 'date.min.js');

                                             }, 'currency.min.js');

                                         }, 'number.min.js');

                                     }, 'message.min.js');

                                 }, 'globalize.min.js');

                             }, 'supplemental.min.js');

                         }, 'event.min.js');

                     }, 'cldr.min.js');

                     //logT('Start locMSG:');
                     $.when(
                        //cai dau tien cua DEVexpress khac cho srcpf$
                         $.getJSON(srcpf$ + "/media/cldr/main/vi/msg.json"),
                         //tu day tro di thi cua global
                         $.getJSON(gitpath + "cldr/main/vi/ca-gregorian.json"),
                         $.getJSON(gitpath + "cldr/main/vi/numbers.json"),
                         $.getJSON(gitpath + "cldr/main/vi/currencies.json"),
                         $.getJSON(gitpath + "cldr/supplemental/likelySubtags.json"),
                         $.getJSON(gitpath + "cldr/supplemental/timeData.json"),
                         $.getJSON(gitpath + "cldr/supplemental/weekData.json"),
                         $.getJSON(gitpath + "cldr/supplemental/currencyData.json"),
                         $.getJSON(gitpath + "cldr/supplemental/numberingSystems.json")
                     ).done(function () {
                         var loFU = [].slice.apply(arguments, [0]).map(function (rst) {
                             return rst[0];
                         });
                         //
                         devjs.loFU_shift = loFU.shift();
                         //devMSG.resolve(loFU.shift());
                         //locMSG.resolve(loFU);
                         locMSG.resolve(loFU);
                         //
                     });
                     //
                 } else {
                     //
                     devMSG.resolve();
                     devjs();
                     //
                 };


                 w0w['_gsC'](srcpf$ + '/media/js/dx.aspnet.data.js', 'js', function () { }, 'dx.aspnet.data.js');
                 //
                 //w0w['_gsC']('https://cdn3.devexpress.com/jslib/21.1.4/css/dx.dark.css', 'css', function () { },'devthemes.css');
                 //w0w['_gsC'](srcpf$ + "/media/css/hellodev.css", 'css', function () { }, 'hellodev.css');
                 clipTheme();
             }, 10);
         }
     }
     , chromeTabs, navbar_right, resizeTimeout, isLogout = false
         , def1, def2, def3, def4, def5//https://www.it-swarm-vi.tech/vi/jquery/yeu-cau-hang-doi-ajax-bang-jquery.queue/971992752/
         , exTAB_EVT = function (acT,EVT) {
             if (acT) {
                 EVT.forEach(function (e, i) {
                     if (acT.tabProperties.EVTS[e]) acT.tabProperties.EVTS[e]();
                 });
             };
         }
         , valid_TAB = function () {
             elTAB[0].parentNode.style.display = (chromeTabs.tabEls.length == 0) ? 'none' : '';
         }
         , size_TAB = function () {
             var detectTop = parseInt(elTAB.css('margin-top').replace(/[^0-9.\-]/g, ""));
             if (detectTop < 0) {
                 var tabLeft = (elTAB.offset().left + elTAB.position().left);
                 if (!navbar_right) navbar_right = $('.navbar-right');
                 elTAB.width(navbar_right.position().left - tabLeft);
             } else {
                 elTAB.css({ "width": "" });
             };
             //$('.mainDescription').html(detectTop);
             valid_TAB();
             chromeTabs.layoutTabs();
             //
             exTAB_EVT(chromeTabs.activeTabEl,['RZ_EVT']);
             //
             w0w.apisvr.a$.mobsrc = $('#mnucmd').is(":visible");
         }
         , chromeTAB = function () {

             "use strict";//convert:https://es6console.com/


             //tam thoi de chrome tab oday
             elTAB = $('.chrome-tabs'), chromeTabs = new ChromeTabs();


             chromeTabs.init(elTAB[0], function () {
             });


             elTAB[0].addEventListener('activeTabChange', function (detail) {
                 var __tabid = $(detail.detail.tabEl).data('tabId'), tabId = 'tabBODY_' + __tabid;
                 w0w.app_container.children("div[id^='tabBODY_']").each(function (i, tab) {
                     if (tabId != tab.id) {
                         tab.style.display = 'none';
                         $(tab).trigger('onActived', { state: 0 });
                     } else {
                         //
                         elTAB[0].__actTAB = __tabid;//dung de nhan su kien tu main, sau do remove tab se dispose luon su kien
                         //
                         $(tab).fadeIn().trigger('onActived', { state: 1 });
                         exTAB_EVT(detail.detail.tabEl, ['RZ_EVT']);
                     };
                 });
                 $('body').trigger('click', 'activeTabChange');
             });


             elTAB[0].addEventListener('tabAdd', function (detail) {

                 app_container.closest("#app")[(chromeTabs.tabEls.length <2 ? 'add' : 'remove') + 'Class']('only1tab');

                 tabBODY(detail.detail.tabEl);
                 valid_TAB();
                 size_TAB();
             });


             elTAB[0].addEventListener('tabRemove', function (detail) {

                 app_container.closest("#app")[(chromeTabs.tabEls.length < 2 ? 'add' : 'remove') + 'Class']('only1tab');


                 var tabId = $(detail.detail.tabEl).data('tabId'),
                     tab = w0w.app_container.children("#tabBODY_" + tabId);
                 //
                 tab.trigger('onRemoving', { });
                 //
                 //jQuery.cleanData() f
                 if (w0w.tabglobalJS.hasOwnProperty(tabId)) {
                     w0w.tabglobalJS[tabId].dispose(tabId);
                     w0w.tabglobalJS[tabId] = null;
                     delete w0w.tabglobalJS[tabId];
                 };
                 //
                 w0w.app_container.find('#tabBODY_' + tabId + ',#tabBODY_' + tabId + ' *').off(/*all event*/).unbind().removeData();
                 tab.remove();
                 //
                 valid_TAB();
                 //
                 //
                 //ngay 14/4/2023
                 if (chromeTabs.tabEls.length == 0 && admin$.semiLOD.length > 0) {
                     do {
                         //schedule reload Tabpage ....
                         $('#' + admin$.semiLOD.shift()).trigger('click');

                     } while (admin$.semiLOD.length > 0);
                 };
                 //
             });



             $(window).resize(function () {
                 clearTimeout(resizeTimeout);
                 resizeTimeout = setTimeout(function () {
                     size_TAB();
                 }, 300);
             });


             var mut = new MutationObserver(function (mutations, mut) {
                 // if attribute changed === 'class' && 'open' has been added, add css to 'otherDiv'
                 clearTimeout(resizeTimeout);
                 resizeTimeout = setTimeout(function () {
                     size_TAB();
                 }, 200);
             });

             mut.observe(document.getElementById("app"), {
                 'attributes': true
             });

         }
         , tabBODY = function (tabhead) {

             var tab$ = $(tabhead), tabProps = tabhead.tabProperties, tabId = tab$.data('tabId'), tabkind = 0, newTab = function (jsEX) {
                 $.when(def1, def2, jsEX).then(function (v1) {




                     if (!apisvr.a$.tmp.hasOwnProperty(tabId))  apisvr.a$.tmp[tabId] = v1;




                     var newFRM = $("<div id='tabBODY_" + tabId + "' class='noneifrm'></div")

                         ,

                         newT = function (a, b, c) {
                             //tra ve a:html + js; b:id cua script (boqua)
                             newFRM.html(a).find('script#JS_' + tabId).each(function () {
                                 w0w.apisvr.a$.scod(this);
                                 $(this).remove();
                             });
                             //if (tabProps.tabtype == 'dev') {
                             //    apisvr.a$.tmp[tabId] = newFRM.html();
                             //};
                             //
                             //landing page modify language ...
                             //
                             w0w.app_container

                                 //1. raise event coi co ai can thiep newFRM k?
                                 .trigger('onTabAdding', newFRM)

                                 //2. add newFRM vao app_container
                                 .append(newFRM).ready(function () {
                                     //
                                     elTAB[0].__actTAB = tabId;//dung de nhan su kien tu main, sau do remove tab se dispose luon su kien
                                     //
                                     if (c.hasOwnProperty(tabId)) {//w0w.tabglobalJS.hasOwnProperty
                                         new c[tabId].init(newFRM, function (isMe) {//w0w.tabglobalJS[tabId]
                                             if (!isMe) {
                                                 srclocked(false);// helloguy.css({ 'display': 'none' });
                                             } else {
                                                 switch (isMe) {
                                                     case 'dbEngine': {
                                                         return new shareMe();
                                                         break;
                                                     }
                                                 };
                                             };
                                         }, tabId, tabProps.clickArgs, tabProps);
                                     } else {
                                         srclocked(false);// helloguy.css({ 'display': 'none' });
                                     };
                                     //
                                     //
                                     newFRM.find('script').remove();
                                     //
                                 });
                         };

                     //
                     //cai gi cung duoc, vi no hung su kien tai body
                     elTAB.trigger(''//"\x04"
                         //no se nhay sang --> body $("\x62" + "o" + "\x64" + "y")["o" + "\x6E"]('', $.fn['\x02'].bind('\x74\x61\x62\x67\x6C\x6F\x62\x61\x6C\x4A\x53'));
                        , [
                            v1.replace(new RegExp('srcpfmedia', 'g'), srcpf$ + '/media') // raw html + css + js
                            , true // chi dinh add script
                            //tra ve a:html + js; b:id cua script (boqua)
                            , new $.Deferred().done(newT)//trigger event build script tabglobalJS 
                        ]);
                     //
                 }, function (err) {
                     srclocked(false);// helloguy.css({ 'display': 'none' });
                     alert(err);
                 });
             };
             //



             //
             if (tabProps.tabtype == 'ifrm') {
                 tabkind = 1;
                 var frmpage = window.location.protocol + "//" + w0w.apisvr.a$.mainHolePath + '/upload.php';
                 switch (tabId) {
                     case 'profiles': {
                         frmpage = 'nhansu/profiles.php';
                         break;
                     };
                 };
                 var adfrm = (Main.isMobile() ? '1' : '0') + '|' + (w0w.apisvr.a$.mobsrc ? '1' : '0');
                 $("<div id='tabBODY_" + tabId + "' class='iframe-wrapper'><iframe src='" + frmpage + "#" + adfrm + "' scrolling='no'  onload='iframe_load(this);'></iframe></div>").appendTo(w0w.app_container);
             } else {
                 //
                 def2 = new $.Deferred(); def3 = new $.Deferred();
                 //
                 var jsCSS = function () {
                     w0w['_gsC'](srcpf$ + '/media/css/JS_' + tabId + '.css' + src$id, 'css', function () { }, 'JS_' + tabId + '.css');
                     w0w['_gsC'](srcpf$ + '/media/js/JS_' + tabId + '.js' + src$id, 'js', function () {def3.resolve('def3');}, 'JS_' + tabId + '.js');
                 };
                 //
                 if (apisvr.a$.tmp.hasOwnProperty(tabId)) {//tab build from template in cache.
                     def1 = new $.Deferred();
                     newTab(def3);
                     def1.resolve(apisvr.a$.tmp[tabId]);
                     def2.resolve('ignore');
                     //def3.resolve('ignore');
                 } else {

                     def1 = new svrDAT({ "act": "newtab", "tabId": tabId, 'tokin': w0w.tabglobalJS['tokin'] });

                     newTab(def3);
                     //
                     if (tabProps.tabtype.indexOf('dev') == 0) {
                         __DEV(function () {
                             def2.resolve('devloaded');
                         });
                     } else {
                         def2.resolve('ignore');
                     };
                 };

                 if (['JS', 'devJS'].indexOf(tabProps.tabtype) >= 0) {
                     jsCSS();
                 } else {
                     def3.resolve('ignore');
                 }
             };
             //
             tab$.data('tabkind', tabkind);
         }

     //, dologout = function (el) {//tai sao ko xai????
     //    helloguy.css({ 'display': '' });
     //    isLogout = true;
     //    var doma={ domain: (/^((\d){1,3}\.){3}(\d){1,3}$/.test(window.location.hostname) ? '' : '.') + window.location.hostname.replace('www.', ''), secure: (window.location.protocol.indexOf('https:') >= 0 ? true : false) };
     //    $.removeCookie('tokin', doma);
     //    $.removeCookie('_IWKFHTBZ', doma);
     //    st('removeItem', 'IWKFHTBZ');
     //    window.location.replace('//' + (window.location.hostname.indexOf('www.') >= 0 ? 'www.' : '') + w0w.tabglobalJS['urilo'] + '/logout?XDEBUG_SESSION_START=154A5348');
     //}
     , puhwnd
     , _popup = function (zz) {
         if (!puhwnd) puhwnd = $('#popuphwnd');var _pY = puhwnd.clone();
         if (zz.a == 'f') {
             var _hwnd = _pY.find('.modal-dialog');
             _hwnd.find('.modal-header .modal-title').html(zz.t);
             _hwnd[((zz.fw || apisvr.a$.mobsrc) ? 'add' : 'remove') + 'Class']('modal-dialog-full-width');
             _hwnd = _pY.find('.modal-content');
             _hwnd[((zz.fw || apisvr.a$.mobsrc) ? 'add' : 'remove') + 'Class']('modal-content-full-width');
         } else if (zz.a == 'd') {
             _pY.find('.modal-dialog')[0].className = 'modal-dialog modal-dialog-centered modal-dialog-zoom modal-' + (zz.s?zz.s:'sm');
             _pY.find('.modal-content')[0].className = 'modal-content';

             //zz.cBu:close button , neu co thi keep
             if (!zz.cBu) _pY.find('.modal-header button').remove();

             _pY.find('.modal-header .modal-title').html(zz.t);
             _pY.find('.modal-body').html(zz.m);
         };
         _pY.one('hidden.bs.modal', function () {
             $(this).find('.modal-content *').unbind().removeData();
             _pY.remove();
             if (zz.hasOwnProperty('cbClosed') && typeof zz['cbClosed'] === 'function') {
                 zz['cbClosed']();
             };
         });
         if (!zz.t) _pY.find('.modal-header').remove();
         _pY.removeAttr('id');
         return _pY;
         //if (zz.a == 'f') {
         //    var _hwnd = puhwnd.find('.modal-dialog');
         //    _hwnd.find('.modal-header .modal-title').html(zz.t);
         //    _hwnd[((zz.fw || apisvr.a$.mobsrc) ? 'add' : 'remove') + 'Class']('modal-dialog-full-width');
         //    _hwnd = puhwnd.find('.modal-content');
         //    _hwnd[((zz.fw || apisvr.a$.mobsrc) ? 'add' : 'remove') + 'Class']('modal-content-full-width');
         //    return puhwnd;
         //} else if (zz.a == 'd') {
         //    var _pY = puhwnd.clone();
         //    _pY.find('.modal-dialog')[0].className = 'modal-dialog modal-dialog-centered modal-dialog-zoom modal-sm';
         //    _pY.find('.modal-content')[0].className = 'modal-content';
         //    _pY.find('.modal-header button').remove();
         //    _pY.find('.modal-header .modal-title').html(zz.t);
         //    _pY.find('.modal-body').html(zz.m);
         //    _pY.one('hidden.bs.modal', function () {
         //        $(this).find('.modal-content *').unbind().removeData();
         //        _pY.remove();
         //        if (zz.hasOwnProperty('cbClosed') && typeof zz['cbClosed'] === 'function') {
         //            zz['cbClosed']();
         //        };
         //    });
         //    return _pY;
         //};
     };
     //[]
     //
     //"\x63\x6F\x6B"=cok invoke in main.js ***cok['']($.fn, '')****
     w0w["\x63\x6F\x6B"]['\x02\x03\x04'] = function (j, t) {//cok
         this[t] = j[t].bind(function () {//t:"\x02"
             var n = '\x5F\x6F\x24\x68', //_o$h
                  _ = w0w;
             _[n]["\x6D\x65"] = _.apisvr.a$.a1.bind(n);//'me'

             return n;//tra ve string _o$h
         }());
         //
         //
     }, window.st.h = w0w.location.host//dung trong security w0w["\x73\x74"].h
        , st1.m = '\x57\x6F\x72\x6B\x62\x6F\x6F\x6B'//Workbook
        , st1.l = '\x49\x6D';//Im property crack spreadjs



     _gsC(srcpf$ + '/media/css/vendors.bundle.min.css', 'css', function () { },'vendors.bundle.min.css');


     return {
         'mnujob': _mnujob,
         'popup': _popup,
         'DEV': __DEV,
         'devpu': devpopup,
         'semiLOD': []//schedule load lai tabpage
     };
 }();


