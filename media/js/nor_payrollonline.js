tabglobalJS.JS_nor_payrollonline=function(){"use strict";function t(t){var e,o=t.ua>1?"UA":"noU",n={BI:-120,LI:5,ExI:120,BO:-120,EO:-5,ExO:120},i={ReadyEMP:null};this.init=function(t,r,s,d){e=s;var l,c,g,p,u,f,h=this,m="",y=t.find("#init_data"),w=JSON.parse(y.text()),k=t.find("#emptyshiftlist"),b=function(t){for(var e=!0,o=w[g].rows,n=o.length-1;n>-1;n--){0==$.grep(t,function(t,e){if(o[n].id==t.id)return!0}).length&&(e=!1)}return f[(e?"remove":"add")+"Class"]("btn-success").prop("disabled",e),e},x=function(t,e){if(l){for(var o,n=w[g].cusDAT,i=0;i<n.length;i++)n[i].id==e?n[i]:n[i].id==t&&(o=n[i]);o?(c.show(o,m),console.log("Row changed")):(c.empty(),console.log("Empty"))}},v=function(t,e,o){for(var n=w[g].cusDAT,i=-1,a=n.length-1;a>-1;a--)n[a].id==t&&(i=a);-1!=i&&(e&&($("#"+w[g].tmpid+" tr#"+t).find("td").each(function(t,o){"SI"==o.getAttribute("data-field")?(o.innerHTML=e.SI,n[i].i[3].t=e.SI):"SO"==o.getAttribute("data-field")&&(o.innerHTML=e.SO,n[i].i[4].t=e.SO)}),-1!=i&&(n[i].s1=e)),o&&(n[i].s2=o),st("setItem",window[st0("1")](btoa(g+m)),btoa(window[st0("1")](JSON.stringify(n)))))},T=function(t){helloguy.css({display:""});var e=admin$.popup({a:"f",fw:1,t:w.lang.js_004_1}),o=e.find("#popupdone"),n=function(t){o[(t?"add":"remove")+"Class"]("btn-primary").prop("disabled",!t)};o.html(w.lang.js_004_4),o.click(function(){c.gojsMOD(v),setTimeout(function(){e.modal("hide")},1)});var i=$(w[g].goSample);i.css("display",""),e.find(".modal-body").append(i),n(!1),_gsC(srcpf$+"/media/vendor/GoJS/release/gojstrial.js","js",function(){e.one("shown.bs.modal",function(){(c=a(w.lang,n,!0)).show(t,m),helloguy.css({display:"none"})}),setTimeout(function(){e.modal("show")},1)},"gojs.js")},S=function(){var t,e=admin$.popup({a:"f",t:w.lang.js_004_1}),i=e.find("#popupdone");i.html(w.lang.js_004_4),i.click(function(){if(e.find("form").valid()){setTimeout(function(){e.modal("hide")},10);var t={};$.map(e.find("form").serializeArray(),function(e,o){t[e.name]=e.value});var i={id:t.id,i:[{t:t.id},[],{t:t.shiftname},{t:t.shift_giovao},{t:t.shift_giora}]},a=$(w[g].sampleR),r=w[g].pk;a.attr("id",i.id),$.each(i.i,function(t,e){$.each(e,function(e,o){a.find("td:eq("+t+")")[r[e]](o)})});var s=function(){$("#"+w[g].tmpid).append(a),w[g].cusDAT.push(i),a.trigger("click")};"noU"==o?(st("setItem",window[st0("1")](btoa(g+m)),btoa(window[st0("1")](JSON.stringify(w[g].cusDAT)))),s()):(t.s1=n,h.comm1.uaShift(t).then(function(){s()})),k.data()["bs.popover"]&&$(k.data("bs.popover").tip).is(":visible")&&k.popover("hide")}}),_gsC(srcpf$+"/media/vendor/jquery-validation/dist/jquery.validate.min.js","js",function(){var t=e.find("form"),o=$(".errorHandler",t),n=$(".successHandler",t);$.validator.addMethod("time",function(t,o,n){var i=!1,a=apisvr.a$.trim(t);if(""==a)e.find("form").data().validator.settings.messages.shift_giovao="Require input";else if(!(i=a.match(/^([01][0-9]|2[0-3]):[0-5][0-9]$/))){var r=a.split(":");2==r.length&&(r[0]=apisvr.a$.trim(r[0]),r[1]=apisvr.a$.trim(r[1]),/^\d+$/.test(r[0])&&/^\d+$/.test(r[1])&&parseInt(r[0])<24&&parseInt(r[1])<60&&(a=pad$(r[0],2)+":"+pad$(r[1],2),i=!0))}return i&&t!=a&&(o.value=a),i},""),t.validate({errorElement:"span",errorClass:"help-block",errorPlacement:function(t,e){"radio"==e.attr("type")||"checkbox"==e.attr("type")?t.insertAfter($(e).closest(".form-group").children("div").children().last()):"dd"==e.attr("name")||"mm"==e.attr("name")||"yyyy"==e.attr("name")?t.insertAfter($(e).closest(".form-group").children("div")):t.insertAfter(e)},ignore:"",rules:{id:{minlength:2,required:!0},shiftname:{minlength:2,required:!0},shift_giovao:{required:!0,time:!0},shift_giora:{required:!0,time:!0}},messages:{shiftname:"Please specify your first name",shift_giovao:"Please specify your last name",shift_giora:"Please check a gender!"},groups:{DateofBirth:"dd mm yyyy"},invalidHandler:function(t,e){n.hide(),o.show()},highlight:function(t){$(t).closest(".help-block").removeClass("valid"),$(t).closest(".form-group").removeClass("has-success").addClass("has-error").find(".symbol").removeClass("ok").addClass("required")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")},success:function(t,e){t.addClass("help-block valid"),$(e).closest(".form-group").removeClass("has-error").addClass("has-success").find(".symbol").removeClass("required").addClass("ok")},submitHandler:function(t){n.show(),o.hide()}}),_gsC(srcpf$+"/media/js/jquery.mask.min1.14.16.js","js",function(){var t=function(t){return t=t.split(":"),parseInt(t[0])>19?"HZ:M0":"H0:M0"},o={onKeyPress:function(e,o,n,i){1==e.length&&parseInt(e)>2?(e=pad$(e,2),arguments[0]=e,n.val(e)):e.length>3&&(e=e.split(":"),parseInt(e[1])>5&&(e=e[0]+":"+pad$(e[1],2),arguments[0]=e,n.val(e))),n.mask(t.apply({},arguments),i)},translation:{H:{pattern:/[0-9]/,optional:!1},Z:{pattern:/[0-3]/,optional:!1},M:{pattern:/[0-9]/,optional:!1}}};e.find("#shift_giovao").mask(t,o),e.find("#shift_giora").mask(t,o)},"jquery.mask.min1.14.16.js")},"jquery.validate.min.js"),i[((t=!0)?"add":"remove")+"Class"]("btn-primary").prop("disabled",!t),e.find(".modal-body").html(w.taomoi),setTimeout(function(){e.modal("show")},1)},A=function(){var t=admin$.popup({a:"f",t:w.lang.js_004_2}),e=w[g],o=$(e.rawhtml),n=o.find("thead"),i=o.find("tbody"),a=i.find("tr").first(),r=t.find("#popupdone"),s=function(t){r[(t?"add":"remove")+"Class"]("btn-primary").prop("disabled",!t)};r.html(w.lang.js_004_4),r.click(function(){setTimeout(function(){t.modal("hide")},10);var e=w[g].pk,o=$("#"+w[g].tmpid);w[g].rows;i.find('tr td:nth-child(2) input[type="checkbox"]:checked').each(function(t,n){var i;$.grep(w[g].rows,function(t,a){t.id==$(n).closest("tr").attr("id")&&((i=$(w[g].sampleR)).attr("id",t.id),$.each(t.i,function(t,o){$.each(o,function(o,n){i.find("td:eq("+t+")")[e[o]](n)})}),o.append(i),w[g].cusDAT.push(t))}),st("setItem",window[st0("1")](btoa(g+m)),btoa(window[st0("1")](JSON.stringify(w[g].cusDAT)))),i&&i.trigger("click")}),k.data()["bs.popover"]&&$(k.data("bs.popover").tip).is(":visible")&&k.popover("hide"),b(w[g].cusDAT)}),n.find("th").last().remove(),a.find("td").last().remove(),a=a[0].outerHTML,o.removeAttr("id"),o.addClass("table-hover"),i.empty(),$.each(e.colmap,function(t,o){$.each(o,function(o,i){"t"==o&&n.find("th:eq("+t+")")[e.pk[o]](i)})});var d=$.extend([],e.rows);$.grep(e.cusDAT,function(t,e){for(var o=d.length-1;o>-1;o--)d[o].id==t.id&&d.splice(o,1)}),$.each(d,function(t,o){var n=$(a);$.each(o.attr,function(t,e){n.attr(t,e)}),$.each(o.i,function(t,o){$.each(o,function(o,i){n.find("td:eq("+t+")")[e.pk[o]](i)})}),i.append(n),n[0].id=o.id,n.find("td")[0].innerHTML=o.id;var r=n.find("td:eq(1) input");r[0].id="ck_"+o.id,r.next().attr("for","ck_"+o.id)});var l=n.find('input[type="checkbox"]'),c=i.find('input[type="checkbox"]');l.on("change",function(){var t=$(this).prop("checked");t?c.prop("checked",!0):c.prop("checked",!1),s(t)}),c.on("click",function(t){var e=c.length,o=i.find('input[type="checkbox"]:checked').length;o<=0?(l.prop("checked",!1),l.prop("indeterminate",null)):e==o?(l.prop("checked",!0),l.prop("indeterminate",!1)):(l.prop("checked",!0),l.prop("indeterminate",!0)),s(o>0)}),i.on("click","tr",function(t){"td"==t.target.tagName.toLowerCase()&&$(this).find("input[type=checkbox]").trigger("click")}),s(!1),t.find(".modal-body").html(o),setTimeout(function(){t.modal("show")},1)},B=t.find("pre#template"),P=t.find("pre#lang"),M=function(){if(f=t.find("#selShift"),function(e,o){var n=e+"_"+(new Date).getTime(),i=w[e],a=t.find("#"+e),r=a.find("thead"),d=a.find("tbody"),c=d.find("tr").first();switch(a.find("."+(l?"mobile":"desktop")).remove(),w[e].rawhtml=a[0].outerHTML,r.find("th:eq(1)").empty(),c.find("td:eq(1)").css("display","none").empty(),c=c[0].outerHTML,w[e].sampleR=c,d.empty(),d.attr("id",n),w[e].tmpid=n,g=e,o?"ALL"!==o.demo&&(m=o.demo):m=w[e].__id,m){case"1":u=["HM","HA"];break;case"2":u=["OH"];break;case"3":u=["OH","HM"]}var h=st("getItem",window[st0("1")](btoa(g+m))),y=!0;if(h){h=JSON.parse(window[st0("2")](atob(h)));for(var v=i.rows.length-1;v>-1;v--)0==$.grep(h,function(t,e){if(i.rows[v].id==t.id)return t.i[2].t=i.rows[v].i[2].t,!0}).length&&(y=!1)}else if(h=$.extend([],i.rows),u)for(v=h.length-1;v>-1;v--)if(-1==u.indexOf(h[v].id))h.splice(v,1),y=!1;else switch(m){case"3":"HM"==h[v].id&&(h[v].s2=$.extend(h[v].s2,{nT1:!1,wT1:!1,nT2:!1,wT2:!1,nT3:!1,wT3:!1,nT4:!1,wT4:!1,nT5:!1,wT5:!1,nT6:!0,wT6:!1,nT7:!1,wT7:!1}))}0==h.length&&k.popover("show"),f[(y?"remove":"add")+"Class"]("btn-success").prop("disabled",y),w[e].cusDAT=h,r.find("th:eq(1)").css("display","none"),$.each(i.colmap,function(t,e){$.each(e,function(e,o){r.find("th:eq("+t+")")[i.pk[e]](o)})}),$.each(h,function(t,e){var o=$(c);0==t&&o.addClass("selected"),$.each(e.attr,function(t,e){o.attr(t,e)}),$.each(e.i,function(t,e){$.each(e,function(e,n){o.find("td:eq("+t+")")[i.pk[e]](n)})}),d.append(o),o[0].id=e.id}),d.on("click","tr",function(t,e){var o=d.find("tr.selected"),n=this.id;e&&"init"==e?(clearTimeout(p),p=setTimeout(function(){x(n,null)},100)):o&&o.attr("id")!=this.id&&(d.find("tr").removeClass("selected"),$(this).addClass("selected"),clearTimeout(p),p=setTimeout(function(){x(n,o)},100))}),a.on("click",".xoarow",function(t){if(0!=w[g].cusDAT.length){var e,o=admin$.popup({a:"d",t:"i love you",m:"fucking ..."}),n=o.find("#popupdone"),i=$(t.target).closest("tr");n.html(w.lang.js_004_3),n.removeClass("btn-secondary").addClass("btn-danger"),n.click(function(){if(setTimeout(function(){o.modal("hide")},10),i.find("td").length>0){var t=i.next("tr");0==t.length&&(t=i.prev("tr"));for(var e=w[g].cusDAT,n=i.attr("id"),a=e.length-1;a>-1;a--)e[a].id==n&&e.splice(a,1);st("removeItem",window[st0("1")](btoa("gojsloc"+m+"_"+n))),st("setItem",window[st0("1")](btoa(g+m)),btoa(window[st0("1")](JSON.stringify(e)))),i.remove(),t.length>0?t.trigger("click"):(clearTimeout(p),p=setTimeout(function(){x(null,null)},100))}else $("#"+w[g].tmpid).empty(),$.each(w[g].cusDAT,function(t,e){st("removeItem",window[st0("1")](btoa("gojsloc"+m+"_"+e.id)))}),w[g].cusDAT=[],st("setItem",window[st0("1")](btoa(g+m)),btoa(window[st0("1")](JSON.stringify([])))),clearTimeout(p),p=setTimeout(function(){x(null,null)},100);b(w[g].cusDAT),0==w[g].cusDAT.length&&k.popover("show")}),n[((e=!0)?"add":"remove")+"Class"]("btn-primary").prop("disabled",!e),setTimeout(function(){o.modal("show")},10)}}),a.on("click",".editrow",function(t){var e=w[g].cusDAT,o=$(this).closest("tr");if(o.length>0)for(var n=0;n<e.length;n++)e[n].id==o[0].id&&T(e[n])}),Main.isMobile()||t.find('[data-toggle="tooltip"]').on("show.bs.tooltip",function(t){$(this).attr("data-original-title",w.lang[this.getAttribute("lang")])}).attr("data-container","#"+s).tooltip({trigger:"hover"})}("shift_table",d),t.find("."+(l?"mobile":"desktop")).remove(),l)t.find("[id^=mobhide-]").css("display",""),_gsC(srcpf$+"/media/vendor/GoJS/release/gojstrial.js","js",function(){c=a(w.lang,v,!1),t.find("tr.selected").trigger("click","init")},"gojs.js"),t.find("#step-1 .panel-body").addClass("shift_table_parent");else{var e=t.find("#mobhide-sample"),o=!!navigator.userAgent.match(/Trident.*rv\:11\./);t.find("#myDiagramDiv").removeClass("desk_mode").addClass("mobile_mode").css(o?{position:"relative",height:"500px"}:{}),w[g].goSample=e[0].outerHTML,e.remove(),t.find("#step-1 ").on("click",".mobile .fuckdrop",function(t){var e=t.target.tagName.toLowerCase(),o=$(this),n=t.target.getBoundingClientRect(),i=$("#mobilefuckdrop"),a=$("#mobilefuckdrop_body");if($(document).trigger("click.bs.dropdown.data-api",{causeby:"clearmenu"}),"a"!=e){t.preventDefault(),t.stopPropagation(),a.detach().appendTo(o),i.detach().appendTo(o);var r=function(){if((i=o.find("#mobilefuckdrop")).length>0){a=o.find("#mobilefuckdrop_body");var t=i.dropdown().data()["bs.dropdown"],e=t._getPopperConfig(),s=function(t){var e=30;n.right<t.popper.width&&(e=t.popper.width-n.right+30),a.find("[class^=arrow]").css("right",e)};e.onCreate=function(t){s(t)},e.onUpdate=function(t){s(t)},e.modifiers.offset={offset:"20,0"},t._getPopperConfig=function(){return e},$(t.constructor._getParentFromElement(i[0])).one("hidden.bs.dropdown",function(t){i.dropdown("dispose");var e=$(this).closest(".panel-body");a.detach().appendTo(e),i.detach().appendTo(e)}),i.dropdown("toggle")}else setTimeout(r,20)};setTimeout(r,20)}})}f.on("click",A),t.find("#newShift").on("click",S)};function O(t){}w.taomoi=B.text(),B.remove(),y.remove(),w.lang=$.extend(JSON.parse(P.text()),aLAN),P.remove(),_gsC(srcpf$+"/media/js/form-wizard.js","js",function(){l=!Main.isMobile()||!apisvr.a$.mobsrc,FormWizard.init({iniStep:1,onShowStep:function(e,o){var n=["needupt_popover","showinvisibles","log_fromto_popover","tikestep_payrollonline.js"];1!=o.toStep||i.isStep1?1==o.fromStep&&1==o.toStep||_gsC(srcpf$+"/media/js/tikestep_payrollonline.js?"+(new Date).getTime(),"js",function(){i[n[3]]||(i[n[3]]=new tikestep(t,O,i)),i[n[3]].doStep(e,o,n)},"tikestep_payrollonline.js"):(i.isStep1=!0,M())}},t),t.find(".wrap-content.container").css("display","")},"form-wizard.js"),t.find("[data-lang]").each(function(t,e){var o=e.getAttribute("data-lang");$(e).html(w.lang[o])}),t.find("#step-1 .show-help-context").click(function(){apisvr.a$[st0(3)].prototype.calculateAge=function(){console.log("The current age is: ")};var t=new(apisvr.a$[st0(3)])({adu:"fucking"});t.publicSharedMethod=function(t){apisvr.a$[st0(3)].prototype.publicSharedMethod.call(this,t)},t.publicSharedMethod("con cat"),t.publicSharedVar="con cat",t.nationality=function(){};var e=new(apisvr.a$[st0(3)])({adu:"du me may"});e.publicSharedMethod("cai lon"),e.publicSharedVar="cai lon",console.log(t.nationality()),console.log(t.calculateAge()),console.log(e.calculateAge())}),r&&r()},this.dispose=function(){for(var t in $("#tabBODY_"+e).find("iframe").each(function(t,e){e.contentWindow.releaseEvts&&e.contentWindow.releaseEvts()}),$("#tabBODY_"+e).find(".dropdown-toggle").dropdown("dispose"),i)i.hasOwnProperty(t)&&t.indexOf("_popover")>0&&i[t].popover("dispose")};!function(){function t(t){t;this.publicInstanceVar="baz",this.publicInstanceMethod=function(){}}t.prototype.publicSharedVar="quux",t.prototype.publicSharedMethod=function(t){}}();function a(t,e,o){function i(){go.Link.call(this),this.isLayoutPositioned=!1,this.isTreeLink=!1,this.routing=go.Link.Orthogonal,this._direction=0,this._extension=30,this._inset=10,this._gap=10}go.Diagram.inherit(i,go.Link),i.prototype.cloneProtected=function(t){go.Link.prototype.cloneProtected.call(this,t),t._direction=this._direction,t._extension=this._extension,t._inset=this._inset,t._gap=this._gap},Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){if(!isNaN(t)&&0!==t&&90!==t&&180!==t&&270!==t)throw new Error("DimensioningLink: invalid new direction: "+t);this._direction=t}}),Object.defineProperty(i.prototype,"extension",{get:function(){return this._extension},set:function(t){this._extension=t}}),Object.defineProperty(i.prototype,"inset",{get:function(){return this._inset},set:function(t){if(!(t>=0))throw new Error("DimensioningLink: invalid new inset: "+t);this._inset=t}}),Object.defineProperty(i.prototype,"gap",{get:function(){return this._gap},set:function(t){if(!(t>=0))throw new Error("DimensioningLink: invalid new gap: "+t);this._gap=t}}),i.prototype.computePoints=function(){var t=this.fromNode;if(!t)return!1;var e=this.fromPort,o=this.computeSpot(!0),n=this.toNode;if(!n)return!1;var i=this.toPort,a=this.computeSpot(!1),r=this.getLinkPoint(t,e,o,!0,!0,n,i);if(!r.isReal())return!1;var s=this.getLinkPoint(n,i,a,!1,!0,t,e);if(!s.isReal())return!1;this.clearPoints();var d=this.direction;if(isNaN(d)){d=r.directionPoint(s);var l=new go.Point(this.extension,0);l.rotate(d+90);var c=new go.Point(this.extension-this.inset,0);c.rotate(d+90);var g=new go.Point(this.gap,0);g.rotate(d+90),this.addPointAt(r.x+g.x,r.y+g.y),this.addPointAt(r.x+l.x,r.y+l.y),this.addPointAt(r.x+c.x,r.y+c.y),this.addPointAt(s.x+c.x,s.y+c.y),this.addPointAt(s.x+l.x,s.y+l.y),this.addPointAt(s.x+g.x,s.y+g.y)}else{this.extension;var p=0,u=0,f=0,h=0;0===d||180===d?(0===d?(u=(p=Math.min(r.y,s.y)-this.extension)+this.inset,f=r.y-this.gap,h=s.y-this.gap):(u=(p=Math.max(r.y,s.y)+this.extension)-this.inset,f=r.y+this.gap,h=s.y+this.gap),this.addPointAt(r.x,f),this.addPointAt(r.x+.01,p),this.addPointAt(r.x,u),this.addPointAt(s.x,u),this.addPointAt(s.x-.01,p),this.addPointAt(s.x,h)):90!==d&&270!==d||(90===d?(u=(p=Math.max(r.x,s.x)+this.extension)-this.inset,f=r.x+this.gap,h=s.x+this.gap):(u=(p=Math.min(r.x,s.x)-this.extension)+this.inset,f=r.x-this.gap,h=s.x-this.gap),this.addPointAt(f,r.y),this.addPointAt(p,r.y+.01),this.addPointAt(u,r.y),this.addPointAt(u,s.y),this.addPointAt(p,s.y-.01),this.addPointAt(h,s.y))}return this.updateTargetBindings(),!0};new Date(2016,4,17,0,0,0,0);var a=60,r=24,s=a*r,d={x:0,y:40},l=t,c=e,g=o,p=go.GraphObject.make,u={},f=function(t,e){for(var o=t+"";o.length<e;)o="0"+o;return o},h=p(go.Diagram,"myDiagramDiv",{fixedBounds:new go.Rect(0,0-d.y,1e3,500),"animationManager.isEnabled":!1,"contextMenuTool.defaultTouchContextMenu":null,padding:0,contentAlignment:go.Spot.TopLeft,initialDocumentSpot:go.Spot.TopLeft,initialViewportSpot:go.Spot.TopLeft,"resizingTool.updateAdornments":function(t){if(!(null===t||t instanceof go.Link)){if(!this.diagram.isReadOnly){var e=t.resizeObject,o=t.findAdornment(this.name);if(null!==e&&t.canResize()&&t.actualBounds.isReal()&&t.isVisible()&&e.actualBounds.isReal()&&e.isVisibleObject()&&(null!==o&&o.adornedObject===e||(o=this.makeAdornment(e)),null!==o)){var n=e.getDocumentAngle();return this.updateResizeHandles(o,n),void t.addAdornment(this.name,o)}}t.removeAdornment(this.name)}}});function m(t,e,o){var n=X+("shiftparam"==t.key?0:100);return e.x<=n&&(e.x=n),e.y<0&&(e.y=0),e}function y(){var t=h.findNodeForKey("shiftbody"),e=h.findNodeForKey("1"),o=h.findNodeForKey("4"),n=e.location.copy();n.x+=e.width,t.location=n,t.width=o.location.x-n.x}function w(t){var e=h.findNodeForKey("moveHWND"),o=h.findNodeForKey("TIMEMAP"),n=o.placeholder.actualBounds.copy(),i=e.location.copy(),a=new go.Rect(i.x,0-d.y,n.width+(o.location.x-i.x)+20,n.height+i.y-d.y+20);setTimeout(function(){a.width||(a.width=1200,a.height=500),function(t,e,o,n){h.startTransaction("");var i=parseFloat(t),a=parseFloat(e),r=parseFloat(o),s=parseFloat(n);h.fixedBounds=new go.Rect(i,a,Math.max(1,r),Math.max(1,s)),h.commitTransaction("")}(a.x,a.y,a.width,a.height),h.scroll("document","left")},t)}h.groupTemplate=p(go.Group,"Vertical",{movable:!1,selectionAdorned:!1},p(go.Panel,"Auto",p(go.Shape,{fill:null,stroke:null}),p(go.Placeholder,{padding:0})),new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify)),h.nodeTemplate=p(go.Node,"Auto",{movable:!1,copyable:!1,avoidable:!0,minLocation:new go.Point(-1/0,NaN),maxLocation:new go.Point(1/0,NaN),selectionAdorned:!1,isShadowed:!0,shadowColor:"#C5C1AA",layerName:"Background"},new go.Binding("position","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("desiredSize","size",go.Size.parse).makeTwoWay(go.Size.stringify),p(go.Shape,"Rectangle",{portId:"",fromSpot:go.Spot.Right,toSpot:go.Spot.Left,strokeWidth:0,stroke:null},new go.Binding("fill","color"))),h.nodeTemplateMap.add("moveHWND",p(go.Node,"Horizontal",{layerName:"Foreground",copyable:!1,avoidable:!0,minLocation:new go.Point(-1/0,NaN),maxLocation:new go.Point(1/0,NaN),dragComputation:function(t,e,o){if(e.x<0)e.x=0;else{var n=h.findNodeForKey("TIMEMAP"),i=n.position.copy();H||(H=i.x-X);var a=d.x+e.x-i.x+H;i.x+=a,n.move(i),j||(j=h.links.filter(function(t){if("Dimensioning"==t.category)return t})),j.map(function(t){k(t,t.data.text)}),u.hasOwnProperty("grpTIMEMAP")||(h.currentCursor="move",u.grpTIMEMAP=[function(t){g?w(50):C({fnCB:function(){F=1,w(50)}})},i])}return e},selectionAdorned:!1},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),p(go.TextBlock,{stroke:"brown",angle:270,margin:new go.Margin(0,0,0,10)},new go.Binding("text")),p(go.Picture,{opacity:.4,desiredSize:new go.Size(70,80),imageStretch:go.GraphObject.Uniform,source:"data:image/png;base64,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"}))),h.nodeTemplateMap.add("Comment",p(go.Node,new go.Binding("location","loc",go.Point.parse),{},p(go.TextBlock,{stroke:"brown",textAlign:"center"},new go.Binding("text"),new go.Binding("font","bold",function(t){return t?"bold 10pt sans-serif":"10pt sans-serif"})))),h.nodeTemplateMap.add("LinkLabel",p(go.Node,{locationSpot:go.Spot.Center},new go.Binding("segmentIndex"),new go.Binding("segmentOffset"))),h.linkTemplateMap.add("Comment",p(go.Link,{curve:go.Link.Bezier},new go.Binding("curviness"),p(go.Shape,{stroke:"brown"},new go.Binding("stroke","strokeColor")),p(go.Shape,{toArrow:"OpenTriangle",stroke:"brown"},new go.Binding("stroke","strokeColor"))));function k(t,e){return t.labelNodes.each(function(o){o.findNodesInto().each(function(n){var i=t.fromNode.data,a=t.toNode.data,r="";switch(o.key.toString()){case"-41":r="la khoang thoi gian gat the vao hop le";break;case"-42":r="la khoang thoi gian gat the vao nhung bi tinh tre";break;case"-43":r="la khoang thoi gian dung de tinh the ra ve som";break;case"-44":r="la khoang thoi gian dung de tinh the ra ve hop le";break;case"-45":h.model.setDataProperty(n.data,"SI",i.T),D.SI=i.T;break;case"-46":h.model.setDataProperty(n.data,"SO",a.F),D.SO=a.F}""!=r&&(h.model.setDataProperty(n.data,"header",i[t.data.fromSpot.indexOf("Left")>0?"F":"T"]+" - "+a[t.data.toSpot.indexOf("Left")>0?"F":"T"]),h.model.setDataProperty(n.data,"text","Tong thoi gian: "+e+" phut\n\n"+r))}),"-47"==o.key.toString()&&(e+=" phut")}),e}function b(){return h.lastInput.documentPoint.x-h.firstInput.documentPoint.x}function x(t,e){var o=e.location.x;1==t&&(o+=e.width),(o=o/a%r)<0&&(o+=r);var n=Math.floor(o),i=(60*(o-n)).toFixed(0);60==i&&(n+=1,i=0);var s=f(n,2)+":"+f(i,2);return h.model.setDataProperty(e.data,1==t?"T":"F",s),s}function v(t){return[{column:t},new go.Binding("width","widths",function(e){return Array.isArray(e)&&t<e.length?e[t]:NaN}).makeTwoWay(function(e,o){var n=o.widths;if(n||(n=[]),t>=n.length)for(var i=n.length;i<=t;i++)n[i]=NaN;return n[t]=e,n})]}h.nodeTemplateMap.add("Description",p(go.Node,"Auto",new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("scale","scale"),{locationSpot:go.Spot.Center,portId:"NODE",dragComputation:m},p(go.Shape,"RoundedRectangle",{fill:"white",portId:"SHAPE"},new go.Binding("fill","color"),new go.Binding("strokeWidth","strokeW")),p(go.Panel,"Vertical",p(go.TextBlock,{font:"bold 11pt sans-serif",margin:new go.Margin(3,0,0,0)},new go.Binding("text","header"),new go.Binding("stroke","textColor")),p(go.TextBlock,{margin:3,maxSize:new go.Size(200,300)},new go.Binding("text","text"),new go.Binding("stroke","textColor"))))),h.linkTemplateMap.add("Dimensioning",p(i,new go.Binding("group","group"),new go.Binding("fromSpot","fromSpot",go.Spot.parse),new go.Binding("toSpot","toSpot",go.Spot.parse),new go.Binding("direction"),new go.Binding("extension"),new go.Binding("inset"),p(go.Shape,{stroke:"gray",strokeWidth:1},new go.Binding("stroke","color"),new go.Binding("strokeDashArray","strokeDashArray")),p(go.Shape,{fromArrow:"BackwardOpenTriangle",segmentIndex:2,stroke:"gray"},new go.Binding("stroke","color")),p(go.Shape,{toArrow:"OpenTriangle",segmentIndex:-3,stroke:"gray"},new go.Binding("stroke","color")),p(go.TextBlock,{segmentIndex:2,segmentFraction:.5,segmentOrientation:go.Link.OrientUpright,alignmentFocus:go.Spot.Bottom,stroke:"gray",font:"8pt sans-serif"},new go.Binding("text","text",function(t,e){return function(t){var e=t.pointsCount;if(e<2)return"";var o=t.getPoint(0),n=t.getPoint(e-1),i=t.direction;if(isNaN(i))return Math.floor(Math.sqrt(o.distanceSquaredPoint(n)))+"";var a=i*Math.PI/180,r=Math.floor(Math.abs(Math.cos(a)*(o.x-n.x))+Math.abs(Math.sin(a)*(o.y-n.y)));return r=k(t,r)}(e.part)}).makeTwoWay(),new go.Binding("stroke","color")))),h.linkTemplateMap.add("isOT",p(go.Link,{curve:go.Link.Bezier},new go.Binding("curviness"),new go.Binding("visible","visible"),p(go.Shape),p(go.Shape,{toArrow:"Standard"}),p(go.TextBlock,{font:"italic 8.5pt sans-serif",maxSize:new go.Size(100,300),margin:3},new go.Binding("text","text"),new go.Binding("alignmentFocus","alignmentFocus")))),h.toolManager.dragSelectingTool.isEnabled=!1,h.toolManager.resizingTool.resize=function(t){if("nodehieu"==this.adornedObject.part.data.category){var e=this.adornedObject.part,o=e.location,n=b();switch(e.key){case"1":if(n>0)n=h.findNodeForKey("2").location.x-o.x;else if(n<0){n=this.adornedObject.getDocumentPoint(this.handle.alignment.opposite()).x-h.fixedBounds.position.x-50}else n=e.width;break;case"4":if(n>0)n=600;else if(n<0){var i=h.findNodeForKey("3");if("R"==this.handle.name)n=e.location.x+e.width-(i.location.x+i.width);else n=this.adornedObject.getDocumentPoint(this.handle.alignment.opposite()).x-(i.location.x+i.width)}else n=e.width;break;case"2":case"3":if(n>0)n=h.findNodeForKey(parseInt(e.key)+1).location.x-o.x;else if(n<0){var a=h.findNodeForKey(parseInt(e.key)-1);n=e.location.x+e.width-(a.location.x+a.width)}else n=e.width}n>0&&t.width>n&&(t.width=n),t.width<5&&(t.width=5),y()}go.ResizingTool.prototype.resize.call(this,t)},h.nodeTemplateMap.add("nodehieu",p(go.Node,"Auto",{movable:!0,copyable:!1,avoidable:!0,minLocation:new go.Point(-1/0,NaN),maxLocation:new go.Point(1/0,NaN),dragComputation:function(t,e,o){if(null===t.diagram)return e;var n,i,a=t.location,r=b();switch(t.data.key){case"1":r>0?(i=h.findNodeForKey("2").location.copy(),a.x+t.width>=i.x&&(e.x=i.x-t.width)):r<0&&(n=h.fixedBounds.position.x+50,e.x<=n&&(e.x=n)),y();break;case"4":r>0?(i=h.fixedBounds.position.x+h.fixedBounds.width,e.x>i&&(e.x=i)):(n=(s=h.findNodeForKey("3")).location.x+s.width,e.x<=n&&(e.x=n)),y();break;case"2":case"3":var s,d=!1;if(r>0?(i=h.findNodeForKey(parseInt(t.data.key)+1).location.x,e.x+t.width>=i&&(e.x=i-t.width,d=!0)):(n=(s=h.findNodeForKey(parseInt(t.data.key)-1)).location.x+s.width,e.x<=n&&(e.x=n,d=!0)),j||(j=h.links.filter(function(t){if("Dimensioning"==t.category)return t})),j.map(function(t){k(t,t.data.text)}),d){var l=h.findNodeForKey("-4"+t.data.key);h.model.setDataProperty(l.data,"segmentIndex",0),h.model.setDataProperty(l.data,"segmentIndex",6)}}return e},selectionChanged:function(t){t.elt(0);h.commit(function(e){var o=t.data;e.model.set(o,"zOrder",t.isSelected?1:0)},"modified zOrder")}},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("width","width").makeTwoWay(),new go.Binding("zOrder"),{resizable:!0,resizeObjectName:"HIEU_SHAPE",resizeAdornmentTemplate:p(go.Adornment,"Spot",p(go.Placeholder),p(go.Shape,{name:"R",alignment:go.Spot.Right,cursor:"col-resize",geometryString:"F M10 50 L0 60 L0 70 L20 70 L20 60 L10 50 L10 0 L10 50z",fill:"lightpink",stroke:"red",strokeWidth:.3}),p(go.Shape,{name:"L",alignment:go.Spot.Left,cursor:"col-resize",geometryString:"F M0 0 L0 10 L10 20 L10 70 L10 20 L20 10 L20 0 L0 0z",fill:"lightblue",stroke:"blue",strokeWidth:.3}),p(go.TextBlock,{alignment:go.Spot.Right,alignmentFocus:new go.Spot(.5,-3,0,5),stroke:"black"},new go.Binding("text","adornedObject",function(t){return x(1,t)}).ofObject()),p(go.TextBlock,{alignment:go.Spot.Left,alignmentFocus:new go.Spot(.5,3,0,5),stroke:"black"},new go.Binding("text","adornedObject",function(t){return x(0,t)}).ofObject())),selectionAdorned:!1},p(go.Shape,{strokeWidth:0,fill:"lightgray",height:20},new go.Binding("fill","color")),p(go.TextBlock,{margin:0},new go.Binding("text","text"))));var T,S=new go.HTMLInfo;S.show=function(t,e,o){if(t instanceof go.TextBlock){if("number"==t.choices.type)(T=document.createElement("input")).type=t.choices.type,T.addEventListener("keyup",function(t){var e=(t=t||window.event).which?t.which:t.keyCode;return!(e>31&&(e<48||e>57))}),T.value=t.text;else if("select"==t.choices.type){T=document.createElement("select");for(var n=t.choices.opts,i=n.length,a=0;a<i;a++){var r=document.createElement("option");r.text=n[a].des,r.value=n[a].id,n[a].des===t.text&&(r.selected=!0),T.add(r)}}T.className="gojsedit",e.div.appendChild(T),T.addEventListener("keydown",function(t){var e=t.which;return 13==e?(o.acceptText(go.TextEditingTool.LostFocus),!1):9==e?(o.acceptText(go.TextEditingTool.Tab),t.preventDefault(),!1):void(27===e&&(o.doCancel(),o.diagram&&o.diagram.focus()))},!1);var s=t.getDocumentPoint(go.Spot.TopLeft),d=e.transformDocToView(s),l=e.scale,c=t.getDocumentScale()*l,g=(t.naturalBounds.width+4)*c,p=(t.naturalBounds.height+4)*c;s.x,d.x,s.y,d.y;T.style.left=d.x+"px",T.style.top=d.y-3+"px",T.style.width=g+"px",T.style.height=p+"px",T.style.position="absolute",T.style.zIndex=100,T.focus(),"number"==t.choices.type&&T.select()}},S.hide=function(t,e){var o=t.div.getElementsByClassName("gojsedit")[0];t.div.removeChild(o)},S.valueFunction=function(t,e){var o=h.div.getElementsByClassName("gojsedit")[0];return""==o.value?"-1":o.value},h.nodeTemplateMap.add("shiftinfo",p(go.Node,"Auto",{copyable:!1,avoidable:!0,selectionAdorned:!1,isShadowed:!0,shadowColor:"gray",dragComputation:m},new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),p(go.Shape,{fill:"#EEEEEE",opacity:.2}),p(go.Panel,"Vertical",{stretch:go.GraphObject.Horizontal,alignment:go.Spot.TopLeft},p(go.Panel,"Table",{name:"TABLE1",stretch:go.GraphObject.Horizontal,minSize:new go.Size(100,10),defaultAlignment:go.Spot.Left,defaultColumnSeparatorStroke:"gray",defaultColumnSeparatorStrokeWidth:.5,defaultRowSeparatorStroke:"gray",defaultRowSeparatorStrokeWidth:.5,defaultSeparatorPadding:2},p(go.RowColumnDefinition,v(0)),p(go.RowColumnDefinition,v(1)),p(go.RowColumnDefinition,v(2)),p(go.Panel,"Table",{portId:"portBOT",row:0,column:0,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return t[8]})),p(go.TextBlock,{column:1,stretch:go.GraphObject.Horizontal,margin:0,background:"yellow",width:50,maxLines:1,editable:!0,textEditor:S,choices:{type:"number"},textValidation:function(t,e,o){return!0}},new go.Binding("text","isBOT").makeTwoWay())),p(go.Panel,"Table",{portId:"CI",row:0,column:1,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return t[10]})),p(go.TextBlock,{column:1,stretch:go.GraphObject.Horizontal,margin:0,background:"LightSeaGreen",width:50,maxLines:1,editable:!1},new go.Binding("text","SI").makeTwoWay())),p(go.Panel,"Table",{portId:"CO",row:0,column:2,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return t[11]})),p(go.TextBlock,{column:1,stretch:go.GraphObject.Horizontal,margin:0,background:"lime",width:50,maxLines:1,editable:!1},new go.Binding("text","SO").makeTwoWay())),p(go.Panel,"Table",{portId:"portAOT",row:0,column:3,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return t[9]})),p(go.TextBlock,{column:1,stretch:go.GraphObject.Horizontal,margin:0,background:"yellow",width:50,maxLines:1,editable:!0,textEditor:S,choices:{type:"number"}},new go.Binding("text","isAOT").makeTwoWay())),p(go.Panel,"Table",{row:1,column:0,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return t[17]})),p(go.TextBlock,{column:1,stretch:go.GraphObject.Horizontal,margin:0,background:"yellow",width:80,editable:!0,textEditor:S,choices:{type:"select"},textEdited:function(t,e,o){h.model.setDataProperty(t.part.data,"noiseI",o),h.model.raiseDataChanged(t.part.data,"noiseI",e,o)}},new go.Binding("choices","noiselOG",function(t){return{type:"select",opts:t}}),new go.Binding("text","noiseI",function(t,e){return e.part.data.noiselOG.filter(function(e){return e.id==t})[0].des}))),p(go.Panel,"Table",{row:1,column:3,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return t[16]})),p(go.TextBlock,{column:1,stretch:go.GraphObject.Horizontal,margin:0,background:"yellow",width:80,editable:!0,textEditor:S,choices:{type:"select"},textEdited:function(t,e,o){h.model.setDataProperty(t.part.data,"noiseO",o),h.model.raiseDataChanged(t.part.data,"noiseO",e,o)}},new go.Binding("choices","noiselOG",function(t){return{type:"select",opts:t}}),new go.Binding("text","noiseO",function(t,e){return e.part.data.noiselOG.filter(function(e){return e.id==t})[0].des}))),p(go.Panel,"Table",{row:1,column:1,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return t[12]})),p(go.TextBlock,{portId:"VaoRa",column:1,stretch:go.GraphObject.Horizontal,margin:0,background:"yellow",width:50,maxLines:1,editable:!0,textEditor:S,choices:{type:"number"},textValidation:function(t,e,o){return!0}},new go.Binding("text","TongTG").makeTwoWay())),p(go.Panel,"Table",{row:1,column:2,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return t[13]})),p(go.TextBlock,{column:1,stretch:go.GraphObject.Horizontal,margin:0,background:"yellow",width:50,maxLines:1,editable:!0,textEditor:S,choices:{type:"number"},textValidation:function(t,e,o){return!0}},new go.Binding("text","CountD").makeTwoWay()))),p(go.Panel,"Auto",{stretch:go.GraphObject.Horizontal},p(go.Shape,{fill:"#1570A6",stroke:null,height:3})),p(go.Panel,"Table",{name:"TABLE1",stretch:go.GraphObject.Horizontal,defaultAlignment:go.Spot.Center,defaultColumnSeparatorStroke:"gray",defaultColumnSeparatorStrokeWidth:.5,defaultRowSeparatorStroke:"gray",defaultRowSeparatorStrokeWidth:.5,defaultSeparatorPadding:new go.Margin(2,0,2,0)},function(){var t=[];t.push(p(go.TextBlock,{row:0,column:0,font:"bold 10pt sans-serif",stroke:"black"},new go.Binding("text","labels",function(t){return"THOI GIAN NGHI GIUA CA"}))),t.push(p(go.Panel,"Table",{row:1,column:0,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return"Sau gio vao (phut): "})),p(go.TextBlock,{column:1,stretch:go.GraphObject.Horizontal,margin:2,background:"yellow",width:50,maxLines:1,editable:!0,textEditor:S,choices:{type:"number"},textValidation:function(t,e,o){return!0}},new go.Binding("text","TongTG",function(t){return 0}))),p(go.Panel,"Table",{row:2,column:0,alignment:go.Spot.Right,margin:2},p(go.TextBlock,{column:0,margin:new go.Margin(0,5),editable:!1},new go.Binding("text","labels",function(t){return"So phut nghi: "})),p(go.TextBlock,{column:1,stretch:go.GraphObject.Horizontal,margin:2,background:"yellow",width:50,maxLines:1,editable:!0,textEditor:S,choices:{type:"number"},textValidation:function(t,e,o){return!0}},new go.Binding("text","CountD",function(t){return 0})))),t.push(p(go.TextBlock,{row:0,column:1,font:"bold 10pt sans-serif",stroke:"black",margin:2},new go.Binding("text","labels",function(t){return t[0]}))),t.push(p(go.TextBlock,{row:1,column:1,alignment:go.Spot.Right,stroke:"black",margin:2},new go.Binding("text","labels",function(t){return t[14]}))),t.push(p(go.TextBlock,{row:2,column:1,alignment:go.Spot.Right,stroke:"red",margin:2},new go.Binding("text","labels",function(t){return t[15]})));for(var e=2;e<=8;e++)t.push(p(go.TextBlock,{row:0,column:e,width:50,textAlign:"center",margin:2},new go.Binding("stroke","wT"+(e-1),function(t){return t?"red":"black"}),new go.Binding("text","labels",function(t,e){return t[e.column-1]})));for(var e=2;e<=8;e++)t.push(p("CheckBox","nT"+(e-1),{row:1,column:e},new go.Binding("ButtonIcon.stroke","wT"+(e-1),function(t){return t?"red":"black"}),new go.Binding("checked","nT"+(e-1))));for(var e=2;e<=8;e++)t.push(p("CheckBox","wT"+(e-1),{row:2,column:e,"ButtonIcon.stroke":"red"},new go.Binding("checked","wT"+(e-1))));return t}()))));var A,B,P,M=(A=p(go.Part,"Graduated",{layerName:"Grid",position:new go.Point(0,0-d.y),graduatedTickUnit:a},p(go.Shape,{geometryString:"M0 0 H3600",stroke:"black"}),p(go.Shape,{geometryString:"M0 0 V700",interval:r,stroke:"red",strokeWidth:.5}),p(go.TextBlock,{font:"9pt sans-serif",stroke:"red",interval:r,alignmentFocus:new go.Spot(0,0,-2,-4),graduatedFunction:function(t){return"00:00 "+l.js_gojs_2}})),B=p(go.Part,"Graduated",{layerName:"Grid",position:new go.Point(0,20-d.y),graduatedTickUnit:a/2},p(go.Shape,{geometryString:"M0 30 H3600",stroke:"black"}),p(go.Shape,{geometryString:"M0 0 V765",stroke:"lightgray",strokeWidth:.5,strokeDashArray:[5,5]}),p(go.Shape,{geometryString:"M0 0 V765",stroke:"lightgray",strokeWidth:.5,interval:2}),p(go.TextBlock,{interval:2,font:"8pt sans-serif",segmentOffset:new go.Point(0,-15),graduatedFunction:function(t){return(t=t/a%r)<0&&(t+=r),0==Math.floor(t)?"":Math.floor(t).toString()+":00"}})),P=function(){var t=h.viewportBounds,e=h.fixedBounds.position.x+h.fixedBounds.width;A.graduatedMin=0,A.graduatedMax=t.width+e,A.elt(0).width=h.viewportBounds.width+e,B.graduatedMin=0,B.graduatedMax=t.width+e,B.elt(0).width=h.viewportBounds.width+e},h.addDiagramListener("ViewportBoundsChanged",function(t){setTimeout(function(t){P()},200)}),{init:function(){h.add(B),h.add(A)},drawruler:P}),O=function(){if(L.linkDataArray=[{from:"1",to:"2",category:"Dimensioning",extension:70,strokeDashArray:[5,5],labs:["-41"],fromSpot:"TopLeft",toSpot:"TopLeft",direction:0,color:"LightSeaGreen",text:"0"},{from:"2",to:"2",category:"Dimensioning",extension:70,color:"fuchsia",strokeDashArray:[5,5],labs:["-42"],fromSpot:"TopLeft",toSpot:"TopRight",direction:0,text:"0"},{from:"3",to:"3",category:"Dimensioning",extension:70,strokeDashArray:[5,5],labs:["-43"],fromSpot:"TopLeft",toSpot:"TopRight",direction:0,color:"darkorange",text:"0"},{from:"3",to:"4",category:"Dimensioning",extension:70,strokeDashArray:[5,5],labs:["-44"],fromSpot:"TopRight",toSpot:"TopRight",direction:0,color:"limegreen",text:"0"},{from:"1",to:"4",category:"Dimensioning",extension:70,labs:["-45","-46","-47"],fromSpot:"BottomRight",toSpot:"BottomLeft",direction:180,color:"blue",text:"0"},{from:"n41",category:"Comment",to:"-41",strokeColor:"LightSeaGreen"},{from:"n42",category:"Comment",to:"-42",strokeColor:"fuchsia"},{from:"n43",category:"Comment",to:"-43",curviness:-10,strokeColor:"darkorange"},{from:"n44",category:"Comment",to:"-44",curviness:-10,strokeColor:"limegreen"},{from:"shiftparam",category:"Comment",to:"-45",fid:"CI"},{from:"shiftparam",category:"Comment",to:"-46",fid:"CO"},{from:"-47",category:"Comment",to:"shiftparam",pid:"VaoRa",curviness:-20},{from:"shiftparam",category:"isOT",to:"1",fid:"portBOT",curviness:40,visible:!0,alignmentFocus:new go.Spot(1,.1),text:"Gia tri -1 se khong tinh\nthay doi >=0 neu muon tinh"},{from:"shiftparam",category:"isOT",to:"4",fid:"portAOT",curviness:-40,visible:!0,alignmentFocus:new go.Spot(.1,0),text:"Gia tri -1 se khong tinh\nthay doi >=0 neu muon tinh"}],I){var t=h.findNodeForKey("shiftparam"),e=t.actualBounds,o=N+(R-N)/2;t.move(new go.Point(o-e.width/2,328))}},L=new go.GraphLinksModel;function C(t){var e={},o=[],n=L.nodeDataArray,i=function(t,e){var o=e.split(":"),n=60*parseInt(o[0])+parseInt(o[1]);return n<t&&(n+=s),n};n.map(function(t,n){switch(t.hasOwnProperty("loc")&&-1==["TIMEMAP"].indexOf(t.key)&&o.push({key:t.key,loc:t.loc}),t.key){case"1":E[0]=i(0,t.F),E[1]=i(E[0],t.T);break;case"2":E[2]=i(E[1],t.F),E[3]=i(E[2],t.T);break;case"3":E[4]=i(E[3],t.F),E[5]=i(E[4],t.T);break;case"4":E[6]=i(E[5],t.F),E[7]=i(E[6],t.T);break;case"shiftparam":$.map(h.shiftDAT_step2,function(o,n){e[n]=t[n]})}});var d,p=JSON.stringify(h.shiftDAT_step1)!=JSON.stringify(E),u=JSON.stringify(h.shiftDAT_step2)!=JSON.stringify(e),m=function(){JSON.stringify(o)!=JSON.stringify(h.shiftDAT_nLOC)&&st("setItem",window[st0("1")](btoa("gojsloc"+h.__id+"_"+h.shiftDAT_id)),btoa(window[st0("1")](JSON.stringify(o))))};if(p||u){var y=function(){m(),t&&t.hasOwnProperty("fnCB")&&"function"==typeof t.fnCB&&t.fnCB();c(h.shiftDAT_id,p?(D.BI=E[0]-E[1],D.LI=E[2]-E[1],D.ExI=E[3]-E[1],D.BO=E[4]-E[6],D.EO=E[5]-E[6],D.ExO=E[7]-E[6],D):null,u?e:null),p&&(h.shiftDAT_step1=$.extend([],E)),u&&(h.shiftDAT_step2=$.extend({},e))};if(g||K)y(),h.model.undoManager.clear(),h.model.undoManager.isEnabled=!1;else{var k=admin$.popup({a:"d",t:"i love you",m:"fucking ...",cbClosed:function(){x?(K=k.find("#savemsgopt:checked").length>0,y()):(h.model.undoManager.history.each(function(t){t.undo()}),p&&(E=$.extend([],h.shiftDAT_step1)),u&&(e=$.extend({},h.shiftDAT_step2))),h.model.undoManager.clear(),h.model.undoManager.isEnabled=!1}}),b=k.find("#popupdone"),x=!1;b.html(l.js_004_3),b.removeClass("btn-secondary").addClass("btn-danger");var v=function(t){(t=t/a%r)<0&&(t+=r);var e=Math.floor(t),o=(60*(t-e)).toFixed(0);return 60==o&&(e+=1,o=0),f(e,2)+":"+f(o,2)};k.find(".modal-body").html("<div style='float:left'>BI: "+v(E[0])+"<br>SI: "+v(E[1])+"<br>LI: "+v(E[2])+"<br>ExI: "+v(E[3])+"</div><div style='float:right'>BO: "+v(E[4])+"<br>EO: "+v(E[5])+"<br>SO: "+v(E[6])+"<br>ExO: "+v(E[7])+'</div><div class="clearfloat" style="height:25px;position:relative;"><div style="position:absolute;" class="checkbox clip-check check-warning"><input type="checkbox" id="savemsgopt" value="1"><label for="savemsgopt">Save khong can hoi</label></div></div>'),b.click(function(){x=!0,k.modal("hide")}),b[((d=!0)?"add":"remove")+"Class"]("btn-primary").prop("disabled",!d),setTimeout(function(){k.modal("show")},10)}}else m(),F=1,w(50)}L.linkToPortIdProperty="pid",L.linkFromPortIdProperty="fid",L.linkLabelKeysProperty="labs",h.model=L,L.addChangedListener(function(t){switch(t.propertyName){case"StartedTransaction":g||2!=F||(h.model.undoManager.isEnabled=!0);break;case"CommittedTransaction":var e=!1;for(var o in u)if(u.hasOwnProperty(o)){var n=u[o];n[0](n[1]),e=!0}if(u={},g)2==F&&c(!0);else if(1==F)F=2,h.model.undoManager.clear(),h.model.undoManager.isEnabled=!1;else if(2==F&&!e){if(!t.isTransactionFinished||!t.object)return;console.log("native CommittedTransaction"),C({})}}}),M.init();var j,I,D,E,N,R,G,H,F=0,K=!1,_=function(t,e){var o=t.split(":"),n=60*parseInt(o[0])+parseInt(o[1]);return E[1]=n,N=n+parseInt(e),E[0]=N,{key:"1",text:"In",F:"00:00",T:"00:00",color:"LightSeaGreen",loc:N+" 200",width:Math.abs(e),category:"nodehieu",zOrder:0,group:"TIMEMAP"}},J=function(t,e){return E[2]=E[1]+t,E[3]=E[1]+e,{key:"2",text:"Late",F:"00:00",T:"00:00",color:"lightpink",loc:E[1]+t+" 200",width:E[3]-E[2],category:"nodehieu",zOrder:0,group:"TIMEMAP"}},z=function(t,e){var o=t.split(":"),n=60*parseInt(o[0])+parseInt(o[1]);return n<E[1]&&(n+=s),E[6]=n,R=n+Math.abs(e),E[7]=E[6]+Math.abs(e),{key:"4",text:"Out",F:"00:00",T:"00:00",color:"lime",loc:n+" 200",width:Math.abs(e),category:"nodehieu",zOrder:0,group:"TIMEMAP"}},W=function(t,e){var o=E[6]+parseInt(t),n=Math.abs(parseInt(t)-parseInt(e));return E[4]=o,E[5]=E[4]+n,{key:"3",text:"Early",F:"00:00",T:"00:00",color:"gold",loc:o+" 200",width:n,category:"nodehieu",zOrder:0,group:"TIMEMAP"}},V=function(){var t=Math.floor((R-N)/4);if(t<200){var e=0,o=N+2*t-110,n=o-220,i=N+2*t+110;n>N&&(e=n-N),G=[n-e,o-e,i+e,i+220+e]}else G=[N,N+t,R-t,R];X=G[0]-200-10},X=0;return{show:function(t,e){h.model.undoManager.isEnabled=!1,K=!1,F=0,j=null,H=null,E=[0,0,0,0,0,0,0,0],h.__id=e,h.shiftDAT_id=t.id,D=t.hasOwnProperty("s1")?$.extend({},t.s1):$.extend({SI:t.i[3].t,SO:t.i[4].t},n);var o=[],i=st("getItem",window[st0("1")](btoa("gojsloc"+e+"_"+t.id)));o.push(_(D.SI,D.BI),J(D.LI,D.ExI),z(D.SO,D.ExO),W(D.BO,D.EO),{key:"shiftbody",loc:E[1]+" 200",size:E[6]-E[1]+" 20",color:"gray",group:"TIMEMAP"}),h.shiftDAT_step1=$.extend([],E),o.push({key:"-41",category:"LinkLabel",segmentOffset:new go.Point(0,-15)},{key:"-42",category:"LinkLabel",segmentIndex:6,segmentOffset:new go.Point(0,-15)},{key:"-43",category:"LinkLabel",segmentIndex:6,segmentOffset:new go.Point(0,-15)},{key:"-44",category:"LinkLabel",segmentOffset:new go.Point(0,-15)},{key:"-45",category:"LinkLabel",segmentIndex:1,segmentOffset:new go.Point(8,0)},{key:"-46",category:"LinkLabel",segmentIndex:3},{key:"-47",category:"LinkLabel"}),V(),o.push({key:"n41",category:"Description",header:"CheckIn OK",text:"",textColor:"LightSeaGreen",loc:G[0]+" 50",group:"TIMEMAP"},{key:"n42",category:"Description",header:"CheckIn Count Late",text:"",textColor:"fuchsia",loc:G[1]+" 50",group:"TIMEMAP"},{key:"n43",category:"Description",header:"Delta",text:"",textColor:"darkorange",loc:G[2]+" 50",group:"TIMEMAP"},{key:"n44",category:"Description",header:"Delta",text:"",textColor:"limegreen",loc:G[3]+" 50",group:"TIMEMAP"},{key:"TIMEMAP",isGroup:!0},{key:"moveHWND",category:"moveHWND",text:l.js_gojs_1,loc:X+" 100"}),t.hasOwnProperty("s2")?h.shiftDAT_step2=$.extend({},t.s2):h.shiftDAT_step2={TongTG:8,CountD:1,isBOT:-1,isAOT:-1,noiseI:"1",noiseO:"0",nT1:!0,wT1:!1,nT2:!0,wT2:!1,nT3:!0,wT3:!1,nT4:!0,wT4:!1,nT5:!0,wT5:!1,nT6:!0,wT6:!1,nT7:!0,wT7:!0},o.push($.extend({},h.shiftDAT_step2,{key:"shiftparam",category:"shiftinfo",group:"TIMEMAP",SI:"00:00",SO:"00:00",noiselOG:l.js_gojs_3,labels:l.js_gojs,loc:N+" 328"})),i?(I=!1,i=JSON.parse(window[st0("2")](atob(i))),o.map(function(t,e){var o=$.grep(i,function(e){return e.key===t.key});if(o.length>0&&(t.loc=o[0].loc,"moveHWND"==t.key)){var n=o[0].loc.split(" ");X=parseInt(n[0])}}),h.shiftDAT_nLOC=i):I=!0,L.nodeDataArray=o,w(20),g&&setTimeout(function(){h.zoomToRect(h.documentBounds)},50),setTimeout(function(){F=1,O(),g&&h.commandHandler.resetZoom(),F=2,h.model.undoManager.clear(),h.model.undoManager.isEnabled=!1},80)},gojsMOD:function(t){c=t,C()},empty:function(){h.model.undoManager.isEnabled=!1,L.nodeDataArray=[],L.linkDataArray=[]}}}this.mod=function(t){alert(t)}}return t.prototype.comm1="quux",t}(),tabglobalJS.nor_payrollonline=function(){"use strict";var t;return{init:function(e,o,n,i){if(t=new tabglobalJS.JS_nor_payrollonline({ua:1}),!i){var a=gQRY(window.location.href).sf;a&&(i={demo:a})}t.init(e,o,n,i)},mod:function(){t.mod()},dispose:function(){t.dispose()}}}();