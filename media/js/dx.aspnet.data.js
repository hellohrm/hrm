function aspnetdata(t){"use strict";DevExpress.data.AspNet=function(t,r,e,n,o){var a=["onLoading","onLoaded","onInserting","onInserted","onUpdating","onUpdated","onRemoving","onRemoved","onModifying","onModified","onPush","loadMode","cacheRawData","errorHandler"];function u(n){var u=n.key,f=n.loadUrl,s=n.loadMethod||"GET",l=n.loadParams,c="raw"===n.loadMode,y=n.updateUrl,p=n.insertUrl,g=n.deleteUrl,m=n.onBeforeSend,v=n.onAjaxError,S=n.tabId,h=n.iniDAT;function A(e,n,o,a){var i,d,f=r();function s(){var r=function(t){if(v){var r={error:t};v(r),t=r.error}f.reject(t)},e=function(t){t.hasOwnProperty("dataerr")?r(t):a?a(f,t):f.resolve()};h?(e(h),h=null):$.when(t.svrDAT({act:o.method,tabId:S,tokin:tabglobalJS.tokin,uri:o.url,dat:JSON.stringify(o.data)})).then(function(t){e(JSON.parse(t))},function(t){r(t)})}return n&&!u?f.reject(new Error("Primary key is not specified (operation: '"+e+"', url: '"+o.url+"')")):("load"===e?(o.cache=!1,o.dataType="json"):o.dataType="text",m&&(d=m(e,o))&&"function"==typeof d.then&&(i=d),i?i.then(s,function(t){f.reject(t)}):s()),f.promise()}function O(t,r){var n={};if(r&&(n.isCountQuery=r),t){["skip","take","requireTotalCount","requireGroupCount"].forEach(function(r){void 0!==t[r]&&(n[r]=t[r])});var a=o.normalizeSortingInfo,u=t.group,i=t.filter,d=t.select;t.sort&&(n.sort=JSON.stringify(a(t.sort))),u&&(function(t){if(!Array.isArray(t))return!1;for(var r=0;r<t.length;r++)if("groupInterval"in t[r]||"isExpanded"in t[r])return!0;return!1}(u)||(u=a(u)),n.group=JSON.stringify(u)),Array.isArray(i)&&(function t(r){r.forEach(function(e,n){Array.isArray(e)?t(e):"[object Date]"===Object.prototype.toString.call(e)&&(r[n]=function(t){function r(t,r){for(t=String(t);t.length<r;)t="0"+t;return t}var e=[1+t.getMonth(),"/",t.getDate(),"/",t.getFullYear()],n=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),u=t.getMilliseconds();return n+o+a+u>0&&e.push(" ",r(n,2),":",r(o,2),":",r(a,2),".",r(u,3)),e.join("")}(e))})}(i=e(!0,[],i)),n.filter=JSON.stringify(i)),t.totalSummary&&(n.totalSummary=JSON.stringify(t.totalSummary)),t.groupSummary&&(n.groupSummary=JSON.stringify(t.groupSummary)),d&&(Array.isArray(d)||(d=[d]),n.select=JSON.stringify(d))}return e(n,l),n}function j(t,r,e){var n=e.getResponseHeader("Content-Type"),o=n&&n.indexOf("application/json")>-1;t.resolve(o?JSON.parse(r):r)}var C={key:u,useDefaultSearch:!0,load:function(t){return A("load",!1,{url:f,method:s,data:O(t)},function(t,r){i(t,r,function(t){return[t.data,function(t){return{totalCount:"totalCount"in t?t.totalCount:-1,groupCount:"groupCount"in t?t.groupCount:-1,summary:t.summary||null}}(t)]})})},totalCount:!c&&function(t){return A("load",!1,{url:f,method:s,data:O(t,!0)},function(t,r){i(t,r,function(t){return[t.totalCount]})})},byKey:!c&&function(t){return A("load",!0,{url:f,method:s,data:O({filter:(r=t,Array.isArray(u)?u.map(function(t){return[t,r[t]]}):[u,r])})},function(t,r){i(t,r,function(t){return[t.data[0]]})});var r},update:y&&function(t,r){return A("update",!0,{url:y,method:n.updateMethod||"PUT",data:{key:d(t),values:JSON.stringify(r)}},j)},insert:p&&function(t){return A("insert",!1,{url:p,method:n.insertMethod||"POST",data:{values:JSON.stringify(t)}},j)},remove:g&&function(t){return A("delete",!0,{url:g,method:n.deleteMethod||"DELETE",data:function(t){var r={};return r[u]=d(t),r}(t)})}};return a.forEach(function(t){var r=n[t];void 0!==r&&(C[t]=r)}),C}function i(t,r,e){var n;n=r,(r=Array.isArray(n)?{data:n}:"number"==typeof n?{totalCount:n}:n)&&"object"==typeof r?t.resolve.apply(t,e(r)):t.reject(new Error("Unexpected response received"))}function d(t){return"object"==typeof t?JSON.stringify(t):t}return{createStore:function(t){return new n(u(t))}}}(t,jQuery.Deferred,jQuery.extend,DevExpress.data.CustomStore,DevExpress.data.utils)}