function SmartWizard(t,e){this.target=t,this.options=e,this.curStepIdx=e.selected,this.steps=$(t).children("ul").children("li").children("a"),this.contentWidth=0,this.msgBox=$('<div class="msgBox"><div class="content"></div><a href="#" class="SmartWizard close">X</a></div>'),this.elmStepContainer=$("<div></div>").addClass("stepContainer"),this.loader=$("<div>Loading</div>").addClass("loader"),this.buttons={next:$("<a>"+e.labelNext+"</a>").attr("href","#").addClass("buttonNext"),previous:$("<a>"+e.labelPrevious+"</a>").attr("href","#").addClass("buttonPrevious"),finish:$("<a>"+e.labelFinish+"</a>").attr("href","#").addClass("buttonFinish")};var n=function(t){t.options.enableAllSteps?($(t.steps,t.target).removeClass("selected").removeClass("disabled").addClass("done"),$(t.steps,t.target).attr("isDone",1)):($(t.steps,t.target).removeClass("selected").removeClass("done").addClass("disabled"),$(t.steps,t.target).attr("isDone",0)),$(t.steps,t.target).each(function(e){$($(this).attr("href").replace(/^.+#/,"#"),t.target).hide(),$(this).attr("rel",e+1)})},s=function(t,e){return $($(e,t.target).attr("href").replace(/^.+#/,"#"),t.target)},i=function(t,e){var n=t.steps.eq(e),i=t.options.contentURL,a=t.options.contentURLData,o=n.data("hasContent"),d=e+1;if(i&&i.length>0)if(t.options.contentCache&&o)r(t,e);else{var l={url:i,type:"POST",data:{step_number:d},dataType:"text",beforeSend:function(){t.loader.show()},error:function(){t.loader.hide()},success:function(i){t.loader.hide(),i&&i.length>0&&(n.data("hasContent",!0),s(t,n).html(i),r(t,e))}};a&&(l=$.extend(l,a(d))),$.ajax(l)}else r(t,e)},r=function(t,e){var n=t.steps.eq(e),i=t.steps.eq(t.curStepIdx);if(e!=t.curStepIdx&&$.isFunction(t.options.onLeaveStep)){var r={fromStep:t.curStepIdx+1,toStep:e+1};if(!t.options.onLeaveStep.call(t,$(i),r))return!1}t.elmStepContainer.height(s(t,n).outerHeight());var o=t.curStepIdx;if(t.curStepIdx=e,"slide"==t.options.transitionEffect)s(t,i).slideUp("fast",function(e){s(t,n).slideDown("fast"),a(t,i,n)});else if("fade"==t.options.transitionEffect)s(t,i).fadeOut("fast",function(e){s(t,n).fadeIn("fast"),a(t,i,n)});else if("slideleft"==t.options.transitionEffect){var d=null,l=0;e>o?(d=t.contentWidth+10,nextElmLeft2=0,l=0-s(t,i).outerWidth()):(d=0-s(t,n).outerWidth()+20,nextElmLeft2=0,l=10+s(t,i).outerWidth()),e==o?(d=$($(n,t.target).attr("href"),t.target).outerWidth()+20,nextElmLeft2=0,l=0-$($(i,t.target).attr("href"),t.target).outerWidth()):$($(i,t.target).attr("href"),t.target).animate({left:l},"fast",function(e){$($(i,t.target).attr("href"),t.target).hide()}),s(t,n).css("left",d).show().animate({left:nextElmLeft2},"fast",function(e){a(t,i,n)})}else s(t,i).hide(),s(t,n).show(),a(t,i,n);return!0},a=function(t,e,n){if($(e,t.target).removeClass("selected"),$(e,t.target).addClass("done"),$(n,t.target).removeClass("disabled"),$(n,t.target).removeClass("done"),$(n,t.target).addClass("selected"),$(n,t.target).attr("isDone",1),o(t),$.isFunction(t.options.onShowStep)){var s={fromStep:parseInt($(e).attr("rel")),toStep:parseInt($(n).attr("rel"))};if(!t.options.onShowStep.call(this,$(n),s))return!1}if(t.options.noForwardJumping)for(var i=t.curStepIdx+2;i<=t.steps.length;i++)t.disableStep(i)},o=function(t){t.options.cycleSteps||(0>=t.curStepIdx?($(t.buttons.previous).addClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.previous).hide()):($(t.buttons.previous).removeClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.previous).show()),t.steps.length-1<=t.curStepIdx?($(t.buttons.next).addClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.next).hide()):($(t.buttons.next).removeClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.next).show())),!t.steps.hasClass("disabled")||t.options.enableFinishButton?($(t.buttons.finish).removeClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.finish).show()):($(t.buttons.finish).addClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.finish).hide())};SmartWizard.prototype.goForward=function(){var t=this.curStepIdx+1;if(this.steps.length<=t){if(!this.options.cycleSteps)return!1;t=0}i(this,t)},SmartWizard.prototype.goBackward=function(){var t=this.curStepIdx-1;if(0>t){if(!this.options.cycleSteps)return!1;t=this.steps.length-1}i(this,t)},SmartWizard.prototype.goToStep=function(t){var e=t-1;e>=0&&e<this.steps.length&&i(this,e)},SmartWizard.prototype.enableStep=function(t){var e=t-1;if(e==this.curStepIdx||e<0||e>=this.steps.length)return!1;var n=this.steps.eq(e);$(n,this.target).attr("isDone",1),$(n,this.target).removeClass("disabled").removeClass("selected").addClass("done")},SmartWizard.prototype.disableStep=function(t){var e=t-1;if(e==this.curStepIdx||e<0||e>=this.steps.length)return!1;var n=this.steps.eq(e);$(n,this.target).attr("isDone",0),$(n,this.target).removeClass("done").removeClass("selected").addClass("disabled")},SmartWizard.prototype.currentStep=function(){return this.curStepIdx+1},SmartWizard.prototype.showMessage=function(t){$(".content",this.msgBox).html(t),this.msgBox.show()},SmartWizard.prototype.hideMessage=function(){this.msgBox.fadeOut("normal")},SmartWizard.prototype.showError=function(t){this.setError(t,!0)},SmartWizard.prototype.hideError=function(t){this.setError(t,!1)},SmartWizard.prototype.setError=function(t,e){"object"==typeof t&&(e=t.iserror,t=t.stepnum),e?$(this.steps.eq(t-1),this.target).addClass("error"):$(this.steps.eq(t-1),this.target).removeClass("error")},SmartWizard.prototype.fixHeight=function(){var t=0,e=this.steps.eq(this.curStepIdx),n=s(this,e);n.children().each(function(){t+=$(this).outerHeight()}),n.height(t+5),this.elmStepContainer.height(t+20)},function(t){var e=$("<div></div>").addClass("actionBar");e.append(t.msgBox),$(".close",t.msgBox).click(function(){return t.msgBox.fadeOut("normal"),!1});var s=t.target.children("div");t.target.children("ul").addClass("anchor"),s.addClass("content"),t.options.errorSteps&&t.options.errorSteps.length>0&&$.each(t.options.errorSteps,function(e,n){t.setError({stepnum:n,iserror:!0})}),t.elmStepContainer.append(s),e.append(t.loader),t.target.append(t.elmStepContainer),e.append(t.buttons.finish).append(t.buttons.next).append(t.buttons.previous),t.target.append(e),this.contentWidth=t.elmStepContainer.width(),$(t.buttons.next).click(function(){return t.goForward(),!1}),$(t.buttons.previous).click(function(){return t.goBackward(),!1}),$(t.buttons.finish).click(function(){if(!$(this).hasClass("buttonDisabled"))if($.isFunction(t.options.onFinish)){var e={fromStep:t.curStepIdx+1};if(!t.options.onFinish.call(this,$(t.steps),e))return!1}else{var n=t.target.parents("form");n&&n.length&&n.submit()}return!1}),$(t.steps).bind("click",function(e){if(t.steps.index(this)==t.curStepIdx)return!1;var n=t.steps.index(this);return 1==t.steps.eq(n).attr("isDone")-0&&i(t,n),!1}),t.options.keyNavigation&&$(document).keyup(function(e){39==e.which?t.goForward():37==e.which&&t.goBackward()}),n(t),i(t,t.curStepIdx)}(this)}!function(t){t.fn.smartWizard=function(e){var n=arguments,s=void 0,i=this.each(function(){var i=t(this).data("smartWizard");if("object"!=typeof e&&e&&i){if("function"==typeof SmartWizard.prototype[e])return s=SmartWizard.prototype[e].apply(i,Array.prototype.slice.call(n,1));t.error("Method "+e+" does not exist on jQuery.smartWizard")}else{var r=t.extend({},t.fn.smartWizard.defaults,e||{});i||(i=new SmartWizard(t(this),r),t(this).data("smartWizard",i))}});return void 0===s?i:s},t.fn.smartWizard.defaults={selected:0,keyNavigation:!0,enableAllSteps:!1,transitionEffect:"fade",contentURL:null,contentCache:!0,cycleSteps:!1,enableFinishButton:!1,hideButtonsOnDisabled:!1,errorSteps:[],labelNext:"Next",labelPrevious:"Previous",labelFinish:"Finish",noForwardJumping:!1,onLeaveStep:null,onShowStep:null,onFinish:null}}(jQuery);var frmWizHwnd=null,FormWizard=function(){"use strict";var t,e,n,s={},i="1",r=!1,a=function(r,a){a.toStep==e&&n.find(".anchor").children("li:nth-child("+a.toStep+")").children("a").removeClass("wait"),n.find(".next-step").unbind("click").click(function(e){e.preventDefault(),i="1",t.smartWizard("goForward")}),n.find(".back-step").unbind("click").click(function(e){e.preventDefault(),i="1",t.smartWizard("goBackward")}),n.find(".go-first").unbind("click").click(function(e){e.preventDefault(),i="1",t.smartWizard("goToStep",1)}),n.find(".finish-step").unbind("click").click(function(t){t.preventDefault(),i="1",d(r,a)}),$.isFunction(s.onShowStep)&&(s.onShowStep.call(this,r,a,i),i="0")},o=function(t,e){return l(e.fromStep,e.toStep)},d=function(t,e){p()&&(alert("form submit function"),n.find(".anchor").children("li").last().children("a").removeClass("wait").removeClass("selected").addClass("done").children(".stepNumber").addClass("animated tada"))},l=function(t,s){if(r)return!1;if(e>=s&&s>t){for(var i=t;i<=s;i++)n.find(".anchor").children("li:nth-child("+i+")").not("li:nth-child("+s+")").children("a").removeClass("wait").addClass("done").children(".stepNumber").addClass("animated tada");return!0,!0}if(s<t){for(i=s;i<=t;i++)n.find(".anchor").children("li:nth-child("+i+")").children("a").addClass("wait").children(".stepNumber").removeClass("animated tada");return!0}},p=function(){return!0};return{init:function(d,l){s=d||{},n=l,i="1",r=!1,t=l.find("#wizard"),l.find("#form"),e=l.find(".swMain > ul > li").length,t.smartWizard({selected:s.iniStep||0,keyNavigation:!1,onLeaveStep:o,onShowStep:a})},locked:function(t){r=t}}}();