!function(e){"use strict";FormWizard.s3calc=function(e){String.prototype.repeat||(String.prototype.repeat=function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var n=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,n-t.length)});const t={noshift:function(){var e=null,t=null;function n(n){var i,a,o,s,l,r,c,d,p,u,f,g=function(e,t){e.step3_utils.gridtitle&&e.step3_utils.gridtitle.find(".toolbar-label").html(t)},m=[],h=n.Args.LAN,v=!1,_=!1,x=null,y={forceIfrm:!1,pagi_ep:5,pagi_pnu:9,ruleLogN:[[1,5,"before"],[1,5,"after"],0],aa:[0,100],m:0,z:0,gazi:[100,200,200]};this.viewBack=function(e,t,n,i){a[0].scrollTop=0,o.append('<span data-ty="input" data-ty-prompt="⚠"> 1. Quy uoc gom log the gan nhau thanh 1</span><span data-ty="input" data-ty-prompt="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;>"> Cac Log gat the cach nhau nho hon hoac bang 0 ->1 minutes</span><span data-ty="input" data-ty-prompt="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;>"> Log duoc chon de tinh cong Log-1 -> Log-2/span>'),e.cmdS3_scroPerf&&e.cmdS3_scroPerf.update(),a[0].scrollTop=a[0].scrollHeight,g(e,"<i class='ti-alert'/> Ket qua cu hon Log gat the o #step-2"),i&&a.next().addClass("d-flex"),_=!0,n()},this.exec=function(w,T,b){i||(i=T.find(".phantramcouting"),a=T.find(".kiem-the .xwindow").empty(),o=$('<div class="termynal"/>').appendTo(a),l=T.find(".kiem-the .calc_cores"),r=T.find(".kiem-the .step3_rst"),c=l.next(),d=c.find(".StepTitle-calc"),p=d.prev(),m[0]=a.parent().find("#s3manual_runstep").on("click",(function(e){clearTimeout(m[2]);var t=$(this),n=t.text();t.text("manual next step ..."),setTimeout((function(){m[1](),t.text(n)}),100)})));var C,D,k=[],L=[],E=[],S={},O=!1,A=0,F=0,B=0,j=0,N=0,M=function(){l.parent().addClass("in-calc"),(s=a.prev().find(".pagi-log").css("display","none").off("click")).find(".prev").closest("li").nextAll(":lt(-2)").remove(),s.p=[],o.empty(),a.addClass("hide-overflow-y"),k=[],L=[],O=!1,A=0,F=0,B=0,j=0,N=0,_=!1,E=[],(D=$.extend(!0,{},w.allLOGs))[0][0].length>0&&(E=E.concat([new Date(D[0][1]).setHours(0,0,0),new Date(D[0][2]).setHours(0,0,0)]))};M();var P,I,H,R,W,z=this,q=function(e){return{CALC_H:{a:h.js_004_19[0],b:h.js_004_19[7]},initCALc:{a:["Initializing ..."],b:[".".repeat(30)]},initCORE:{a:["Build calculator"],b:["Last state verifing ..."]},iniS3DAT:{a:[],b:[]},initCO:{a:[],b:[]}}[e][v||!w.akq?"a":"b"]},U=function(e,t){switch(e){case"se":var i=n.Args.stepcodeback("alog");return i.key?(t(i),de):(t(i,de),n.Args.stepcodeback("___"));case"save-calc-setting":t()}},G=function(){if(w.hasOwnProperty("realtime_fn"))return b(),void(w.realtime_fn._$_(["rst",k])&&l.empty());var t=I.WriteLn({value:"Showing data please wait ...",delay:0}),n=$.Deferred(),o=$.Deferred(),s=$.Deferred(),u=(new Date).getTime()-C,f=function(){$(t).remove(),u=u>0?u>3e4?Math.floor(u/3e4)+"s":u+" ms":"";var e=[{type:"input",prompt:">",value:"total logs: ",typeDelay:20,delay:0,__cb:function(e){e.innerHTML+='<i class="d0nmsg">'+j+"</i>"}},{type:"input",prompt:">",value:"total employees: ",typeDelay:20,__cb:function(e){e.innerHTML+='<i class="d0nmsg">'+F+"</i>"}},{type:"input",prompt:">",value:"total time: ",typeDelay:20,__cb:function(e){e.innerHTML+='<i class="d0nmsg">'+u+"</i>"}}];j>0&&e.push({type:"input",prompt:"✅",value:"~.".repeat(5)+" From: "+new Date(D[0][3]).toLocaleDateString(K)+" To: "+new Date(D[0][4]).toLocaleDateString(K)+".~".repeat(5),typeDelay:10}),I.WriteLns(e,(function(e){ie(1),s.resolve()}))},g=function(){(P=helloguy.clone()).css({display:"",position:"absolute","min-height":"200px"}).removeAttr("id").find(".bgwaitcolor").remove(),d.parent().append(P),$.when(n,o).then((function(e,t){d.parent().next().fadeIn(),p.find("h2").text(h.js_004_19[2]),p.find("p").text(h.js_004_19[3]).css("display",""),i.next().css("display","none"),P.detach(),ae(),V(1),setTimeout((function(){r.removeClass("height-transition").css({"max-height":"none"})}),1500)})),e=function(t){e=null,f(),$.when(s).then((function(e,t){l.fadeOut((function(){l.empty();var e=function(e){b(),i.parent().css("display","none"),a.next().css("display",""),n.resolve("g")};O&&c.insertAfter(l),r.slideDownTransition("height-transition"),setTimeout(e,200)}))}))},ee(o),srclocked(!1)};d.css("display","none"),p.find("p").css("display","none"),p.find("h2").text(h.js_004_19[6]),r.css("display",""),admin$.DEV(g),i.next().css("display","none"),n.promise(),o.promise(),s.promise()},V=function(e){i$Desk&&(w.cmdS3_scroPerf?0==e&&(w.cmdS3_scroPerf.destroy(),delete w.cmdS3_scroPerf):1==e&&(w.cmdS3_scroPerf=new PerfectScrollbar(a[0],{suppressScrollX:!0})))},J={hwnd:null,sts:0,_:null,evt:function(e,t){J.hwnd&&"function"==typeof J.hwnd&&J.hwnd.bind(this,e,t)()}},K=apisvr.a$.selected_language,Y=function(){var e=w.step3_utils,t=JSON.stringify(w.step3_utils.RULE1),n=$.Deferred();return w.hasOwnProperty("realtime_fn")?(n.resolve(),n):(X(),w.step3_utils.editPO&&r.trigger("listen_2_me",["reset_diag"]),l.trigger("re-calc"),e.calcRule=JSON.parse(t),t!=JSON.stringify(y.ruleLogN)?(w.saveBadge.exDAT&&$.map(w.saveBadge.exDAT,(function(e,t){w.saveBadge.exDAT[t]=[]})),y.ruleLogN=JSON.parse(t),n.resolve()):n.resolve(),n)},X=function(e){var t=w.saveBadge;t&&0!=t.length&&(t[2].rI("cellValue"),t[0].text(""),t.sBTN.option("visible",!1))},Q={RECALC_1ROW:function(e,t,n,i,a,o,s,l){var r=x.contentWindow,c=[,"*"];n.acno;r.jobTXT("calc1"),apisvr.a$.sessions[f].fn=function(e,t){"job"==e&&(0==t.evtData.messageType||1==t.evtData.messageType&&a&&t.evtData.data.length>0&&a(t.evtData.data[0]))},c[0]={messageType:"iniCALC",calcR:y.ruleLogN},r.postMessage.apply(r,c),c[0]={messageType:0,a:n,delay:0,loc:0,runI:0,pag:0},r.postMessage.apply(r,c)}},Z=[2],ee=function(s){if(w.step3_rst_grid){g(w,"<h4>BANG CONG</h4>");var l=w.step3_rst_grid;l.cancelEditData(),l.option({dataSource:k,paging:{pageIndex:0}}),l.clearSorting(),l.clearSelection(),l.clearFilter();var c=w.step3_rst_grid_cmd.searchEMP;c[0].val(null),c[0].closest(".dx-textbox").dxTextBox("instance").option("value",null),c[1](""),s.resolve("r")}else{var d=r.find(".step3_rst_grid").on("click",".col-io-filter",(function(e){x(e)})),p=function(e){var t=w.step3_rst_grid.divFILTER;if(t)t.A(e);else{var n=$.Deferred();$.Deferred();$.when(n,f()).done((function(t,n){var i=this[0],a=t[0],o=t[1],s=t[2];$(o).html(adCS(a,i[0])).ready((function(t,n){var a=[{caption:"Ma AC",dataField:"acno",dataType:"number"},,{caption:"Ten NV",dataField:"ten"},{caption:"Phong ban",dataField:"sec"},{caption:"A4",dataField:"Category",filterOperations:["=","anyof"],lookup:{dataSource:["Video Players","Televisions","Monitors","Projectors","Automation"]}}];w.step3_rst_grid.divFILTER=s.c.O([o,S,a,i,".calc_setting"]).A(e),srclocked(!1)}))})),m(e,n)}},f=function(){var e=$.Deferred();return"noU"==w.hasUA?e.resolve("yay"):n.Args.stepcodeback("alog").cusf&&!S.cus?de({evt:"cusfilter_get"},(function(t){if(t&&t.rst){var n=decodeURIComponent(escape(atob(t.rst)));S.cus=JSON.parse(n)}else S.cus={};e.resolve("yay")})):e.resolve("yay"),e.promise()},m=function(e,t){srclocked(!0),r.trigger("get",[srcp$f+"/media/utils/filter.html"+src$id,function(e){var n=[this],i=function(e){var t="calc(100% - "+(e+36)+"px)";w.step3_rst_grid.option("height",t)},a=function(e){w.step3_rst_grid.option("filterValue",e),o.find(".pfs_scroll").attr("trigger",(new Date).getTime())},o=$("<div class='log_filter' style='position:relative'/>");o.insertBefore(d).on("mystate",(function(e,t,n,o){"-1"==t?(w.step3_rst_grid.divFILTER=null,$(e.currentTarget).remove(),a(""),$("body").hasClass("part_fullscreen")&&i(0)):"df"==t?a(n):"rdf"==t?a(""):"reHeight"==t&&i(n)})).trigger("",[e,!0,$.Deferred().done((function(){t.resolve.apply(n,[].slice.call(arguments))}))])}])},v=[{id:1,text:"2 Logs"},{id:2,text:"4 Logs"},{id:3,text:"6 Logs"},{id:4,text:"8 Logs"}],x=function(e){for(e.stopPropagation(),e.preventDefault();DevExpress.hideTopOverlay(););var t=e.target.getAttribute("idx");console.log(t),p(["showFilter",[t]])},C=function(e){var t=this,n=$("<div class='dx-icon-filter col-io-filter' "+t[3]+" idx='"+t[0]+"'>"+t[2]+"</div>"),i="<div style='height:15px;overflow: hidden;text-overflow: ellipsis;'>"+t[1]+"</div>",a=e.parent().prepend(n);n.on("click",x),"style='float:none'"==t[3]?a.addClass("important-veraligntop").append(i):a.find(".dx-datagrid-text-content").append(i).css({display:"flex","justify-content":"center"})},L=function(){var e={headerCellTemplate:C.bind(["colNgay","Ngay","","style='float:right'"]),dataField:"ngay",width:100},n=[,{headerCellTemplate:C.bind(["colThu","Weekday","","style='float:none'"]),dataField:"thu",width:50,cssClass:"centerTD",allowSearch:!1,hidingPriority:1},{headerCellTemplate:C.bind(["colTongTG","Tong TG","(Gio)","style='float:none'"]),dataField:"TongTG",width:70,allowSearch:!1}];return[{caption:"Order ID",allowSearch:!1,cssClass:"wrap-text",width:50,cellTemplate:function(e,t){var n=w.step3_rst_grid.pageIndex();n<0&&(n=0),e.text(n*w.step3_rst_grid.pageSize()+t.row.rowIndex+1)},hidingPriority:0},{headerCellTemplate:function(e){var n,i,a,o=$("<div/>"),s=function(e){clearTimeout(a),w.step3_rst_grid.option("searchPanel.text")!=e&&(l=!0,srclocked(!0),n.addClass("chay"),t=function(){t=null,srclocked(!1),n.removeClass("chay"),w.step3_rst_grid_cmd.searchEMP[1](e),l=!1},w.step3_rst_grid.searchByText(e))},l=!1;e.parent().addClass("searchbox-col-emp tranhtaora noborder-bottom"),e.append(o),o=o.dxTextBox({width:"100%",mode:"search",placeholder:"tim nhan vien",showClearButton:!0,onContentReady:function(e){n=$('<span class="signal-search" style="">se ...</span>').insertBefore(e.component.element().find(".dx-icon-clear").click((function(){s("")})).parent()).parent(),i=e.component.element().find(".dx-texteditor-input"),w.step3_rst_grid_cmd.searchEMP=[i,function(e){w.step3_rst_grid_cmd.searchEMP[0].prev()[(""==e?"remove":"add")+"Class"]("dangsearch")}]},onValueChanged:function(e){},onKeyDown:function(e){32==e.event.keyCode&&e.event.stopPropagation()},onFocusIn:function(e){for(;DevExpress.hideTopOverlay(););M0Evt({causeby:"hieufilterclick"},1,1)},onKeyUp:function(e){l||(clearTimeout(a),a=setTimeout((function(){s(i.val())}),300))}}).dxTextBox("instance")},columns:function(){var t=[{headerCellTemplate:C.bind(["colAcNo","Ma AC","","style='float:right'"]),dataField:"acno",width:75}],i={headerCellTemplate:C.bind(["colEmpName","Ten Nhan Vien","","style='float:right'"]),dataField:"ten",width:150},a=[];return"noU"==w.hasUA?(n.splice(0,1),i.hidingPriority=2,a.push(i),a.push(e)):(a.push({headerCellTemplate:C.bind(["colEmpCode","MaNV","","style='float:right'"]),dataField:"EmpCode",width:75}),a.push(i),n[0]=e),t.concat(a)}()}].concat(n)},E=function(){return"noU"==w.hasUA?[{headerCellTemplate:function(e){}}]:[{dataField:"sec",caption:"Phong ban",allowSearch:!1,hidingPriority:1}]},O=function(){for(var e=[],t=1;t<=Z[0];t++)e.push(N(t,e.length));return e.concat(E())},A=function(e){var t=e.value&&e.value.getFullYear().toString()||"",n="centerTD";return 5==t.length&&(n+="1"==t.substr(4,1)?" modi":" dele"),this.cssClass=n,e.valueText},B=function(e,t){var n=w.step3_utils.editPO,i=[n.atTD[4].acno,n.atTD[4].ngay.getTime()].join("|"),a=this.name,o=Number(a.replace("fio","")),s=w.commonFn.lgIdx_2_IOidx(o);if(e[a]=t,e["t_"+s]=(new Date).getTime().toString().substr(-5),w.saveBadge[i]){var l=w.saveBadge[i],c=l[0],d=l[1],p=d.length-1;"HIE"===d[p]&&c[p]===d[p]&&(c.splice(p,1),d.splice(p,1)),e.cusL=JSON.stringify(l)}delete w.saveBadge[i],n&&n.atTD&&(H=function(e){H=null;var t=w.step3_rst_grid._controllers.keyboardNavigation._dataController,i=n.atTD[4].id;t.getDataByKeys([i]).done((function(e){e&&e.length>0&&(n.atTD[4]=e[0])})),2!==n.preventSHOW&&(n.preventSHOW=1,n.option("target",e.component.getCellElement(n.atTD[0],n.atTD[1])),setTimeout((function(){n.preventSHOW=0}),100))}),setTimeout((function(){r.trigger("setFIO",[a,s,t])}),100)},N=function(e,t){return{caption:"In - Out",headerCellTemplate:function(t){t.html("In - Out "+e).parent().append($('<i class="dx-icon-filter col-io-filter" idx=io'+e+"></i>"))},columns:[{caption:"In",dataField:"fio"+(e+t),width:60,dataType:"date",format:"HH:mm",encodeHtml:!1,allowSearch:!1,editorOptions:{disabled:!0},customizeText:A,setCellValue:B},{caption:"Out",dataField:"fio"+(e+t+1),width:60,dataType:"date",format:"HH:mm",encodeHtml:!1,allowSearch:!1,editorOptions:{disabled:!0},customizeText:A,setCellValue:B},{hidingPriority:Z[0]-e+4,caption:"Total",allowSearch:!1,dataField:"t_"+e,width:60}]}},M=function(e){var t=w.step3_rst_grid,n=(t.state(),t.option("columns"));if(Z[0]<e)for(var i=Z[0],a=n.length-1,o=Z[0]+1;o<=e;o++)n.splice(a,0,N(o,i)),i++,a++;else for(o=n.length-2;o>0;o--){if(!(parseInt(n[o].columns[2].dataField.split("t_")[1])>e))break;n.splice(o,1)}t.option({columns:n}),Z[0]=e,w.step3_utils.editPO&&r.trigger("listen_2_me",["changeInOutLogCols",JSON.stringify([y.ruleLogN,Z[0]])]),srclocked(!1)},P=$("<div/>").on("mouseenter",".dx-button.help",(function(e){w.step3_cmd_help.fn($(e.currentTarget))})),I=null;r.on("giaotiepevt",(function(e,t,n,i,a,o,s,l){"x"==t?(I.remove(),I=null):"resetS3BADGE"==t?X():Q[t](e,t,n,i,a,o,s,l)})),w.step3_rst_grid_cmd=P.insertBefore(d).dxToolbar({items:[{location:"before",widget:"dxButton",options:{icon:"filter",elementAttr:{halp:"savE",class:"help"}},onClick:function(e){w.step3_cmd_help&&w.step3_cmd_help.hide(),p(["lstFilter",["show"]])}},{location:"before",widget:"dxButton",options:{icon:"percent",elementAttr:{halp:"savE",class:"help"},onClick:function(e){srclocked(!0);var t=$('<div class="thongke height-transition height-transition-hidden"><div class="tb-phantram"/></div>').insertBefore(d),n=function(){var e=P.find(".clickme").dxButton("instance");return[e._state?e._state:0,new Date("2021-09-01"),new Date("2021-09-30")]};w0w.handshakeEL={el:t,fn:n},_gsC(srcpf$+"/media/vendor/GoJS/release/gojstrial.js","js",(function(){$.get(srcp$f+"/media/utils/gojstimeline.html"+src$id,(function(e){t.find(".tb-phantram").append(e.replace("gx$","var g$"))}))}),"gojs.js"),I=t}}},{location:"before",locateInMenu:"auto",widget:"dxButton",options:{text:"Export Excel",elementAttr:{halp:"expE",class:"help"},onClick:function(){Y()}}},{location:"before",template:function(e){var t=$('<div style="position:relative"/>'),n=w.saveBadge;return n[0]=$('<span class="hieu-badge partition-red animated infinite pulse" style="left: 50%;top:-10px;font-size: smaller"></span>'),n[2]=new HTB({}),n.sBTN=$("<div/>").appendTo(t).dxButton({visible:!w.akq,icon:"ti ti-save",elementAttr:{halp:"savE",class:"help"},onClick:function(){for(;DevExpress.hideTopOverlay(););DevExpress.ui.dialog.custom({showTitle:!1,messageHtml:h.js_004_18[1],popupOptions:{width:function(){}},buttons:[{text:"cancelEditData",visible:!0,onClick:function(e){return-2}},{text:"saveEditData",onClick:function(e){return 1}},{text:h.js_003_1,onClick:function(e){return 0}}]}).show().done((function(e){0==e||(-2==e?(w.step3_rst_grid.cancelEditData(),X()):1==e&&(srclocked(!0),w.step3_utils.gridtitle.html("<i class='ti-alert'/>"+(new Date).getTime()),w.step3_rst_grid.saveEditData(),w.step3_utils.calcRule=$.extend([],!0,y.ruleLogN),a.prev().find(".calc_setting").trigger("click",{a:"_uv",d:[k,D[0][3],D[0][4],F,j,[_,Z[0]]]})))}))}}).dxButton("instance"),t.append(n[0])}},{location:"center",locateInMenu:"never",template:function(e){return w.step3_utils.gridtitle=$("<div><div class='toolbar-label'><h4 style='margin-bottom: 0px;'>BANG CONG</h4></div></div>"),w.step3_utils.gridtitle}},{location:"after",widget:"dxDropDownButton",locateInMenu:"auto",options:{stylingMode:"text",displayExpr:"text",keyExpr:"cls",useSelectMode:!0,items:[{cls:10,text:"10px"},{cls:11,text:"11px"},{cls:12,text:"12px"},{cls:13,text:"13px"},{cls:14,text:"14px"}],selectedItemKey:13,onSelectionChanged:function(e){setTimeout((function(){w.step3_rst_grid._$element.find(".dx-datagrid-content").removeClass("f10 f11 f12 f13 f14").addClass("f"+e.item.cls),w.step3_rst_grid.repaint()}),20)},itemTemplate:function(e){return $("<div>").text(e.text).css("font-size",e.size+"px")}}},{location:"after",widget:"dxButton",options:{elementAttr:{class:"clickme"},icon:"d0nmsg ti-fullscreen",onClick:function(e){var t,n,i,a=e.component;if(1==a._state){a._state=0,t="d0nmsg ti-fullscreen",n=R,i="remove";var o=r.parent(),s=r.attr("style");$("body")[i+"Class"]("part_fullscreen"),T.find(".kiem-the #s3_one")[i+"Class"]("hidden-el"),r.addClass("exit-fulscr").removeClass("full-el").animate({top:o.offset().top,left:o.offset().left,width:o.width(),height:n},"50",(function(){r.attr("style",s).removeClass("exit-fulscr"),w.step3_rst_grid.option("height",n)}))}else{a._state=1,t="fa fa-window-close color-red";var l=d[0].getBoundingClientRect(),c=r[0].getBoundingClientRect(),p=(l.y||l.top)-(c.y||c.top);p>276&&(p=276),n="calc(100% - "+p+"px)",r[(i="add")+"Class"]("full-el"),T.find(".kiem-the #s3_one")[i+"Class"]("hidden-el"),$("body")[i+"Class"]("part_fullscreen"),w.step3_rst_grid.option("height",n)}for(e.component.option("icon",t),toastMsg("Add button has been clicked!","info"),r.trigger("listen_2_me",["part_fullscreen",i]),I&&setTimeout((function(){I.trigger("hwnd",{jo:"wc"})}),200);DevExpress.hideTopOverlay(););}}},{location:"after",widget:"dxSelectBox",locateInMenu:"auto",options:{width:140,items:v,valueExpr:"id",displayExpr:"text",value:Z[0],onFocusIn:function(e){for(;DevExpress.hideTopOverlay(););},onFocusOut:function(e){e.component.close()},onValueChanged:function(e){srclocked(!0),setTimeout((function(){M(e.value)}),10)}}},{locateInMenu:"always",widget:"dxButton",options:{text:"Save",onClick:function(){var e=w.step3_rst_grid,t=e.option("editing").changes,i=e.getController("editing")._internalState,a=[],o=6e4;t.forEach((function(e,t){var n=[],s=i.filter((function(t,n){return t.key==e.key}));if(s){var l=s[0].oldData;$.map(e.data,(function(e,t){t.indexOf("fio")>-1&&n.push((e-l.ngay)/o)})),a.push(l.acno+","+DevExpress.localization.date.format(l.ngay,"yyyy-MM-dd HH:mm")+","+n.join(","))}})),e.cancelEditData(),DevExpress.ui.notify("Save option has been clicked!");n.shareMe("dogIFRM");e.option("pager.displayMode","compact")}}},{locateInMenu:"always",widget:"dxButton",options:{text:"Print",onClick:function(){var e=w.step3_rst_grid;e.option("pager.displayMode","compact");var t=e._controllers.tablePosition._pagerView._$element,n=$('<div class="text-center align-self-center" style="flex-grow: 1;">Du lieu da co cap nhat ...<div class="btn btn-outline-secondary btn-sm xoa-sualog"><i class="ti-reload"></i></div></div>');t=t.addClass("cochinhsua").find(".dx-pages"),n.insertBefore(t),n.find(".xoa-sualog").off("click").on("click",(function(t){devDlg(1,"vui long xac nhan truoc khi reset du lieu chinh sua?").show().done((function(t){1==t&&(e.option("pager.displayMode","adaptive"),n.parent().removeClass("cochinhsua"),n.remove())}))})),DevExpress.ui.notify("Print option has been clicked!")}}},{locateInMenu:"always",widget:"dxButton",options:{text:"Settings",onClick:function(){a.prev().find(".calc_setting").trigger("click",[1])}}}],onContentReady:function(e){}}).dxToolbar("instance");var H,R=350,W=function(e,n,i,a,o){setTimeout(toastMsg("Changing to page "+(n+1)+"...","info",500),1),t=function(e){t=null;var n=function(){var t=e.component,n=t.getCellElement(0,a);n&&t.focus(n)};o&&o(n)}},z=function(e,t,n){var i=e.component,a=i.pageCount(),o=i.pageIndex();if(a>0&&(33==t&&o>0||34==t&&o<a-1)){if(void 0===n.allowPAGE_UD||0===n.allowPAGE_UD){n.allowPAGE_UD=1;var s=function(t){setTimeout((function(){n.allowPAGE_UD=0}),200),t(),e.event.UD_From_EDT_CB&&e.event.UD_From_EDT_CB()};return W(i,o,0,n.atTD[3],s),i._controllers.focus._resetFocusedRow(),!1}e.event.preventDefault()}return!0},q=function(e){console.log("onFocusedCellChanging: "+(new Date).getTime());var t,n=Z[2][0],s=Z[2][1],l=e.newColumnIndex,c=e.prevColumnIndex,d=e.newRowIndex,p=e.prevRowIndex,f=e.component,g=e.event?e.event.type:"NULL",m=function(t,n){var i=f.pageCount(),a=f.pageIndex(),o=function(){v(!1),W(f,a,0,t,(function(t){e.event.isTrigger&&9==e.event.code?setTimeout(t,10):t()})),f.option("paging.pageIndex",a)};i<=1||-1==n&&0==a||1==n&&a==i-1?v(!0):(a+=n,o())},h=function(e,n,i){e>-1&&(t=f.getCellElement(e,n))?setTimeout((function(){f.focus(t)}),1):i?m(n,i):v(!0)},v=function(e){var t=w.step3_utils.editPO;t._currentVisible&&(e?void 0!==t._isflash&&1===t._isflash||(x(t),t._$wrapper.removeClass("keepshown").addClass("flashpanel"),setTimeout((function(){t._$wrapper.removeClass("flashpanel").addClass("keepshown")}),50)):(t._$wrapper.removeClass("keepshown"),t.hide()))},_=null,x=function(e){clearTimeout(_),e._isflash=1,_=setTimeout((function(){e._isflash=0}),500)},C=function(){if(l<n||l>s){if(e.cancel=!0,"dxpointerdown"==g&&-1!=c&&null!=c&&Z[1][c]&&-1==Z[1][c].indexOf("t_"))return void h(d,c);p==d?l<c?d>0?h(d-1,s-1):m(s-1,-1):l>c&&h(d+1,n):h(d,n)}else if(Z[1][l]&&0==Z[1][l].indexOf("t_")){if(-1==c||null==c||-1==p||null==p||"dxpointerdown"==g){var t=w.step3_utils.editPO;return void(t._currentVisible&&("dxpointerdown"==g&&(w.step3_utils.edit_time.forceCellFocus=[d,l]),t._$wrapper.removeClass("keepshown"),t.hide()))}if(p!=d)return void v(!1);e.cancel=!0,l<c?l<n?d>0?h(d-1,s-1):v(!0):h(d,l-1):l>c&&(l==s?h(d+1,n,1):h(d,l+1))}else{var i=e.columns[l].dataField,a=e.rows[d].data[i],o=w.step3_utils.editPO;if(o.atTD&&"dxpointerdown"==g&&(o.atTD[0]!=d||o.atTD[3]!=l)){var u=o.atTD[0],f=o.atTD[1],_=o.atTD[3],y=(b=o.atTD[4])&&$.extend(!0,{},b);w.step3_utils.edit_time.hwChanged=function(e){w.step3_utils.edit_time.hwChanged=null,setTimeout((function(){r.trigger("mouse_FocusedCellChanging",{cell:[f,u,,_],dat:y,vals:[e.value]})}),5)}}if(o.atTD=[d,i,a,l,e.rows[d].data],o._EVTTYPE=[g,d-p,d,p],l==c&&d==p&&o._currentVisible&&1!==o._isflash){var T=e.event&&e.event.originalEvent&&e.event.originalEvent.keyCode||0;0==d&&38==T?h(d-1,l,-1):40==T?h(d+1,l,1):(o._$wrapper.removeClass("keepshown"),x(o))}setTimeout((function(){o.show(e.cellElement),setTimeout((function(){o._$wrapper.addClass("keepshown"),o._EVTTYPE=["NULL",0]}))}),0)}var b};w.step3_utils.editPO?C():(srclocked(!0),_gsC(srcp$f+"/media/utils/jsc/s3logedit.js"+src$id,"js",(function(e){new s3logedit(w,[T,i,a,o,function(e,t){switch(e){case"saveDB":return storeDAT;case"exPopUp":return u.exPopUp(t)}}],b,apisvr.a$.selected_language).editoR([y.ruleLogN,Z[0]],r),C(),srclocked(!1)}),"s3logedit"))};w.step3_rst_grid=d.dxDataGrid({keyExpr:"id",dataSource:k,columnAutoWidth:!1,allowColumnReordering:!1,showBorders:!0,focusedRowEnabled:!0,noDataText:"Khong co log cham cong ",pager:{visible:!0,allowedPageSizes:[50,100,300,500,"all"],showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0},paging:{pageSize:40,pageIndex:0},keyboardNavigation:{enterKeyAction:"none",enterKeyDirection:"column",editOnKeyPress:!1},editing:{mode:"batch",allowUpdating:!1,startEditAction:"dblClick"},onFocusedCellChanging:function(e){e.isHighlighted=!0,w.step3_utils.ignoreFocusedCellChanging&&"function"==typeof w.step3_utils.ignoreFocusedCellChanging?w.step3_utils.ignoreFocusedCellChanging(e):q(e)},onKeyDown:function(e){var t=w.step3_utils.editPO,n=e.event.keyCode,i=n>=48&&n<=57,a=n>=96&&n<=105,o=[13,27].indexOf(n)>-1,s=[33,34].indexOf(n)>-1;if((i||a||o||s)&&t){if(e.event.stopPropagation(),s){if(!0!==z(e,n,t))return}else if(27==e.event.keyCode)t._currentVisible&&t._$popupContent.find(".btnOK.closeact").trigger("click");else{var l=t.atTD;e.component.getCellElement(l[0],l[3]).removeClass("dx-focused"),t._currentVisible||t.show();var r=w.step3_utils.edit_time;r._selectFirstPart(),l[2]?(r.focus(),setTimeout((function(){r._keyboardHandler(e.event)}),10)):(r._keyboardHandler(e.event),setTimeout((function(){r.focus()}),10))}e.handled=!0}},height:R,columns:[].concat(L(),O()),onContentReady:function(n){if(H&&"function"==typeof H&&H(n),t&&"function"==typeof t)t(n);else{for(var i=n.component._controllers.columns._columns,a={},o=0,s=1e6,l=0,r=0;r<i.length-1;r++)i[r].isBand||(i[r].dataField&&(0!=i[r].dataField.indexOf("fio")&&0!=i[r].dataField.indexOf("t_")||(a[l]=i[r].dataField,l>o&&(o=l),l<s&&(s=l))),l+=1);Z[1]=a,Z[2]=[s,o],e&&"function"==typeof e&&e(n)}},onOptionChanged:function(e){if(["paging"].indexOf(e.name)>-1)for(;DevExpress.hideTopOverlay(););},onExporting:function(e){var t=new ExcelJS.Workbook,n=t.addWorksheet("Employees");DevExpress.excelExporter.exportDataGrid({component:e.component,worksheet:n,autoFilterEnabled:!0,customizeCell:function(e){if("data"==e.gridCell.rowType&&e.gridCell.column.dataField&&0==e.gridCell.column.dataField.indexOf("fio")){var t=e.excelCell;t.value=e.gridCell.value,t.alignment={horizontal:"center"},t.font={name:"Arial Black",color:{argb:"FF00FF00"},family:2,size:14,italic:!0},t.note={texts:[{font:{size:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"},text:"This is "},{font:{italic:!0,size:12,color:{theme:1},name:"Calibri",scheme:"minor"},text:"a"},{font:{size:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"},text:" "},{font:{size:12,color:{argb:"FFFF6600"},name:"Calibri",scheme:"minor"},text:"colorful"},{font:{size:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"},text:" text "},{font:{size:12,color:{argb:"FFCCFFCC"},name:"Calibri",scheme:"minor"},text:"with"},{font:{size:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"},text:" in-cell "},{font:{bold:!0,size:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"},text:"format"}],margins:{insetmode:"custom",inset:[.25,.25,.35,.35]},protection:{locked:!0,lockText:!1},editAs:"twoCells"}}}}).then((function(){t.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e],{type:"application/octet-stream"}),"Employees.xlsx")}))})),e.cancel=!0}}).dxDataGrid("instance");var G,V=T.find(".logs-effect"),J=V.closest(".media"),K=function(e,t){J.trigger("",[e,t,(new $.Deferred).done((function(e,t,n,l){G=$('<div class="sellog-before"/>').html(e),J.prepend(G).ready((function(e){l=n.me,(u=new(u=l("afo"))(w,[T,i,a,o],b,apisvr.a$.selected_language)).RU&&u.RU.call([JSON.stringify(y.ruleLogN)],G,V,r);var t=a.prev().find(".xbuttons").css("width","25px");t.hasClass("l-o-a-d")||(l("afa").bind([U,T],[w,r,t])(),l("bz")(),S.def=l("afi")(1)),s.resolve("r")}))}))])};w0w.calc_rules=w0w.calc_rules||{},w0w.calc_rules.freeot_rule1?K(w0w.calc_rules.freeot_rule1,!1):$.get(srcp$f+"/media/utils/rule1.html"+src$id,(function(e){w0w.calc_rules.freeot_rule1=e,K(e,!0)}))}function Y(){11==GetIEVersion()?_gsC("https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.10.1/polyfill.min.js","js",(function(){_gsC("https://cdnjs.cloudflare.com/ajax/libs/exceljs/3.3.1/exceljs.min.js","js",(function(){_gsC("https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.2/FileSaver.min.js","js",(function(){w.step3_rst_grid.exportToExcel(!1)}),"FileSaver.min.js")}),"exceljs.min.js")}),"polyfill.min.js"):(_gsC("https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.2/FileSaver.min.js","js",(function(){}),"FileSaver.min.js"),_gsC("https://cdnjs.cloudflare.com/ajax/libs/exceljs/4.2.1/exceljs.min.js","js",(function(){w.step3_rst_grid.exportToExcel(!1)}),"exceljs.min.js"))}},te=function(e){H.stopWait._stop();var t=(new Date).getTime()-R;t=t>0?t>3e4?Math.floor(t/3e4)+"s":t+" ms":"",H.innerHTML+=(e||'<i class="d0nmsg">...Done!</i>  ')+t,R=(new Date).getTime()},ne=function(e,t){R=(new Date).getTime(),H=I.WriteLn(t||{type:"input",typeDelay:6e4,prompt:e,value:" ",stopWait:{}},(function(){H.innerHTML+='<i class="c0ncel">...Opp timout error!</i>',J.el&&J.el.trigger("click","timeout")}))},ie=function(e){if(ie.ep>0){var t=B,n=ie.ep,i=function(e){s.find("li a").removeClass("active"),s.find("li:nth-last-child(2)").before('<li><a class="active">'+e+"</a></li>")};if(1===e)return void function(){i(s.p.length+1);var e=$("<div pag="+(s.p.length+1)+"/>").append(o.find("span"));o.append(e),s.p.push([])}();if(t%n==0){var a=o.find("span:lt("+(ie.iE+2*n-2*ie.core)+")").remove();s.p.push(a),i(s.p.length),ie.iE=0}else ie.all}},ae=function(){ie.ep>0&&s.on("click","a",(function(e){if(!(e.target.className.indexOf("active")>-1)){s.find("li a").removeClass("active");var t=$(e.target).addClass("active").text();if(isNaN(t)){var n=0;for(i=0;i<s.p.length;i++)if(0==s.p[i].length){n=i;break}o.find("div[pag='"+(n+1)+"']");for(i=s.p.length-1;i>-1;i--)if(n!=i){l=$("<div pag="+(i+1)+"/>").append(s.p[i]);i<n?l.insertBefore(o.find("div[pag]:first")):i>n&&o.append(l),s.p[i]=[]}}else{t=parseInt(t)-1;for(var i=s.p.length-1;i>-1;i--)if(t!=i&&0==s.p[i].length){var a=o.find("div[pag='"+(i+1)+"']").remove();s.p[i]=a.children()}if(s.p[t].length>0){var l=$("<div pag="+(t+1)+"/>").append(s.p[t]);o.append(l),s.p[t]=[]}}w.cmdS3_scroPerf.update(),o.animate({scrollTop:o[0].scrollHeight},1)}}))},oe=function(e,t){var n=l.parent()[0].getBoundingClientRect(),a=~~((n.width-30)/e),o=20,s=3,r=y.gazi[0]+o+s,d=y.gazi[1]+o+s,p=function(t){if(a>d)return[d-o-s,t];if(a>r){for(var i=r;i<d;){if(i+(u=o+s)>~~((n.width-30)/e))return[i-u,t];i+=5}return[r-o-s,t]}var l=~~((n.width-30)/r),c=Math.ceil(e/l);if($(window).width()<600){var p=c*(n.width-30);r=~~(p/e),l=~~((n.width-30)/r)}var u=(o+s)*(l-1);return[~~((n.width-30)/l)-u,c]}(1),u=p[0]>r?r+(p[0]-r)/2:p[0],f=u;x.contentWindow.cGaug.size(u,f,t),p[1]>1&&(O=!0,i.parent().parent().append(c))},se=function(){W={},w.saveBadge.exDAT&&$.map(w.saveBadge.exDAT,(function(e,t){e.reduce((function(e,t){var n=t.split("~"),i=n[0].split("|"),a=Number(i[1]),o=JSON.parse(n[1]);return(e[Number(i[0])]||(e[Number(i[0])]={}))[a]=o,e}),W)}))},le=function(e){var t,n,a,o,s,r,c,d,p,u=function(e,t){u.fn(e.data)},g=this,m=[],h=g.Fdx,v=g.Tdx-g.Fdx+1,_=g.pag*Number("10000000".substring(0,g.al.toString().length+1)),T=30,b="·".repeat(T),C=0,L=function(e){return 1==C?(C=2,u.fn=function(e){},t.terminate(),e.innerHTML+='<i class="c0ncel">...Stop!</i>  '+g.pag,!1):2!=C},E=function(n){C=n,0==n&&t.terminate(),setTimeout(e([g.pag]),10)},S=function(){var e=D[0][0][h],o=function(){_wait(y.m).done((function(e){h++,O()}))};_+=e.aLogs.length,B++,F+=1;var s=parseInt(100*F/A);i.css("width",s.toString()+"%").html(s.toString()+"%"),i.next().css("width",(100-s).toString()+"%").html("&nbsp; &nbsp;"+F+" / "+A),I.WriteLn({prompt:"calc: "+g.pag+" ▲ acno",value:e.acno+" Min: "+w.logTi(e.minL)+" Max: "+w.logTi(e.maxL),delay:0},(function(){I.WriteLn({value:"couting ...",delay:0},(function(i){if(u.fn=function(e){if("1"==e.messageType)k=k.concat(e.data),o();else{var t=e.data.p;i.innerHTML=b.slice(0,Math.round(t*T/100))+" "+t+" "+e.pag}L(i)},0===C){ie();var s=h-g.Fdx+1;n.attr("transform",N.kimPOS(s)),a[0].attr("d",N.ringFromTo(0,s)[1]),a[1].html(Math.floor(100*s/v)+"%"),m[0]={messageType:0,a:e,delay:y.z,loc:K,runI:_,pag:g.pag,modL:W[e.acno]},t.postMessage.apply(t,m),j+=e.aLogs.length}else i.innerHTML+='<i class="c0ncel">...Stop!</i>  '+g.pag}))}))},O=function(){h<=g.Tdx?S():E(0)},N=(o=x.contentWindow,s={color:[{minvalue:0,maxvalue:0,code:"#00CED2"},{minvalue:0,maxvalue:v,code:"#F6F6F6"}]},r=o.cGaug.tmpl(s),n=$(r[0].replace(new RegExp('fill="#fuckcolor"',"g"),'fill="#'+("dark"==cS$.c0lor?"fff":"000")+'"')+"<div># "+pad$(g.pag+1,2)+"</div></div>"),l.append(n),a=[n.find(".ringpath-0"),n.find(".gauge_percent")],n=n.find(".clockhandnes"),r[1]);return void 0===g.calcKind?(t=x.contentWindow,m[1]="*",apisvr.a$.sessions[f].fn=function(e,t){u.fn(t.evtData)}):(c=new Blob([g.calcKind]),d=w0w.URL.createObjectURL(c),(p=new Worker(d)).onmessage=u,t=p),m[0]={messageType:"iniCALC",calcR:y.ruleLogN,shift:le.__Def_appdatJS},t.postMessage.apply(t,m),{r:O,s:E}},re=function(){ne("Tasks engine");var e=!w0w.Worker||y.forceIfrm,t=x.contentWindow.jobTXT(e),n=y.aa,a=D[0][0].length,l=e?a:0==n[0]?n[1]:~~(a/n[1]),r=a%l,c=(a-r)/l,d=[];if(a>0){se(),r>0&&c++,N=D[0][0].reduce((function(e,t){return e+t.aLogs.length}),0),oe(c,l>a?a:l);for(var p=0;p<c;p++){var u=l*p,f=u+l-1;f>a-1&&(f=a-1),d.push(le.bind({al:N,pag:p,Fdx:u,Tdx:f,calcKind:t},(function(e){d.splice(d.indexOf(e[0])),0==d.length&&G()}))())}ie.core=c,ie.ep=y.pagi_ep,ie.pnu=y.pagi_pnu,ie.all=a,a/ie.ep>ie.pnu?ie.ep=Math.ceil(a/ie.pnu):a<ie.ep&&(ie.ep=-1,s.prev().removeClass("float-left")),te(),s.css("display",ie.ep>0?(ie.iE=o.find("span").length,s.prev().addClass("float-left"),""):"none"),i.css({width:"0%"}).html(""),i.next().css({display:"",width:"100%"}).html("Calcualating process"),i.parent().css("display",""),J._=null,J.hwnd=function(e,t){for(var n=d.length-1;n>-1;n--)d[n].s(1)};for(p=0;p<d.length;p++)setTimeout(d[p].r(),10)}else te('<i class="c0ncel">No attendant log!</i>  '),G()},ce=function(){m[1]=function(){0===J.sts&&J._&&J._()},m[2]=setTimeout(m[1],100)},de=function(e,t){var i=$.extend(!0,{ori:w0w.location.origin+";*"},e),a=n.Args.stepcodeback("alog"),o=n.Args.stepcodeback("___");return a.key?(x.contentWindow.cbHwnd=function(e){x.contentWindow.cbHwnd=null,t(e)},o.comm1.loghole(x.contentWindow,a,"53335f4b49454d434f4e47",i)):t({}),o},pe=function(){C=(new Date).getTime(),V(0),J.sts=0,J.hwnd=function(e,t){J._&&"function"==typeof J._&&(0===J.sts?(J.sts=1,setTimeout((function(){void 0===t&&H&&te('<i class="c0ncel">...Stop!</i>  '),V(1)}),500),this.innerHTML="START"):(J.sts=0,this.innerHTML="STOP",I.WriteLn({prompt:"⏳",value:"Continue calculation ...",delay:0},J._),V(0)))};var e=function(){J._=t,ne(q("initCORE")),f=(new Date).getTime(),w.step3_utils={},w.saveBadge.exDAT={},w.saveBadge.calcR&&(y.ruleLogN=$.extend(!0,[],w.saveBadge.calcR),delete w.saveBadge.calcR),w.saveBadge.cIO&&(Z[0]=w.saveBadge.cIO,delete w.saveBadge.cIO),(x=document.createElement("iframe")).setAttribute("style","height:1px;width:1px;border:none;opacity:0"),x.onload=function(){te(),ce()},r.parent()[0].appendChild(x)},t=function(){w.akq?J._=ue:J._=s,ne("Load data");const e=$.Deferred(),t=x.contentWindow.document,a=t.createElement("script");if(apisvr.a$.sessions[f]={id:f,fn:function(t,n,a){"job"==t&&0==n.evtData.messageType&&setTimeout((function(){i((function(t){te(),$.when(e).done(ce)}))}))}},11==GetIEVersion()){var o=t.createElement("script");o.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.10.1/polyfill.min.js"),t.head.appendChild(o)}a.setAttribute("seson",btoa(f+"|"+w0w.location.origin+"|"+(!w0w.Worker||!0))),a.setAttribute("src",srcpf$+"/media/js/attcalc.js"+src$id),t.head.appendChild(a),_gsC(srcp$f+"/media/utils/jsc/appdat.js"+src$id,"js",(function(){le.__Def_appdatJS=cen$ver.shiftTB("shift_table",n.Args.stepcodeback("shift_table"),n.Args.stepcodeback("clickArgs")),e.resolve()}),"appdat.js")},i=function(e){if(D[0][3]&&D[0][4]&&D[0][3]>D[0][4]){var t=D[0][4];D[0][4]=D[0][3],D[0][3]=t}var i=function(t){if(r.closest(".stepContainer").off("s2_srclog_changed").on("s2_srclog_changed",(function(e,t,n,i){w.akq&&(0!=w.akq[0].indexOf("-1")&&("noU"==w.hasUA?(w.akq[0]="-1",st("setItem",w.s3dbTB[0],JSON.stringify(w.akq))):(w.akq[0]="-1|"+w.akq[0].split("|")[1],"sample"===t&&i&&i())),"plsDEL"===n&&delete w.akq)})),apisvr.__mr_imme){const t=apisvr.__mr_imme;delete apisvr.__mr_imme,$.get(t[0]+"?_"+src$id).done((function(i){D[0]=n.shareMe("verifyLOG").call([i,D[1],t[1],t[2]]),r.closest(".swMain").find(".showinvisibles").val(i),e()}))}else if("noU"==w.hasUA)x.contentWindow.ab.call(lo$DB,w.s3dbTB,(function(t){w.akq&&!v&&t&&t.akq&&(w.saveBadge.exDAT=t.akq[1]||{},a(1e3*w.akq[1],w.akq[2],t.akq[0]),F=Number(w.akq[3]),j=Number(w.akq[4])),e(),S.cus=t&&t.cusfilter_akq}));else{var i=w.saveBadge,s={},l=!1,c=function(){if(E.length>0){var e=E.reduce((function(e,t){return e[0]=void 0===e[0]||t<e[0]?t:e[0],e[1]=void 0===e[1]||t>e[1]?t:e[1],e}),[]);s.modL||(s.modL=[Number(e[0])/1e3,Number(e[1])/1e3]),l||"1"==i.cusL&&(i.modP&&(t=function(e){var t=new Date(Number(e)),n=t.getFullYear().toString()+pad$(t.getMonth()+1,2);return Number(n)},Number(i.modP[0])<=t(e[0])&&t(e[1])<=Number(i.modP[1]))||(l=!0))}var t};if(t&&(s.exlogs=t[0],l=!0),!v&&w.akq){var d=w.akq[2].split("~");s.modL=[d[0],d[1].split("|")[0]],s.akq=w.akq,l=!0}c(),l?de({logh:btoa(JSON.stringify(s)),logkind:1,evt:"load_init"},(function(n){if(n.exs&&n.exs.length>0&&o(n.exs,t[1],atob),n.exDAT&&(w.saveBadge.exDAT=n.exDAT.reduce((function(e,t){return e[t[0]]=JSON.parse(t[1]),e}),{})),n.akq){var l=w.akq[2].split("|"),r=l[0].split("~")[1];a(1e3*n.akq0,r,JSON.parse(atob(n.akq))),F=Number(l[1]),j=Number(l[2]),Z[0]=Number(l[3])}n.modP&&(i.modP=n.modP),s.modL&&(n.exDAT_count&&"0"!=n.exDAT_count||i.cusL&&(i.cusL=0)),e(n.akq)})):e()}},a=function(e,t,n){se();var i=864e5,a=6e4,o=0;$.map(n,(function(t,n){k=k.concat(t[0].reduce((function(s,l){o++;for(var r=e+i*l[0][0],c=l[0][1],d=l[0][2],p=new Date(r),u={id:o,acno:n,ten:t[1],ngay:p,thu:p.toLocaleString(K,{weekday:"short"}),TongTG:t[2],t_1:0,t_2:0,t_3:0,t_4:0,freL:[],mmT:l[0][3]},f=1;f<l.length;f++)if(l[f]){var g=new Date(r+l[f]*a);u["fio"+f]=g,c[f]&&(u["noi"+f]=[],c[f].forEach((function(e,t){u["noi"+f].push(new Date(g.getTime()+e*a))})))}if(d.forEach((function(e,t){if(e){var n=[new Date(r+e[0]*a)];e[1]&&(n[1]=e[1].reduce((function(e,t){return e.push(new Date(r+t*a)),e}),[])),u.freL.push(n)}else u.freL.push([])})),W){var m,h=W[n];if(h){var v=(m=h[r])[0];for(f=1;f<v.length;f++)v[f]&&"HIE"!==v[f]&&(u["fio"+f]=new Date(r+v[f]*a));u.cusL=JSON.stringify(m)}}return s.push(u),s}),[]))})),D[0][3]=e,D[0][4]=1e3*t},o=function(e,t,i){var a=[],o=T.find("#step-2 .log-ctrl kbd>span"),s=function(e){$.map(t,(function(t,n){if(e&&e.logid===t.id)a.push([[t],e]);else if(w.logDAT[t.id]){var i=w.logDAT[t.id];a.push([[i[0]],i[1]])}}))};e.length>0?e.forEach((function(e,t){i&&(e.dat=i(e.dat)),s(e)})):s();for(var l=0;l<a.length;l++){var r=a[l][0][0],c=o.clone(),d=$(c[0]);$(c[c.length-1]);d.text(r.conf.s),r.conf.f.forEach((function(e,t){$(c[t+1]).attr("f",e)})),L.push(n.shareMe("verifyLOG").call([a[l][1].dat,D[1],[D[0][3],D[0][4]]],c))}};if(z&&"uplog"==z[0]&&z[1]){var s=z[1],l=s[1],c=[],d=[];$.grep(s[0],(function(e,t){E=E.concat([new Date(e.conf.minL).setHours(0,0,0),new Date(e.conf.maxL).setHours(0,0,0)]),e.id!==l.logid&&(w.logDAT[e.id]||d.push(e.id),c.push(e))})),0==d.length?(o([],c),i()):"noU"==w.hasUA?x.contentWindow.ac.call(lo$DB,w.dbTBname[1],d,(function(e){o(e,c),i(e)})):i([d,c])}else i()},s=function(){if(c.trigger("START_TINHCONG"),J._=re,ne("Data analysis"),w.fileinfo&&w.fileinfo.id&&(D[1]||D[0][3]||D[0][4]))D[0]=n.shareMe("verifyLOG").call([w.logDAT[w.fileinfo.id][1].dat,D[1],[D[0][3],D[0][4]]]),D[0][3]=D[0][1],D[0][4]=D[0][2],D[1]=null;else{if(!D[0][3]){var e=D[0][1].getFullYear();D[0][3]=1900<e&&e<2100?D[0][1]:new Date}if(!D[0][4]){e=D[0][2].getFullYear();D[0][4]=1900<e&&e<2100?D[0][2]:new Date}}for(var t=0;t<L.length;t++)0!=L[t][0].length&&(0==D[0][0].length?(D[0]=$.extend(!0,[],L[t]),D[0][3]=D[0][1],D[0][4]=D[0][2]):($.map(L[t][0],(function(e,t){var n=!0;$.map(D[0][0],(function(t,i){if(e.acno===t.acno){t.aLogs=t.aLogs.concat(e.aLogs).sort((function(e,t){return e-t}));for(var a=t.aLogs.length-1;a>0;a--)t.aLogs[a].getTime()===t.aLogs[a-1].getTime()&&t.aLogs.splice(a,1);return t.logs=t.aLogs.length,t.minL=t.aLogs[0],t.maxL=t.aLogs[t.logs-1],n=!1,!1}})),n&&D[0][0].push($.extend(!0,{},e))})),D[0][3]>L[t][1]&&(D[0][3]=L[t][1]),D[0][4]<L[t][2]&&(D[0][4]=L[t][2])));D[0][3]=new Date(D[0][3]).setHours(0,0,0,0),D[0][4]=new Date(D[0][4]).setHours(0,0,0,0),A=D[1]?D[1].length:D[0][0].length,te(),ce()};J._=function(){x?Y().then((function(e){ne("Load data"),J._=s,i((function(){te(),ce(),w.saveBadge&&w.saveBadge.sBTN&&w.saveBadge.sBTN.option("visible",!0)}))})):e()},_gsC(srcpf$+"/media/js/termynal.js","js",(function(){(I=new Termynal(o[0],{cbNewLine:function(){a[0].scrollTop=a[0].scrollHeight},lineDelay:5})).WriteLns([{type:"input",prompt:"✋",value:"Welcome to Hello-HRM Online ...",typeDelay:30},{value:q("initCALc"),delay:0}],(function(e){J._()}))}),"TermynalJS")},ue=function(){J._=G,ce()},fe=function(){setTimeout(pe(),20),p.find("h2").text(q("CALC_H")),p.find("p").text(h.js_004_19[1]).css("display",""),i.parent().css("display","none"),l.empty(),l.css("display",""),d.off("click").on("click",J.evt),d.parent().next().css("display","none"),d.css("display",""),J.el=d,r.css("display","none"),r.removeClass("height-transition").addClass("height-transition-hidden")};fe(),a.next().off("click").on("click",(function(e){var t=$(this);n.Args.tinhlaiCHK((function(e,i){if(1==e)return n.Args.lockStep(!0),v=!0,t}))})).off("ditinhlai").on("ditinhlai",(function(e,t,n){w.hasOwnProperty("realtime_fn")&&w.realtime_fn._$_(["recalc"]),a.next().removeClass("d-flex"),t&&(z=t),M(),fe()})).removeClass("d-flex")}}return n.prototype.publicSharedVar="quux",n.prototype.publicSharedMethod=function(e){},n}()};return{createCalc:function(e){return new t[e.kind](e)}}}()}();