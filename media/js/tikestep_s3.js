!function(e){"use strict";FormWizard.s3calc=function(e){Array.from||(Array.from=(t=Object.prototype.toString,n=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},o=Math.pow(2,53)-1,i=function(e){var t=function(e){var t=Number(e);if(isNaN(t))return 0;if(0===t||!isFinite(t))return t;return(t>0?1:-1)*Math.floor(Math.abs(t))}(e);return Math.min(Math.max(t,0),o)},function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,r=arguments.length>1?arguments[1]:void 0;if(void 0!==r){if(!n(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var a,s=i(t.length),l=n(this)?Object(new this(s)):new Array(s),c=0;c<s;)a=t[c],l[c]=r?void 0===o?r(a,c):r.call(o,a,c):a,c+=1;return l.length=s,l}));var t,n,o,i;String.prototype.repeat||(String.prototype.repeat=function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var n=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,n-t.length)});var r=function(){function e(e,t){var n=this,o=function(e){var t=document.createElement("div");return t.innerHTML="<span "+function(e){var t="";for(var o in e)t+=n.pfx,t+="type"===o?'="'+e[o]+'" ':"value"!==o?"-"+o+'="'+e[o]+'" ':" ";return t}(e)+">"+(e.value||"")+"</span>",t.firstElementChild},i=function(e,o){var i=e.getAttribute(n.pfx),s=e.getAttribute(n.pfx+"-delay")||n.lineDelay;"input"==i?(e.setAttribute(n.pfx+"-cursor",n.cursor),function(e){var t=$.Deferred(),o=[].concat(r(e.innerHTML)),i=e.getAttribute(n.pfx+"-typeDelay")||n.typeDelay;e.textContent="",n.container.appendChild(e);var s=0,l=function(){var n=o[s];a(i).done(function(i){e.innerHTML+=n,++s<o.length?l():t.resolve("releaseWait")})};o.length>0?l():t.resolve("releaseWait");return t.promise()}(e).done(function(t){e.removeAttribute(n.pfx+"-cursor"),o(s)})):"progress"==i?function(e){var t=e.getAttribute(n.pfx+"-progressLength")||n.progressLength,o=(e.getAttribute(n.pfx+"-progressChar")||n.progressChar).repeat(t),i=e.getAttribute(n.pfx+"-progressPercent")||n.progressPercent,r=e.getAttribute(n.pfx+"-progssDelay")||n.typeDelay,s=$.Deferred();e.innerHTML="",n.container.appendChild(e);var l=1,c=function(){a(r).done(function(t){var n=Math.round(l/o.length*100);e.innerHTML=o.slice(0,l)+" "+n+"%",l++,n<i?c():s.resolve("releaseWait")})};o.length>0?c():s.resolve("releaseWait");return s.promise()}(e).done(function(e){o(s)}):(n.container.appendChild(e),o(s)),t.cbNewLine&&t.cbNewLine()};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=$.Deferred();return e>0?setTimeout(function(){t.resolve("_wait")},e):t.resolve("_wait"),t.promise()}this.container="string"==typeof e?document.querySelector(e):e,this.pfx="data-"+(t.prefix||"ty"),this.startDelay=t.startDelay||parseFloat(this.container.getAttribute(this.pfx+"-startDelay"))||600,this.typeDelay=t.typeDelay||parseFloat(this.container.getAttribute(this.pfx+"-typeDelay"))||90,this.lineDelay=t.lineDelay||parseFloat(this.container.getAttribute(this.pfx+"-lineDelay"))||1500,this.progressLength=t.progressLength||parseFloat(this.container.getAttribute(this.pfx+"-progressLength"))||40,this.progressChar=t.progressChar||this.container.getAttribute(this.pfx+"-progressChar")||"█",this.progressPercent=t.progressPercent||parseFloat(this.container.getAttribute(this.pfx+"-progressPercent"))||100,this.cursor=t.cursor||this.container.getAttribute(this.pfx+"-cursor")||"▋",this.lineData=(t.lineData||[]).map(function(e){return o(e)}),t.noInit||(n.lines=[].concat(r(n.container.cloneNode(!0).querySelectorAll("["+n.pfx+"]"))).concat(n.lineData),n.container.setAttribute("data-termynal",""),n.container.innerHTML="",a(n.startDelay).done(function(e){var t=0,o=function(e){++t<n.lines.length&&a(e).done(function(e){i(n.lines[t],o)})};n.lines.length>0&&i(n.lines[t],o)})),this.WriteLn=function(e,t){var n=o(e);i(n,function(e){e>0?a(e).done(function(e){t&&t(n)}):t&&t(n)})},this.att_progress=function(e,t){var o=t.progressLength||e.getAttribute(n.pfx+"-progressLength")||n.progressLength,i=t.progressChar||e.getAttribute(n.pfx+"-progressChar")||n.progressChar,r=i.repeat(o),s=t.progressPercent||e.getAttribute(n.pfx+"-progressPercent")||n.progressPercent,l=t.typeDelay||e.getAttribute(n.pfx+"-progssDelay")||n.typeDelay,c=$.Deferred();e.innerHTML="";var p=1,d=function(){a(l).done(function(t){var n=Math.round(p/r.length*100);e.innerHTML=r.slice(0,p)+" "+n+"%",p++,n<s?d():c.resolve("releaseWait")})};return r.length>0?d():c.resolve("releaseWait"),c.promise()}}return e.prototype.publicSharedVar="quux",e.prototype.publicSharedMethod=function(e){},e}(),a={noshift:function(){var e=null;function t(t){var n=function(){},o=function(e){return e.dxPopup({contentTemplate:n,width:300,height:280,showTitle:!0,title:"Information",visible:!1,dragEnabled:!1,closeOnOutsideClick:!0,showCloseButton:!1,position:{at:"bottom",my:"center"},toolbarItems:[{widget:"dxButton",toolbar:"bottom",location:"before",options:{icon:"email",text:"Send",onClick:function(e){DevExpress.ui.notify({message:"message",position:{my:"center top",at:"center top"}},"success",3e3)}}},{widget:"dxButton",toolbar:"bottom",location:"after",options:{text:"Close",onClick:function(e){elUI.step3_rst_grid_popupFilter.hide()}}}]}).dxPopup("instance")};function i(t,i,r){if(t.step3_rst_grid)t.step3_rst_grid.option({dataSource:r,"paging.pageSize":50}),t.step3_rst_grid.clearSorting(),t.step3_rst_grid.clearSelection(),t.step3_rst_grid.clearFilter();else{t.step3_utils={};var a=i.find(".step3_rst_grid");a.on("mousedown touchstart",".col-io-filter",function(e){e.preventDefault(),e.stopPropagation(),t.step3_rst_grid_popupFilter.option({contentTemplate:function(){return n()},position:{my:"right",at:"left",of:e.target}}),t.step3_rst_grid_popupFilter.show()});var s=[{id:1,text:"All"},{id:2,text:"Video Players"},{id:3,text:"Televisions"},{id:4,text:"Monitors"},{id:5,text:"Projectors"}];t.step3_rst_grid_cmd=$("<div/>").insertBefore(a).dxToolbar({items:[{location:"before",widget:"dxButton",options:{text:"Export Excel",onClick:function(){_gsC("https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.2/FileSaver.min.js","js",function(){},"FileSaver.min.js"),_gsC("https://cdnjs.cloudflare.com/ajax/libs/exceljs/4.2.1/exceljs.min.js","js",function(){t.step3_rst_grid.exportToExcel(!1)},"exceljs.min.js")}}},{location:"before",widget:"dxButton",locateInMenu:"auto",options:{icon:"refresh",onClick:function(){t.step3_utils.gridtitle.html("<i class='ti-alert'/>"+(new Date).getTime())}}},{location:"center",locateInMenu:"never",template:function(e){return t.step3_utils.gridtitle=$("<div><div class='toolbar-label'><b>Tom's Club</b> Products</div></div>"),t.step3_utils.gridtitle}},{location:"before",widget:"dxDropDownButton",options:{stylingMode:"text",displayExpr:"text",keyExpr:"cls",useSelectMode:!0,items:[{cls:10,text:"10px"},{cls:11,text:"11px"},{cls:12,text:"12px"},{cls:13,text:"13px"},{cls:14,text:"14px"}],selectedItemKey:13,onSelectionChanged:function(e){setTimeout(function(){t.step3_rst_grid._$element.find(".dx-datagrid-content").removeClass("f10 f11 f12 f13 f14").addClass("f"+e.item.cls),t.step3_rst_grid.repaint()},20)},itemTemplate:function(e){return $("<div>").text(e.text).css("font-size",e.size+"px")}}},{location:"before",widget:"dxDropDownButton",options:{icon:"indent",displayExpr:"text",keyExpr:"lineHeight",useSelectMode:!0,items:[{lineHeight:1,text:"1"},{lineHeight:1.35,text:"1.35"},{lineHeight:1.5,text:"1.5"},{lineHeight:2,text:"2"}],selectedItemKey:1,onSelectionChanged:function(e){t.step3_rst_grid.option("height",350*e.item.lineHeight)}}},{location:"after",widget:"dxSelectBox",locateInMenu:"auto",options:{width:140,items:s,valueExpr:"id",displayExpr:"text",value:s[0].id,onValueChanged:function(e){e.value>1?productsStore.filter("type","=",e.value):productsStore.filter(null),productsStore.load()}}},{location:"after",widget:"dxButton",locateInMenu:"auto",options:{icon:"plus",onClick:function(){DevExpress.ui.notify("Add button has been clicked!")}}},{locateInMenu:"always",widget:"dxButton",options:{text:"Save",onClick:function(){DevExpress.ui.notify("Save option has been clicked!")}}},{locateInMenu:"always",widget:"dxButton",options:{text:"Print",onClick:function(){DevExpress.ui.notify("Print option has been clicked!")}}},{locateInMenu:"always",widget:"dxButton",options:{text:"Settings",onClick:function(){DevExpress.ui.notify("Settings option has been clicked!")}}}]}).dxToolbar("instance"),t.step3_rst_grid_popupFilter=o($("<div/>").appendTo(i)),t.step3_rst_grid=a.dxDataGrid({keyExpr:"id",dataSource:r,columnAutoWidth:!1,allowColumnReordering:!1,showBorders:!0,focusedRowEnabled:!0,pager:{visible:!0,allowedPageSizes:[50,100,300,500,"all"],showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0},paging:{pageSize:50},height:350,columns:[{caption:"#",width:50,cellTemplate:function(e,n){var o=t.step3_rst_grid.pageIndex();o<0&&(o=0),e.text(o*t.step3_rst_grid.pageSize()+n.row.rowIndex+1)}},{headerCellTemplate:function(e){var t=$("<div/>");e.parent().addClass("noborder-bottom"),e.append(t),t.dxTextBox({mode:"search",showClearButton:!0,onContentReady:function(e){e.component.element().find(".dx-icon-clear").click(function(){})},onValueChanged:function(e){}})},columns:[{dataField:"acno",caption:"Ma AC",width:75}]},{headerCellTemplate:function(e){var t=$("<div/>");e.parent().addClass("noborder-bottom"),e.append(t),t.dxTextBox({mode:"search",showClearButton:!0,onContentReady:function(e){e.component.element().find(".dx-icon-clear").click(function(){})},onValueChanged:function(e){}})},columns:[{dataField:"ten",caption:"Ten Nhan Vien",width:200}]},{headerCellTemplate:function(e){e.parent().append($("<span  style='white-space: pre-wrap;'>Ngay</span><i class='dx-icon-filter col-io-filter' style='float:left'></i>"))},dataField:"ngay",caption:"Ngay",width:100},{headerCellTemplate:function(e){e.parent().prepend($("<div class='dx-icon-filter col-io-filter' style='float:none'></div>")).css({"padding-top":"10px"}).addClass("important-veraligntop"),e.parent().append("<div style='overflow: hidden;text-overflow: ellipsis;'>Weekday</div>")},dataField:"thu",caption:"Weekday",width:50,cssClass:"centerTD"},{caption:"Tong TG",headerCellTemplate:function(e){e.parent().prepend($("<div class='dx-icon-filter col-io-filter'style='float:none'>(Gio)</div>")).css({"padding-top":"10px"}).addClass("important-veraligntop"),e.parent().append("<div>Tong TG</div>")},dataField:"TongTG",width:70},{caption:"In - Out",headerCellTemplate:function(e){e.parent().append($('<i class="dx-icon-filter col-io-filter"></i>')),e.html("In - Out")},columns:[{caption:"In",dataField:"fio1",width:60,cellTemplate:p,dataType:"date",format:"HH:mm",cssClass:"centerTD"},{caption:"Out",dataField:"fio2",width:60,cellTemplate:p,dataType:"date",format:"HH:mm",cssClass:"centerTD"},{caption:"Total",dataField:"total1",width:60}]},{caption:"In - Out",headerCellTemplate:function(e){e.parent().append($('<i class="dx-icon-filter col-io-filter"></i>')),e.html("Tong TG (gio)"),e.closest("td").css("background","red")},columns:[{caption:"In",dataField:"fio3",width:60,dataType:"date",format:"HH:mm",cellTemplate:function(e,t){e.css({"text-align":"center",background:"red"}),e[0].innerHTML=t.text}},{caption:"Out",dataField:"fio4",width:60,dataType:"date",format:"HH:mm"},{caption:"Total",dataField:"total2",width:60}]},{headerCellTemplate:function(e){}}],onContentReady:function(t){e&&"function"==typeof e&&e(t)},onToolbarPreparing:function(e){e.component;e.toolbarOptions.visible=!1,e.toolbarOptions.items.unshift({location:"center",locateInMenu:"never",template:function(){return $("<div class='toolbar-label'><b>Tom's Club</b> Products</div>")}})},onContextMenuPreparing:function(e){e.row&&"data"===e.row.rowType&&(e.items=[{text:"Share",icon:"dx-icon-globe",template:c,items:[{text:"Facebook"},{text:"Twitter"}]},{text:"Download",icon:"dx-icon-download",template:c},{text:"Add Comment",icon:"dx-icon-add",template:c},{text:"Add to Favorite",icon:"dx-icon-favorites",template:c},{text:"edit",icon:"dx-icon-download",onItemClick:function(){e.component.editRow(e.row.rowIndex)},template:c},{text:"insert",onItemClick:function(){e.component.addRow()}},{text:"delete",onItemClick:function(){e.component.deleteRow(e.row.rowIndex)}}])},onExporting:function(e){var t=new ExcelJS.Workbook,n=t.addWorksheet("Employees");DevExpress.excelExporter.exportDataGrid({component:e.component,worksheet:n,autoFilterEnabled:!0}).then(function(){t.xlsx.writeBuffer().then(function(e){saveAs(new Blob([e],{type:"application/octet-stream"}),"Employees.xlsx")})}),e.cancel=!0}}).dxDataGrid("instance"),t.step3_utils.noise_rule=i.find(".timekeeper-rule1").dxCheckBox({value:!0}).dxCheckBox("instance"),t.step3_utils.noise_spec=i.find(".logs-spacing").html("").dxNumberBox({min:0,max:500,value:0,width:50}).dxNumberBox("instance");var l=i.find(".logs-effect");l.closest(".media").find("img").attr("src",srcpf$+"/media/images/quyuoc_log1.png"),t.step3_utils.logs_effect=l.html("").dxSelectBox({items:[{id:1,dis:"Log 1"},{id:2,dis:"Log 2"}],displayExpr:"dis",valueExpr:"id",value:1,width:100,onValueChanged:function(e){e.element.closest(".media").find("img").attr("src",srcpf$+"/media/images/quyuoc_log"+e.value+".png")}}).dxSelectBox("instance")}var c=function(e,t,n){var o=$("<div></div>");return e.icon&&o.append('<span class="'+e.icon+'"><span>'),e.items&&o.append('<span class="dx-icon-spinright"><span>'),o.append(e.text),o},p=function(e,t){e[0].style.textAlign="center",e[0].innerHTML=t.text}}this.exec=function(t,n,o){var a=this,s=n.find(".phantramcouting"),l=n.find("#step-3 .xwindow").empty(),c=$('<div class="termynal"/>').appendTo(l),p=n.find("#step-3 .step3_rst"),d=t.allLOGs[1]?t.allLOGs[1].length:t.allLOGs[0][0].length,u=0,f=function(){setTimeout(function(){admin$.DEV(function(){e=function(n){e=null,t.step3_rst_grid._$element.parent().slideToggle(function(){v.length<50&&t.step3_rst_grid.repaint(),o(),s.parent().css("display","none").next().css("display",""),srclocked(!1)})},i(t,n,v)})},200);var r=n.find(".StepTitle-calc");r.parent().removeClass("text-center"),r.next().fadeIn(),r.css("display","none"),s.next().css("display","none")},g=new r(c[0],{cbNewLine:function(){c[0].scrollTop=c[0].scrollHeight},lineDelay:5}),h=n.find(".StepTitle-calc").off("click").on("click",function(){T(),f()});h.next().css("display","none"),h.parent().addClass("text-center"),h.css("display",""),p.css("display","none"),s.parent().css("display","none"),s.css("width","0%"),s.next().css("display",""),s.parent().css("display","").next().off("click").on("click",function(){a.exec(t,n,o)}).css("display","none");var x,m=apisvr.a$.selected_language,v=(new Date(new Date(t.allLOGs[0][1]).setHours(0,0,0,0)),new Date(new Date(t.allLOGs[0][2]).setHours(24,0,0,0)),[]),y=0,w=1,b=(new Worker(srcpf$+"/media/js/attworker.js?"+(new Date).getTime()),(new Date).getTime()),T=function(){C.parentNode.removeChild(C),delete apisvr.a$.sessions[b]},C=function(){var e=document.createElement("iframe"),t=n.find("#test_prototype");t.empty(),t.off("click").on("click",function(){T()}),t[0].appendChild(e),e.setAttribute("style","height:1px;width:1px;border:none;opacity:0");var o=e.contentWindow.document;o.open(),o.write('<script type="text/javascript" src="'+srcpf$+"/media/js/attcalc.js?"+(new Date).getTime()+'"><\/script>'),o.close(),e.onload=function(t){(C=e).contentWindow.session=b,apisvr.a$.sessions[b]={id:b},D()}}(),_=function(){x||(x=(new Date).getTime());var e=t.allLOGs[0][0][y],n=function(){y++,D()};t.allLOGs[1]&&-1==$.inArray(e.acno,t.allLOGs[1])?n():(w+=e.aLogs.length,setTimeout(function(){u+=1;var e=parseInt(100*u/d);s.css("width",e.toString()+"%").html(e.toString()+"%"),s.next().css("width",(100-e).toString()+"%").html(u+" / "+d)},1),g.WriteLn({prompt:"▲ acno",value:e.acno+" Min log: "+e.minL+" Max log: "+e.maxL,delay:0},function(){g.WriteLn({value:"couting ...",delay:0},function(t){var o="·".repeat(40);g.progressPercent;apisvr.a$.sessions[b].fn=function(e,i,r){!function(e){if("1"==e.messageType)v=v.concat(e.data),n();else{var i=e.data,r=i.p;t.innerHTML=o.slice(0,Math.round(40*r/100))+" "+r+"%"}}(i.evtData)},C.contentWindow.postMessage({messageType:0,a:e,delay:0,loc:m,runI:w},"*")})}))},D=function(){y<=t.allLOGs[0][0].length-1?_():(T(),f())}}}return t.prototype.publicSharedVar="quux",t.prototype.publicSharedMethod=function(e){},t}()};return{createCalc:function(e){return new a[e.kind](e)}}}()}();