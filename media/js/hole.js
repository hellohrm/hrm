function get_blackhole(){const e=window.gQRY&&window.gQRY.blackhole||window.location.href;return e.indexOf("/odat/")>-1?e.split("/odat/").slice(0,-1)+"/odat/":""}function gethtml(e,t,a,s){var n="0",o="vi",r=get_blackhole(),i=r.indexOf("/odat/")>-1?(o=a.selected_language,"GET"):"POST",u=new FormData,d="/TabPageData";for(var l in a)"tabId"==l&&"GET"==i?d=r+o+"/"+a[l]+".html":"ajaxsession"==l?n=a[l]:u.append(l,a[l]);var m=new XMLHttpRequest,g=function(a){e.postMessage(a,t)};m.open(i,(s||d)+"?XDEBUG_SESSION_START=154A5348&t="+(new Date).getTime(),!0),m.onreadystatechange=function(){1==m.readyState||4==m.readyState&&(200==m.status?g({msgtype:"newTabPage",ajaxsession:n,kq:"resolve",result:m.response}):g({msgtype:"newTabPage",ajaxsession:n,kq:"reject",result:JSON.stringify({status:m.status,statusText:m.statusText,response:m.response})}))},m.upload.addEventListener("progress",(function(e){e.lengthComputable}),!1),m.onerror=function(){g({msgtype:"newTabPage",ajaxsession:n,kq:"reject",result:JSON.stringify({status:m.status,statusText:m.statusText,response:m.response})})},"GET"==i?m.send(null):m.send(u)}function handleMessage(e){"reloadhole"==e.data.act?setTimeout((function(){reloadhole(e.data)}),1):setTimeout((function(){new gethtml(e.source,e.origin,e.data,e.data.uri)}),1)}var dIm,chkINI,htmlC=document.getElementById("demo");if(window.addEventListener("message",handleMessage,!1),dIm=function(){window.parent.postMessage(arguments[0],arguments[1])},"demoapp"==htmlC.getAttribute("name"))dIm("000000"+htmlC.getAttribute("data-rawhtml"),htmlC.getAttribute("data-whoami"));else{var _DE=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},_postMessage=function(e){var t=JSON.parse(e.result);"demoapp"!==t.ui?setTimeout(chkINI,500):dIm("000000"+_DE(t.rawhtml),htmlC.getAttribute("data-whoami"))};chkINI=function(){new gethtml({postMessage:_postMessage},"",{chk_ini_status:htmlC.getAttribute("name"),diesvr:htmlC.getAttribute("data-rawhtml")},"/hole")},setTimeout(chkINI,500)}