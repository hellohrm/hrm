function get_blackhole(){const t=window.gQRY&&window.gQRY.blackhole||window.location.href;return t.indexOf("/odat/")>-1?t.split("/odat/").slice(0,-1)+"/odat/":""}function gethtml(t,e,a,s){var n="0",o="vi",r=get_blackhole(),i=r.indexOf("/odat/")>-1?(o=a.selected_language,"GET"):"POST",u=new FormData,d="/TabPageData";for(var l in a)"tabId"==l&&"GET"==i?d=r+o+"/"+a[l]+".html":"ajaxsession"==l?n=a[l]:u.append(l,a[l]);var m=new XMLHttpRequest,g=function(a){t.postMessage(a,e)};m.open(i,(s||d)+"?XDEBUG_SESSION_START=154A5348&t="+(new Date).getTime(),!0),m.onreadystatechange=function(){1==m.readyState||4==m.readyState&&(200==m.status||0==m.status?g({msgtype:"newTabPage",ajaxsession:n,kq:"resolve",result:m.response}):g({msgtype:"newTabPage",ajaxsession:n,kq:"reject",result:JSON.stringify({status:m.status,statusText:m.statusText,response:m.response})}))},m.upload.addEventListener("progress",(function(t){t.lengthComputable}),!1),m.onerror=function(){g({msgtype:"newTabPage",ajaxsession:n,kq:"reject",result:JSON.stringify({status:m.status,statusText:m.statusText,response:m.response})})},"GET"==i?m.send():m.send(u)}function handleMessage(t){"reloadhole"==t.data.act?setTimeout((function(){reloadhole(t.data)}),1):setTimeout((function(){new gethtml(t.source,t.origin,t.data,t.data.uri)}),1)}var dIm,chkINI,htmlC=document.getElementById("demo");if(window.addEventListener("message",handleMessage,!1),dIm=function(){window.parent.postMessage(arguments[0],arguments[1])},"demoapp"==htmlC.getAttribute("name"))dIm("000000"+htmlC.getAttribute("data-rawhtml"),htmlC.getAttribute("data-whoami"));else{var _DE=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},_postMessage=function(t){var e=JSON.parse(t.result);"demoapp"!==e.ui?setTimeout(chkINI,500):dIm("000000"+_DE(e.rawhtml),htmlC.getAttribute("data-whoami"))};chkINI=function(){new gethtml({postMessage:_postMessage},"",{chk_ini_status:htmlC.getAttribute("name"),diesvr:htmlC.getAttribute("data-rawhtml")},"/hole")},setTimeout(chkINI,500)}