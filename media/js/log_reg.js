String.prototype.format=function(){var a=this;for(var t in arguments)a=a.replace("{"+t+"}",arguments[t]);return a};var LoginModalController={tabsElementName:".logmod__tabs li",tabElementName:".logmod__tab",inputElementsName:".logmod__form .input",hidePasswordName:".hide-password",submitBTNClick:null,inputElements:null,tabsElement:null,tabElement:null,hidePassword:null,$activeTab:null,tabSelection:0,findElements:function(){var a=this;return a.tabsElement=$(a.tabsElementName),a.tabElement=$(a.tabElementName),a.inputElements=$(a.inputElementsName),a.hidePassword=$(a.hidePasswordName),a},setState:function(a){var t=this,n=null;return a||(a=0),t.tabsElement&&((n=$(t.tabsElement[a])).addClass("current"),t.$activeTab=$("."+n.attr("data-tabtar")),t.$activeTab.addClass("show"),t.$activeTab.parent().attr("tabtar",n.attr("data-tabtar"))),t},getActiveTab:function(){var a=this;return a.tabsElement.each((function(t,n){$(n).hasClass("current")&&(a.activeTab=$(n))})),a},addClickEvents:function(){var a=this;return a.hidePassword.on("click",(function(a){var t=$(this),n=t.prev("input");n.toggleClass("fuckpass"),n.hasClass("fuckpass")?t.text(dicLAN.js_001_22):t.text(dicLAN.js_001_23)})),a.tabsElement.on("click",(function(t){var n=$(this).attr("data-tabtar");t.preventDefault(),a.activeTab.removeClass("current"),a.activeTab=$(this),a.activeTab.addClass("current"),a.$activeTab.parent().attr("tabtar",n),a.tabElement.each((function(t,e){(e=$(e)).removeClass("show"),e.hasClass(n)&&(e.addClass("show"),a.$activeTab=e)}))})),a.inputElements.find("label").on("click",(function(a){$(this).next("input").focus()})),a},hwData:function(a,t,n){$.post(a,t,(function(){})).done((function(a){n&&n({rst:"ok",dat:a})})).fail((function(a,t,e){n&&n({rst:"ng",dat:a})})).always((function(){}))},lockfrm:function(a){window.parent.location!=self.location?window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"lockform",origin:window.location.origin,state:a}},hash[2]):$("#helloguy").css("display",a)},hwndMsg:function(a){a.data.msgtype},captfn:function(a,t){var n=$(a).closest("form"),e=n.find("#captcha");$("#token").val(t.token),n.find("#captchaImg").html('<img src="'+t.captcha+'"/>'),e.val(""),e.parent()[(t.hasOwnProperty("err")&&"2"==t.accStatus?"add":"remove")+"Class"]("err")},validBASE:function(a,t){var n=this,e=function(){const e=t();return a.data("validation",e.err?e:{err:e}),a.parent()[(""==e?"remove":"add")+"Class"]("err"),n.errDisplay(),e};return a.off("blur").on("blur",(function(){return e()})),e()},validEmail:function(a){return this.validBASE(a,(function(){var t="";if(""==a.val())t=dicLAN.js_001_17;else{var n=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;n.test(a.val());if(n.test(a.val())){const n=a.data("validation");n&&n.eml&&n.eml===a.val()&&(t=n)}else t=dicLAN.js_001_17}return t}))},validRegPass:function(a){return this.validBASE(a,(function(){var t="";return a.val().length<5&&(t=dicLAN.js_001_18.format("5")),t}))},validRegPassAgain:function(a,t){return this.validBASE(t,(function(){var n="";return a.val()!=t.val()&&(n=dicLAN.js_001_19),n}))},validCaptcha:function(a){return this.validBASE(a,(function(){var t="";return""==a.val()&&(t=dicLAN.js_001_20),t}))},errDisplay:function(){var a=[];if(this.$activeTab.find(".err").each((function(t,n){a.push("<kbd>"+$(n).find("input").data("validation").err+"</kbd>")})),this.$activeTab.find(".errmsg").css("display",a.length>0?"":"none").html(a.join("")),0==a.length){var t=this;setTimeout((function(){t.submitBTNClick&&t.submitBTNClick.trigger("click")}),200)}},service_down:function(a){const t=$(".logmod,.logmod_makh").removeClass().attr("style","").addClass("logmod");return t.html(a.html),t.find("[data-lang]").each((function(a,t){var n=t.getAttribute("data-lang");t.innerHTML=dicLAN[n]})),this.lockfrm("none"),t},register:function(a,t){t.submitBTNClick=null;var n=$(a).closest("form"),e=n.find(".errmsg"),i=n.find("#reg-email"),s=n.find("#captcha"),o=$("#token"),r=n.find("#user-pw"),l=n.find("#user-pw-repeat");if(n.find(".err").removeClass("err"),t.validEmail(i),""==t.validRegPass(r)&&t.validRegPassAgain(r,l),t.validCaptcha(s),this.$activeTab.find(".err").length>0)return;t.lockfrm("");const c=$(a),d=n.serializeArray();d.push({name:"token",value:o.val()},{name:"session",value:hash[0]},{name:"acctyp",value:hash[4]},{name:"selected_language",value:o.attr("currentlang")}),t.hwData("/dangky?XDEBUG_SESSION_START=154A5348",d,(function(n){if("ok"==n.rst){var s=JSON.parse(n.dat);if("-2"==s.accStatus)return void t.service_down(s);if(i.parent()[("1"==s.accStatus?(i.data("validation",{err:dicLAN[s.err[0]],eml:i.val()}),"add"):"remove")+"Class"]("err"),"0"!=s.accStatus){t.captfn(c,s),e.css("display","");for(var o=0;o<s.err.length;o++)s.err[o]="<kbd>"+dicLAN[s.err[o]]+"</kbd>";e.html(s.err.join(""))}else hash[4]&&0==hash[4].indexOf("makh")?($(a).trigger("reg_rst",[s,hash]),t.hwData("/dangnhap?XDEBUG_SESSION_START=154A5348",d,(function(i){if("ok"==i.rst){const a=JSON.parse(i.dat);"-1"==a.accStatus?(e.css("display","").html(dicLAN.js_001_7),t.lockfrm("none")):"-2"==a.accStatus?t.service_down(a):i.rst="makh_done"}$(a).trigger("makh_rst",[i,hash,btoa(encodeURIComponent(n.dat))])}))):(t.$activeTab.find("#regokmsg").css("display",""),t.$activeTab.find(".logmod__form").css("display","none"));t.lockfrm("none")}}))},login:function(a,t){t.submitBTNClick=null;var n=$(a).closest("form"),e=n.find(".errmsg"),i=n.find("#log-email"),s=n.find("#loginpw"),o=$("#token");if(t.validEmail(i),t.validRegPass(s),this.$activeTab.find(".err").length>0)return;$(a);const r=n.serializeArray();"da_kichhoat_key"==hash[3]&&r.push({name:hash[3],value:hash[5]}),t.lockfrm(""),$(".logmod__wrapper").css("opacity",.2),r.push({name:"token",value:o.val()},{name:"session",value:hash[0]}),setTimeout((function(){t.hwData("/dangnhap?XDEBUG_SESSION_START=154A5348",r,(function(a){if("ok"==a.rst){var n=JSON.parse(a.dat);"-1"==n.accStatus?(e.css("display","").html(dicLAN.js_001_7),s.val(""),t.lockfrm("none"),$(".logmod__wrapper").css("opacity",1)):"-2"==n.accStatus?t.service_down(n).find(".logmod__close").off("click").one("click",(function(){window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"lang_selector",origin:window.location.origin}},hash[2])})):window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"loginok",origin:window.location.origin,html:n.html}},hash[2])}}))}),20)},initialize:function(){var a=this;if(a.findElements().setState("log"==hash[4]?0:1).getActiveTab().addClickEvents(),$("#createacc").on("mousedown touchstart",(function(){a.submitBTNClick=$(this)})).click((function(){a.register(this,a)})),$("#recreateacc").click((function(){a.$activeTab.find("#regokmsg").css("display","none");var t=a.$activeTab.find(".logmod__form");t.css("display",""),t.find(".errmsg").css("display","none").html(""),t.find("#reg-email").off("blur").val(""),t.find("#captcha").off("blur").val(""),t.find("#user-pw").off("blur").val(""),t.find("#user-pw-repeat").off("blur").val(""),t.find("#captcha").off("blur").val(""),t.find(".refreshbtn").trigger("click")})),$("#login").on("mousedown touchstart",(function(){a.submitBTNClick=$(this)})).click((function(){a.login(this,a)})),$(".refreshbtn").click((function(){$(this.parentNode).css("display","none"),$(this.parentNode.parentNode).find("#captchaImg").html('<div class="spinner-border" style="margin-top: 5px;float: none;" role="status"><span class="sr-only">Loading...</span></div>');var t=$(this),n=$("#regform").serializeArray();n.push({name:"token",value:$("#token").val()}),a.hwData("/renewcaptcha?XDEBUG_SESSION_START=154A5348",n,(function(n){if("ok"==n.rst){var e=JSON.parse(n.dat);a.captfn(t,e),t.parent().css("display","")}}))})),"da_kichhoat_key"==hash[3]){$(".logmod__close").remove(),a.selLAN=$("#token").attr("currentlang");const t=document.querySelector(".lang-flag"),n=function(){t&&t.parentNode&&t.parentNode.classList.contains("open")&&t.parentNode.classList.toggle("open")};(function(n){a.selLAN=n,$(t).removeClass().addClass("lang-flag lang-"+n)})(a.selLAN),document.addEventListener("click",(function(a){n()})),$("#lang_selector").on("click",".lang-flag",(function(a){a.preventDefault(),a.stopPropagation(),this.parentNode.classList.toggle("open")})).on("click",".lang",(function(t){const n=$(t.currentTarget).hasClass("lang-vi")?"vi":"en";a.selLAN!=n&&window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"lang_selector",origin:window.location.origin,lan:n}},hash[2])})).next().on("click",(function(a){window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"banquyen",origin:window.location.origin}},hash[2])})).parent().show()}else $("body").on("click",".logmod__close",(function(){window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"closed",origin:window.location.origin}},hash[2])}));window.parent.location!=self.location&&(window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"loaded",origin:window.location.origin}},hash[2]),window.addEventListener?window.addEventListener("message",a.hwndMsg,!1):window.attachEvent&&window.attachEvent("onmessage",a.hwndMsg)),$("input.string,input.sumbit").keypress((function(t){if(13==t.which){t.preventDefault();var n=a.$activeTab.find("[tabIndex="+(+this.tabIndex+1)+"]");n.length||(n=a.$activeTab.find("[tabIndex=1]")),n.focus().click()}})),$("input#loginpw").bind("copy",(function(a){a.preventDefault()})),$(".logmod__wrapper").fadeIn()}};$(document).ready((function(){$("[data-lang]").each((function(a,t){const n=t.getAttribute("data-lang");dicLAN[n]&&(t.innerHTML=dicLAN[n])})),LoginModalController.initialize(),$("script").remove()}));