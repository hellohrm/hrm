String.prototype.format=function(){var t=this;for(var a in arguments)t=t.replace("{"+a+"}",arguments[a]);return t};var LoginModalController={tabsElementName:".logmod__tabs li",tabElementName:".logmod__tab",inputElementsName:".logmod__form .input",hidePasswordName:".hide-password",submitBTNClick:null,inputElements:null,tabsElement:null,tabElement:null,hidePassword:null,$activeTab:null,tabSelection:0,findElements:function(){var t=this;return t.tabsElement=$(t.tabsElementName),t.tabElement=$(t.tabElementName),t.inputElements=$(t.inputElementsName),t.hidePassword=$(t.hidePasswordName),t},setState:function(t){var a=this,n=null;return t||(t=0),a.tabsElement&&((n=$(a.tabsElement[t])).addClass("current"),a.$activeTab=$("."+n.attr("data-tabtar")),a.$activeTab.addClass("show"),a.$activeTab.parent().attr("tabtar",n.attr("data-tabtar"))),a},getActiveTab:function(){var t=this;return t.tabsElement.each((function(a,n){$(n).hasClass("current")&&(t.activeTab=$(n))})),t},addClickEvents:function(){var t=this;return t.hidePassword.on("click",(function(t){var a=$(this),n=a.prev("input");n.toggleClass("fuckpass"),n.hasClass("fuckpass")?a.text(dicLAN.js_001_22):a.text(dicLAN.js_001_23)})),t.tabsElement.on("click",(function(a){var n=$(this).attr("data-tabtar");a.preventDefault(),t.activeTab.removeClass("current"),t.activeTab=$(this),t.activeTab.addClass("current"),t.$activeTab.parent().attr("tabtar",n),t.tabElement.each((function(a,e){(e=$(e)).removeClass("show"),e.hasClass(n)&&(e.addClass("show"),t.$activeTab=e)}))})),t.inputElements.find("label").on("click",(function(t){$(this).next("input").focus()})),t},hwData:function(t,a,n){$.post(t,a,(function(){})).done((function(t){n&&n({rst:"ok",dat:t})})).fail((function(t,a,e){n&&n({rst:"ng",dat:t})})).always((function(){}))},lockfrm:function(t){window.parent.location!=self.location?window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"lockform",origin:window.location.origin,state:t}},hash[2]):$("#helloguy").css("display",t)},hwndMsg:function(t){t.data.msgtype},captfn:function(t,a){var n=$(t).closest("form"),e=n.find("#captcha");$("#token").val(a.token),n.find("#captchaImg").html('<img src="'+a.captcha+'"/>'),e.val(""),e.parent()[(a.hasOwnProperty("err")&&"2"==a.accStatus?"add":"remove")+"Class"]("err")},validBASE:function(t,a){var n=this,e=function(){const e=a();return t.data("validation",e.err?e:{err:e}),t.parent()[(""==e?"remove":"add")+"Class"]("err"),n.errDisplay(),e};return t.off("blur").on("blur",(function(){return e()})),e()},validEmail:function(t){return this.validBASE(t,(function(){var a="";if(""==t.val())a=dicLAN.js_001_17;else{var n=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;n.test(t.val());if(n.test(t.val())){const n=t.data("validation");n&&n.eml&&n.eml===t.val()&&(a=n)}else a=dicLAN.js_001_17}return a}))},validRegPass:function(t){return this.validBASE(t,(function(){var a="";return t.val().length<5&&(a=dicLAN.js_001_18.format("5")),a}))},validRegPassAgain:function(t,a){return this.validBASE(a,(function(){var n="";return t.val()!=a.val()&&(n=dicLAN.js_001_19),n}))},validCaptcha:function(t){return this.validBASE(t,(function(){var a="";return""==t.val()&&(a=dicLAN.js_001_20),a}))},errDisplay:function(){var t=[];if(this.$activeTab.find(".err").each((function(a,n){t.push("<kbd>"+$(n).find("input").data("validation").err+"</kbd>")})),this.$activeTab.find(".errmsg").css("display",t.length>0?"":"none").html(t.join("")),0==t.length){var a=this;setTimeout((function(){a.submitBTNClick&&a.submitBTNClick.trigger("click")}),200)}},register:function(t,a){a.submitBTNClick=null;var n=$(t).closest("form"),e=n.find(".errmsg"),i=n.find("#reg-email"),s=n.find("#captcha"),o=$("#token"),r=n.find("#user-pw"),l=n.find("#user-pw-repeat");if(n.find(".err").removeClass("err"),a.validEmail(i),""==a.validRegPass(r)&&a.validRegPassAgain(r,l),a.validCaptcha(s),this.$activeTab.find(".err").length>0)return;a.lockfrm("");const c=$(t),d=n.serializeArray();d.push({name:"token",value:o.val()},{name:"session",value:hash[0]},{name:"acctyp",value:hash[4]},{name:"selected_language",value:o.attr("currentlang")}),a.hwData("/dangky?XDEBUG_SESSION_START=154A5348",d,(function(n){if("ok"==n.rst){var s=JSON.parse(n.dat);if(i.parent()[("1"==s.accStatus?(i.data("validation",{err:dicLAN[s.err[0]],eml:i.val()}),"add"):"remove")+"Class"]("err"),"0"!=s.accStatus){a.captfn(c,s),e.css("display","");for(var o=0;o<s.err.length;o++)s.err[o]="<kbd>"+dicLAN[s.err[o]]+"</kbd>";e.html(s.err.join(""))}else hash[4]&&0==hash[4].indexOf("makh")?($(t).trigger("reg_rst",[s,hash]),a.hwData("/dangnhap?XDEBUG_SESSION_START=154A5348",d,(function(i){if("ok"==i.rst){const t=JSON.parse(i.dat);if("-1"==t.accStatus)e.css("display","").html(dicLAN.js_001_7),loginpw.val(""),a.lockfrm("none");else if("-2"==t.accStatus){const n=$(".logmod_makh").removeClass().attr("style","").addClass("logmod");n.html(t.html),n.find("[data-lang]").each((function(t,a){var n=a.getAttribute("data-lang");a.innerHTML=dicLAN[n]})),a.lockfrm("none")}else i.rst="makh_done"}$(t).trigger("makh_rst",[i,hash,btoa(encodeURIComponent(n.dat))])}))):(a.$activeTab.find("#regokmsg").css("display",""),a.$activeTab.find(".logmod__form").css("display","none"));a.lockfrm("none")}}))},login:function(t,a){a.submitBTNClick=null;var n=$(t).closest("form"),e=n.find(".errmsg"),i=n.find("#log-email"),s=n.find("#loginpw"),o=$("#token");if(a.validEmail(i),a.validRegPass(s),!(this.$activeTab.find(".err").length>0)){a.lockfrm("");$(t);var r=n.serializeArray();r.push({name:"token",value:o.val()},{name:"session",value:hash[0]}),setTimeout((function(){a.hwData("/dangnhap?XDEBUG_SESSION_START=154A5348",r,(function(t){if("ok"==t.rst){var n=JSON.parse(t.dat);if("-1"==n.accStatus)e.css("display","").html(dicLAN.js_001_7),s.val(""),a.lockfrm("none");else if("-2"==n.accStatus){const t=$(".logmod");t.html(n.html),t.find("[data-lang]").each((function(t,a){var n=a.getAttribute("data-lang");a.innerHTML=dicLAN[n]})),a.lockfrm("none")}else window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"loginok",origin:window.location.origin,html:n.html}},hash[2])}}))}),20)}},initialize:function(){var t=this;if(t.findElements().setState("log"==hash[4]?0:1).getActiveTab().addClickEvents(),$("#createacc").on("mousedown touchstart",(function(){t.submitBTNClick=$(this)})).click((function(){t.register(this,t)})),$("#recreateacc").click((function(){t.$activeTab.find("#regokmsg").css("display","none");var a=t.$activeTab.find(".logmod__form");a.css("display",""),a.find(".errmsg").css("display","none").html(""),a.find("#reg-email").off("blur").val(""),a.find("#captcha").off("blur").val(""),a.find("#user-pw").off("blur").val(""),a.find("#user-pw-repeat").off("blur").val(""),a.find("#captcha").off("blur").val(""),a.find(".refreshbtn").trigger("click")})),$("#login").on("mousedown touchstart",(function(){t.submitBTNClick=$(this)})).click((function(){t.login(this,t)})),$(".refreshbtn").click((function(){$(this.parentNode).css("display","none"),$(this.parentNode.parentNode).find("#captchaImg").html('<div class="spinner-border" style="margin-top: 5px;float: none;" role="status"><span class="sr-only">Loading...</span></div>');var a=$(this),n=$("#regform").serializeArray();n.push({name:"token",value:$("#token").val()}),t.hwData("/renewcaptcha?XDEBUG_SESSION_START=154A5348",n,(function(n){if("ok"==n.rst){var e=JSON.parse(n.dat);t.captfn(a,e),a.parent().css("display","")}}))})),"da_kichhoat_key"==hash[3]){$(".logmod__close").remove();const t=document.querySelector(".lang-flag"),a=function(){t&&t.parentNode&&t.parentNode.classList.contains("open")&&t.parentNode.classList.toggle("open")};document.addEventListener("click",(function(t){a()})),$("#lang_selector").on("click",".lang-flag",(function(t){t.preventDefault(),t.stopPropagation(),this.parentNode.classList.toggle("open")})).on("click",".lang",(function(){window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"lang_selector",origin:window.location.origin}},hash[2])})).next().on("click",(function(t){window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"banquyen",origin:window.location.origin}},hash[2])})).parent().show()}else $("body").on("click",".logmod__close",(function(){window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"closed",origin:window.location.origin}},hash[2])}));window.parent.location!=self.location&&(window.parent.postMessage({msgtype:"session",msgkind:hash[0],evtData:{evt:"loaded",origin:window.location.origin}},hash[2]),window.addEventListener?window.addEventListener("message",t.hwndMsg,!1):window.attachEvent&&window.attachEvent("onmessage",t.hwndMsg)),$("input.string,input.sumbit").keypress((function(a){if(13==a.which){a.preventDefault();var n=t.$activeTab.find("[tabIndex="+(+this.tabIndex+1)+"]");n.length||(n=t.$activeTab.find("[tabIndex=1]")),n.focus().click()}})),$("input#loginpw").bind("copy",(function(t){t.preventDefault()})),$(".logmod__wrapper").fadeIn()}};$(document).ready((function(){$("[data-lang]").each((function(t,a){var n=a.getAttribute("data-lang");a.innerHTML=dicLAN[n]})),LoginModalController.initialize(),$("script").remove()}));