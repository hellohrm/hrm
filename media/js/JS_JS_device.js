w0w.tabglobalJS.JS_JS_device=function(){"use strict";function t(t){var i,e,a,n={_lod:function(t){window.hasOwnProperty("GetIEVersion")&&11!=GetIEVersion()&&_gsC(deV.chartjs,"js",t,"chart.min.js")},_deviceDAT:{l:[],d1:[],d2:[],dI:[],maxY:function(){return this.d2.reduce((function(t,i){return t<i[1]&&(t=i[1]+10),t}),50)},devcap:function(t,i){const e=JSON.parse(t);if(!e||!e[2])return;const a=e[2].split("-");return[a,-9999==i?0:parseInt(a[8])/1e3,-9999==i?0:(parseInt(a[8])-parseInt(a[2]))/1e3]},init:function(t){for(var i,e=this,a=0;a<t.length;a++)t[a].wdmo.length<3||-9999==t[a].kind||(i=e.devcap(t[a].wdmo,t[a].kind),e.l.push(t[a].id),i&&(i.length>2&&e.d1.push([0,i[1]-i[2]]),i.length>1&&e.d2.push([0,i[1]]),i.length>0&&e.dI.push(i[0])))},add:function(t){try{const i=this,e=i.devcap(t.wdmo,t.kind);i.l.push(t.id),i.d1.push([0,e[1]-e[2]]),i.d2.push([0,e[1]]),i.dI.push(e[0]),a&&a.update()}catch(t){}},upt:function(t,i){try{const e=this,n=e.devcap(t.wdmo,t.kind);e.l[i]=t.id,e.d1[i]=[0,n[1]-n[2]],e.d2[i]=[0,n[1]],e.dI[i]=n[0],a&&a.update()}catch(t){}},rmv:function(t,i){var e=this;e.l.splice(t,i),e.d1.splice(t,i),e.d2.splice(t,i),e.dI.splice(t,i),a&&a.update()}},_deviceMEM:function(t,i){var e=this._deviceDAT;e.init(t);var r,o={type:"bar",data:{labels:e.l,datasets:[{maxBarThickness:50,label:"min",backgroundColor:"rgba(240, 140, 121, 1.0)",borderColor:"rgba(140, 140, 140, 0.0)",borderWidth:0,data:e.d1,fill:"-1",radius:0},{maxBarThickness:50,label:"max",backgroundColor:"rgba(121, 200, 121, 0.8)",borderColor:"rgba(140, 140, 140, 0.0)",borderWidth:0,data:e.d2,fill:"-1",line:!1,radius:0}]},options:{animation:{duration:300,onComplete:function(t){clearTimeout(r),r=setTimeout((function(){var i=t.chart.ctx,e=t.chart.scales.y,a=t.chart.config.data.datasets,n=[];i.textAlign="center",i.textBaseline="bottom",i.fillStyle="#007aff",i.strokeStyle="dark"==cS$.c0lor?"#4d4d4d":"#ddd",i.lineWidth=1;var r=[];a.forEach((function(o,c){var l=t.chart._metasets[c],m=c;l.data.forEach((function(t,o){var c,l;i.fillText(0==m?(n.push(t.$context.raw[1]),""):(c=t.$context.raw[1],l=c-n.shift(),"free: "+s(1e3*l)+" ("+d(100*l/c)+"%)"),t.x,t.y+20);var u=t.x+100;-1==r.indexOf(u)&&m<a.length-1&&(r.push(u),i.beginPath(),i.moveTo(u,e.top),i.lineTo(u,100),i.stroke())}))}))}),50)}},hover:{mode:null},events:[],plugins:{legend:{display:!1},tooltip:{enabled:!1}},responsive:!0,title:{display:!1,text:"Chart.js stackable with Min/Avg/Max"},scales:{x:{stacked:!0,time:{tooltipFormat:"DD T"},format:"HH mm",grid:{borderWidth:0},ticks:{callback:function(t,i,a){var n=parseInt(e.dI[i][8]),r=parseInt(e.dI[i][2]);return s(n)+" (used: "+s(r)+" ~ "+d(100*r/n)+"%)"}}},y:{stacked:!1,scaleLabel:{display:!0,labelString:"value"},display:!1,max:e.maxY.bind(e)}}}},c=i.getContext("2d");n._lod((function(){a=new Chart(c,o)}))}},s=function(t){return parseInt(t).toLocaleString(apisvr.a$.selected_language,{maximumFractionDigits:0})},d=function(t){return t.toLocaleString(apisvr.a$.selected_language,{minimumFractionDigits:2,maximumFractionDigits:2})};var r,o,c,l=t.ua>1?"UA":"noU",m={socIO:null,WDM:{},dbNa:"bHN0TUND",__:["d2Rtc19jb25u","X2NtZGRldg","SlNfZGV2aWNlX3NldHRpbmc"],___:["RTEVT","WDMS_CMD","DEV_JOIN_RMV"],lan:{},dogTimezone:[{id:2e3,tim:"2000",dis:"(Default)"},{id:0,tim:"-12",dis:"(-12:00) International Date Line West"},{id:1,tim:"-11",dis:"(-11:00) Coordinated Universal Time-11"},{id:2,tim:"-10",dis:"(-10:00) Hawaii"},{id:3,tim:"-9",dis:"(-09:00) Alaska"},{id:4,tim:"-7",dis:"(-08:00) Baja California"},{id:5,tim:"-7",dis:"(-07:00) Pacific Time (US &amp; Canada)"},{id:6,tim:"-8",dis:"(-08:00) Pacific Time (US &amp; Canada)"},{id:7,tim:"-7",dis:"(-07:00) Arizona"},{id:8,tim:"-6",dis:"(-07:00) Chihuahua, La Paz, Mazatlan"},{id:9,tim:"-6",dis:"(-07:00) Mountain Time (US &amp; Canada)"},{id:10,tim:"-6",dis:"(-06:00) Central America"},{id:11,tim:"-5",dis:"(-06:00) Central Time (US &amp; Canada)"},{id:12,tim:"-5",dis:"(-06:00) Guadalajara, Mexico City, Monterrey"},{id:13,tim:"-6",dis:"(-06:00) Saskatchewan"},{id:14,tim:"-5",dis:"(-05:00) Bogota, Lima, Quito"},{id:15,tim:"-4",dis:"(-05:00) Eastern Time (US &amp; Canada)"},{id:16,tim:"-4",dis:"(-05:00) Indiana (East)"},{id:18,tim:"-4",dis:"(-04:00) Asuncion"},{id:19,tim:"-3",dis:"(-04:00) Atlantic Time (Canada)"},{id:20,tim:"-4",dis:"(-04:00) Cuiaba"},{id:21,tim:"-4",dis:"(-04:00) Georgetown, La Paz, Manaus, San Juan"},{id:22,tim:"-4",dis:"(-04:00) Santiago"},{id:24,tim:"-3",dis:"(-03:00) Brasilia"},{id:25,tim:"-3",dis:"(-03:00) Buenos Aires"},{id:26,tim:"-3",dis:"(-03:00) Cayenne, Fortaleza"},{id:27,tim:"-3",dis:"(-03:00) Greenland"},{id:28,tim:"-3",dis:"(-03:00) Montevideo"},{id:29,tim:"-3",dis:"(-03:00) Salvador"},{id:30,tim:"-2",dis:"(-02:00) Coordinated Universal Time-02"},{id:31,tim:"-1",dis:"(-02:00) Mid-Atlantic - Old"},{id:33,tim:"-1",dis:"(-01:00) Cape Verde Is."},{id:34,tim:"1",dis:"(+01:00) Casablanca"},{id:35,tim:"0",dis:"(+00:00) Coordinated Universal Time"},{id:36,tim:"0",dis:"(+00:00) Edinburgh, London"},{id:37,tim:"1",dis:"(+01:00) Edinburgh, London"},{id:38,tim:"1",dis:"(+01:00) Dublin, Lisbon"},{id:39,tim:"0",dis:"(+00:00) Monrovia, Reykjavik"},{id:40,tim:"2",dis:"(+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna"},{id:41,tim:"2",dis:"(+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague"},{id:42,tim:"2",dis:"(+01:00) Brussels, Copenhagen, Madrid, Paris"},{id:43,tim:"2",dis:"(+01:00) Sarajevo, Skopje, Warsaw, Zagreb"},{id:44,tim:"1",dis:"(+01:00) West Central Africa"},{id:45,tim:"1",dis:"(+01:00) Windhoek"},{id:46,tim:"3",dis:"(+02:00) Athens, Bucharest"},{id:47,tim:"3",dis:"(+02:00) Beirut"},{id:48,tim:"2",dis:"(+02:00) Cairo"},{id:49,tim:"3",dis:"(+02:00) Damascus"},{id:50,tim:"3",dis:"(+02:00) E. Europe"},{id:51,tim:"2",dis:"(+02:00) Harare, Pretoria"},{id:52,tim:"3",dis:"(+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius"},{id:53,tim:"3",dis:"(+03:00) Istanbul"},{id:54,tim:"3",dis:"(+02:00) Jerusalem"},{id:55,tim:"2",dis:"(+02:00) Tripoli"},{id:56,tim:"3",dis:"(+03:00) Amman"},{id:57,tim:"3",dis:"(+03:00) Baghdad"},{id:58,tim:"3",dis:"(+02:00) Kaliningrad"},{id:59,tim:"3",dis:"(+03:00) Kuwait, Riyadh"},{id:60,tim:"3",dis:"(+03:00) Nairobi"},{id:61,tim:"3",dis:"(+03:00) Moscow, St. Petersburg, Volgograd, Minsk"},{id:62,tim:"4",dis:"(+04:00) Samara, Ulyanovsk, Saratov"},{id:64,tim:"4",dis:"(+04:00) Abu Dhabi, Muscat"},{id:65,tim:"5",dis:"(+04:00) Baku"},{id:66,tim:"4",dis:"(+04:00) Port Louis"},{id:67,tim:"4",dis:"(+04:00) Tbilisi"},{id:68,tim:"4",dis:"(+04:00) Yerevan"},{id:70,tim:"5",dis:"(+05:00) Ashgabat, Tashkent"},{id:71,tim:"5",dis:"(+05:00) Yekaterinburg"},{id:72,tim:"5",dis:"(+05:00) Islamabad, Karachi"},{id:76,tim:"6",dis:"(+06:00) Nur-Sultan (Astana)"},{id:77,tim:"6",dis:"(+06:00) Dhaka"},{id:79,tim:"7",dis:"(+07:00) Bangkok, Hanoi, Jakarta"},{id:80,tim:"7",dis:"(+07:00) Novosibirsk"},{id:81,tim:"8",dis:"(+08:00) Beijing, Chongqing, Hong Kong, Urumqi"},{id:82,tim:"8",dis:"(+08:00) Krasnoyarsk"},{id:83,tim:"8",dis:"(+08:00) Kuala Lumpur, Singapore"},{id:84,tim:"8",dis:"(+08:00) Perth"},{id:85,tim:"8",dis:"(+08:00) Taipei"},{id:86,tim:"8",dis:"(+08:00) Ulaanbaatar"},{id:87,tim:"8",dis:"(+08:00) Irkutsk"},{id:88,tim:"9",dis:"(+09:00) Osaka, Sapporo, Tokyo"},{id:89,tim:"9",dis:"(+09:00) Seoul"},{id:92,tim:"10",dis:"(+10:00) Brisbane"},{id:93,tim:"10",dis:"(+10:00) Canberra, Melbourne, Sydney"},{id:94,tim:"10",dis:"(+10:00) Guam, Port Moresby"},{id:95,tim:"10",dis:"(+10:00) Hobart"},{id:96,tim:"9",dis:"(+09:00) Yakutsk"},{id:97,tim:"11",dis:"(+11:00) Solomon Is., New Caledonia"},{id:98,tim:"11",dis:"(+11:00) Vladivostok"},{id:99,tim:"12",dis:"(+12:00) Auckland, Wellington"},{id:100,tim:"12",dis:"(+12:00) Coordinated Universal Time+12"},{id:101,tim:"12",dis:"(+12:00) Fiji"},{id:102,tim:"12",dis:"(+12:00) Magadan"},{id:103,tim:"13",dis:"(+12:00) Petropavlovsk-Kamchatsky - Old"},{id:104,tim:"13",dis:"(+13:00) Nuku'alofa"},{id:105,tim:"13",dis:"(+13:00) Samoa"}]},u=function(){o.find(".refresh_devstas").each((function(t,i){h([$(i),JSON.parse(o.__dbDAT[t].wdmo),t+1],0,o.__dbDAT)}))},h=function(t,i,e){if(!t[1]||0==t[1].length||!t[1][2])return;const a=t[2]-1,n=e[a],r=t[1][2].split("-"),o="btn-primary",c=(r.length,t[0].find(".refsh-tim")),l=function(t,i){return t.find("td:nth-child("+(i+1)+")")},m=t[0].closest("tr").next(),u=l(m.next().next(),r.length<18?1:t[2]),f=l(u.closest("tr").next(),r.length<18?1:t[2]);if(t[0].removeClass(o+" d-none disabled"),1==i?t[0].addClass(o):r.length<18&&(c.text(""),u.text("0"),f.text("0"),l(m.next(),1).html("")),r.length>18){var p=parseInt(r[16]),g=parseInt(r[17]),_=new Date(1e3*(p+1e9)+g);if(c.text(_.toISOString().slice(0,10)+_.toGMTString().slice(16,25)),v=h.calcMaxAt,b=0,k=!v||(b=new Date-v)>1e3,v=new Date,k?(h.calcMaxAt=v,console.log(b+" :reCalc "+v.getTime()),h.rstMAX=e.reduce((function(t,i){if(-9999!=i.kind){const e=i.wdmo.split("-");parseInt(e[6])>t[0]&&(t[0]=parseInt(e[6])),parseInt(e[7])>t[1]&&(t[1]=parseInt(e[7])),parseInt(e[13])>t[2]&&(t[2]=parseInt(e[13]))}return t}),[0,0,0])):console.log(b+" :keepOld "+v.getTime()),u.text(r[4]),f.text(r[5]),h.rstMAX)l(m.next(),t[2]).html(function(t,i){const e=function(i,e,a,n){if(n>0){var r=a*parseInt(t[i])/n,o=a*parseInt(t[e])/n;return i=t[i],e=t[e],[[r,a],[o,a],[s(i),s(e),0==parseInt(i)?0:d(100*parseInt(e)/parseInt(i))]]}return[[0,a],[0,a],[i=0,e=0,0]]},a=e(6,1,80,i[0]),n=e(7,0,50,i[1]),r=e(13,12,20,i[2]);return'<svg width=180 height=150 viewbox="0 0 30 30"><path class="circle-bg"  stroke-dasharray="'+a[0].join(",")+'"    d="M17 2.26759            a 12.7324 12.7324 0 0 1 0 25.4648      a 12.7324 12.7324 0 0 1 0 -25.4648"></path><path class="circular-chart orange circle" stroke-dasharray="'+a[1].join(",")+'"    d="M17 2.26759      a 12.7324 12.7324 0 0 1 0 25.4648      a 12.7324 12.7324 0 0 1 0 -25.4648"></path><text x="1" y="1.3" class="percentage">    <tspan x="-1" dy="1.2em">use: '+a[2][1]+" ("+a[2][2]+'%)</tspan>    <tspan x="-1" dy="1.2em">total: '+a[2][0]+'</tspan>    <tspan x="-1" dy="1.2em">Finger capacity</tspan></text><path class="circle-bg" stroke-dasharray="'+n[0].join(",")+'"    d="M17 7.042246      a 7.9577 7.9577 0 0 1 0 15.9155      a 7.9577 7.9577 0 0 1 0 -15.9155"></path><path d="M17.2 2L12 8" stroke="hotpink" stroke-width="0.2" stroke-dasharray="1"></path><path d="M1,8 h11" stroke="hotpink" stroke-width="0.2" stroke-dasharray="1"></path><circle cx="17" cy="2.4" r="0.6" fill="hotpink"></circle><path class="circular-chart green circle" stroke-dasharray="'+n[1].join(",")+'"    d="M17 7.042246      a 7.9577 7.9577 0 0 1 0 15.9155      a 7.9577 7.9577 0 0 1 0 -15.9155"></path><path d="M10 20L17 7.042246" stroke="hotpink" stroke-width="0.2" stroke-dasharray="1"></path><path d="M1,20 h10" stroke="hotpink" stroke-width="0.2" stroke-dasharray="1"></path><circle cx="17" cy="7.042246" r="0.6" fill="hotpink"></circle><text x="1" y="20" class="percentage">    <tspan x="-1" dy="1.2em">use:'+n[2][1]+" ("+n[2][2]+'%)</tspan>    <tspan x="-1" dy="1.2em">total: '+n[2][0]+'</tspan>    <tspan x="-1" dy="1.2em">User capacity</tspan></text><path class="circle-bg stroke-dasharray="'+r[0].join(",")+'"    d="M17 11.816898      a 3.1831 3.1831 0 0 1 0 6.3662      a 3.1831 3.1831 0 0 1 0 -6.3662"></path><path class="circular-chart blue circle" stroke-dasharray="'+r[1].join(",")+'"    d="M17 11.816898      a 3.1831 3.1831 0 0 1 0 6.3662      a 3.1831 3.1831 0 0 1 0 -6.3662"></path>'+(0==r[2][1]?'<text x="17.2" y="17" class="percentage invalid">face invalid</text><path d="M17 15L17 11.816898" class="circle-bg" stroke-width="0.2"></path>':'<text x="18" y="12" class="percentage">    <tspan x="20" dy="1.2em">use</tspan>    <tspan x="19" dy="1.2em">'+r[2][1]+" ("+r[2][2]+'%)</tspan>    <tspan x="19" dy="1.2em">total: '+r[2][0]+'</tspan>    <tspan x="19" dy="1.2em">Face capacity</tspan></text><path d="M18 15L17 11.816898" stroke="hotpink" stroke-width="0.2" stroke-dasharray="1"></path>')+'<circle cx="17" cy="11.816898" r="0.6" fill="hotpink"></circle></svg>'}(r,h.rstMAX))}var v,b,k;if(n.heavyMOD="",t[1][3]){var w=JSON.parse(t[1][3]),x=t[0].closest("tbody").find(".mcc_plan"),T=["Cloud Free"],D='<span class="badge badge-success">Free</span>';if(x.length>0){if("2"==w[1]&&T.push("Android local"),w[0]&&2==w[0].length){const t=new Date(new Date(w[0][0]).getTime()+864e5*w[0][1]);new Date<t&&(D=t.toISOString().split("T")[0],T[0]='<span class="badge badge-info">Cloud Premium</span>',n.heavyMOD="1")}$(x[0]).find("td:eq("+a+")").html(T.join("  <br class='my-1'/> ")),$(x[1]).find("td:eq("+a+")").html(D)}}},f=function(t){t.children().last().addClass("kick_div").html('<h2 class="ti-comment-alt" style="color:red"></h2><h4>OPPS</h4><div>Device off monitor by it owner</div><br/><div>Vui long click delete button de xac nhan hoan tat kick off session</div>')},p={col0:function(t,i){var e,a=1;o.find("tr td:last-child").each((function(n,s){const d=$(s),r=d.attr("f");r&&d.html(p[r](t)),void 0===i&&d.hasClass("refresh_devstas")?t?e=[d.find(".btn"),JSON.parse(t.wdmo),1]:d.addClass("disabled"):d.hasClass("att_chrt")?d[(t?"remove":"add")+"Class"]("blank"):d.hasClass("svg_ring")?t||(d.empty(),a=2):2==a&&d.text("0"),d.hasClass("kickoff")&&(t?-9999==t.kind&&f(d):d.children().last().removeClass("kick_div").html(""))})),e&&h(e,0,o.__dbDAT)},coln:function(t,i){var e,a=1;o.find("tr td:last-child").each((function(n,s){var d,r=$(s),o=r.attr("colspan"),c=r.attr("f");o?r.attr("colspan",parseInt(a)+1):(r.index()>a&&(a=r.index()),(d=c?r.clone().html(p[c](t)):$(s.outerHTML)).hasClass("kickoff")&&d.children().last().removeClass("kick_div").html(""),r.parent().append(d));void 0===i&&r.hasClass("refresh_devstas")&&(e=[r.find(".btn"),t?JSON.parse(t.wdmo):"",a+1])})),e&&h(e,0,o.__dbDAT)},id:function(t){return t&&t.id||"0"},ten:function(t,i){return'<div class="comparison-item"><div><span class="comparison-item-title">'+(t&&t.ten||"SAMPLE")+'</span><span class="comparison-item-titleuser ti-eye"><span class="eye-moter">0</span></span></div><div class="inline-block position-relative"><button style="padding-left:6px;padding-right:6px" class="btn btn-warning py-1 chinhsua" '+(t?"":"disabled")+' data-toggle="dropdown" type="button"><i class="fa fa-wrench"></i></button></div>\n\t<div class="btn text-secondary mcc-statux" tok="'+(t&&t.tok||"NEWTOK")+'"><i class="fa fa-circle"></i>&nbsp;<span>offline</span></div></div>'},DeviceName:function(t){return'<span class="text-dark font-weight-semibold">'+(t&&t.DeviceName||"ZKTECO")+"</span>"},serno:function(t){return t&&t.serno||"xxxxxxxxxx"},wdms:function(t){return t&&t.wdms||"-"},rtevt:function(t){if(!t)return"-"},rtevt_sub:function(t,i){var e=o.__dbDAT&&o.__dbDAT[t];return e&&(e.rtevt=1==i),1===i?'<i style="color:limegreen" class="fa fa-check fa-lg"></i>':"-"},timezone:function(t){if(!t)return"-"},timezone_sub:function(t,i){var e,a=m.dogTimezone.filter((function(t){return t.id==i}));return a.length>0?((e=o.__dbDAT&&o.__dbDAT[t])&&(e.time_zone=a[0].tim,e.timezone=a[0].id),a[0].dis):"-"},isatt:function(t){if(!t)return"-"},isatt_sub:function(t,i){var e=o.__dbDAT&&o.__dbDAT[t];return e&&(e.isatt=1==i),1===i?'<i style="color:limegreen" class="fa fa-check fa-lg"></i>':"-"}},g=function(t){"noU"==l&&st("setItem",m.dbNa,btoa(window[st0("1")](JSON.stringify(t)))),o[(t.length>0?"remove":"add")+"Class"]("empty_mcc"),gloEVTs.dumeTHIETBI.f1.bind(["thietbi",t])()},_=[0,0,0,24,25,new Date(new Date),28,null],v={fmt:12,atLOAD:new Date,hwnd:-1,timeMaker:null,_rtevt_sigcard:function(t){alert("here")},drawRULER:function(t){clearTimeout(this.hwnd),t||(t=o.closest(".comparison-table").next());var i=[],e=_[3],a=_[4],n=Math.floor((o.height()-e)/a),s=e+(n-2)*a;console.log(o.height()+";"+(e+n*a));var d=_[5],r=((new Date).setHours(0,0,0,0),d.getHours()),c=d.getMinutes();d.getSeconds();if(0==_[2]||_[0]+2*_[4]>_[2]){var l=2*a*24,m=n*a,u=2*a*r;l-u<m&&(u=l-m+2*a);for(var h=0;h<24;h++){var f=":00"+(12==this.fmt?" <small> "+(h<this.fmt?"A":"P")+"M</small>":""),p=12==this.fmt?0==h||12==h?12:h%this.fmt:pad$(h,2);i.push('<div class="time">'+p+f+'</div><div class="time"><small>'+p+":30</small></div>")}_[1]=-1*u,_[2]=s;var g=t.css("height",n*a+a+5).find(".hour_list").css({top:_[1],height:_[2]}).html(i.join(""));_[7].css({top:_[1]-_[4]}),this.timeMaker=g.prev(),t.find(".rtedog").css("height",s)}_[0]=2*a*(r+c/60)+_[1]+_[6],this.timeMaker.css("top",_[0]),t.find(".rtvtitle").html(_[5].toLocaleTimeString()),this.st$rt()},in$t:function(){clearTimeout(this.hwnd);var t=this,i=o.closest(".comparison-table").next();i.find('input[name="mod24"]').change((function(){v.fmt=this.checked?24:12,m[m.__[2]].mod24=v.fmt,st("setItem",m.__[2],btoa(window[st0("1")](JSON.stringify(m[m.__[2]])))),_[2]=0,v.drawRULER(i)})).prop("checked",24==m[m.__[2]].mod24),i.on("click",".btn_viewall",(function(e){_[5]=new Date(_[5].setHours(_[5].getHours()+1));var a=2*(_[5].getHours()+(_[5].getMinutes()>30?.5:0));_[7].find("tr:nth-child("+(a+3)+")");t.drawRULER(i)}));for(var e=[],a=0;a<=50;a++)e.push("<tr><td>-</td></tr>");_[7]=i.find("table"),_[7].find(".realtime-row").on("click",".btn",v._rtevt_sigcard).html(e.join("")),this.fmt=m[m.__[2]].mod24,this.drawRULER(i)},job:function(){console.log("time_ruler: "+(new Date).getTime());o.closest(".comparison-table").next();_[0]+=1,this.timeMaker.css("top",_[0]);var t=(o.height()-27)/25;t>Math.floor(t)&&(t=Math.floor(t)+1),console.log(o.height()+";"+(27+25*t))},tick:function(t){clearTimeout(this.hwnd);var i=new Date,e=Math.abs(_[5]-i),a=2*(i.getHours()+(i.getMinutes()>30?.5:0));_[7].find("tr:nth-child("+(a+3)+")");Math.floor(e/1e3/60)>30&&(_[2]=0),_[5]=i,this.drawRULER(),console.log("tick: function (s)")},st$rt:function(t,i){clearTimeout(this.hwnd);var e=function(){v.tick(t)};this.hwnd=setTimeout(e,1e3*(t||60)),1===i&&e()}};this.init=function(s,d,b,k,w){r=b,i=s.find(".init_data"),e=JSON.parse(atob(i.text())),m.lan=$.extend(JSON.parse(e.lan),aLAN),i.remove(),$(".sockmsg").on("click",(function(t){t.preventDefault(),$(".talk-bubble").addClass("pulsate").delay(2e3).removeClass("pulsate")})),s.on("theme",(function(t,i,e,n,d,r,o,c){alert("here theme"),s.trigger("sub_theme"),a&&a.update()})).on(atob("cnRldnRz").toUpperCase(),(function(t,i,e){if(i&&!(i.length<2)){var a=new Date(new Date(i[1].replace(/-/g,"/"))),n=2*(a.getHours()+(a.getMinutes()>30?.5:0)),s=_[7].find("tr:nth-child("+(n+3)+")"),d=s.data("cntlog")||0;d++,s.data("cntlog",d),s.find("td:first").html('<div class="btn text-small"><span class="fa fa-id-card-o rtevt_sigcard"></span><span class="ml-1">('+d+")</span></div>")}})).find("[data-lang]").each((function(t,i){var e=i.getAttribute("data-lang");$(i).html(_La$N(e,m.lan))}));var x=function(){var t=o.width(),i=s.width(),e="auto",a="add";i<t&&(e=i,a="remove"),o.parent()[a+"Class"]("ps-hieu-active-x").css("width",e),m.mcc_lst_scroll&&m.mcc_lst_scroll.update()},T=function(i){srclocked(!0),_gsC(srcp$f+"/media/utils/jsc/tikestep_device.js"+src$id,"js",(function(e){c||(window.gloEVTs&&(gloEVTs.giaidoan2=null),c=new _o$h.tikestep_device(t,s,m)),i()}),"tikestep_device.js")},D={moi:function(t,i){var e=o.__dbDAT,a=e.length;if("new_localconn_chk"===i){for(var s=0;s<a;s++)if(t[2]==e[s].serno||JSON.parse(e[s].wdmo)[0]==t[1])return"1";return"2"}e.push(t),a>0?p.coln(t,1):p.col0(t,1),n._lod((function(){n._deviceDAT.add(t)})),u(),_[2]=0,v.drawRULER(),g(e),x()},sua:function(t,i){var e;o.__dbDAT[i]=t,o.find("tr td:nth-child("+(i+2)+")").each((function(a,n){var s=$(n),d=s.attr("colspan"),r=s.attr("f");d||r&&("ten"==r?s.find("span.comparison-item-title").html(t[r]):s.html(p[r](t))),s.hasClass("refresh_devstas")&&(e=[s.find(".btn"),t?JSON.parse(t.wdmo):"",i+1])})),g(o.__dbDAT),n._deviceDAT.upt(t,i),e&&h(e,1,o.__dbDAT),_[2]=0,v.drawRULER()},mcc_onoffline:function(t){},refresh_devstas:function(t){o.find("td.refresh_devstas > .btn").eq(t).trigger("click")}},y=function(t,i,e,a,n){T((function(){c._Device({dat:JSON.parse(JSON.stringify(i)),txt:n},t,o.__dbDAT.reduce((function(t,i){return t.push({id:i.id,serno:i.serno,kind:i.kind,ten:i.ten,wdms:i.wdms}),t}),[]),e,a)}))};function C(){const t=$.Deferred();return C.raw?t.resolve():(s.trigger("get",[srcp$f+"/media/utils/device_user.html"+src$id,function(i){var e=this;s.trigger("",[i,!1,$.Deferred().done((function(){const i=$(adCS(arguments[0],e));for(var a=i.length-1;a>-1;a--)if(i[a].classList&&i[a].classList.contains("device-user_get__content")){C.raw=i[a].outerHTML;break}C.dynjs=arguments[3].splice(0,1),apisvr.a$.scod(arguments[3].join("")),t.resolve()}))])}]),t)}o=s.find(".mcc-list-container>table").on("click",".refresh_devstas .btn",(function(t){if($(this).hasClass("disabled"));else if(o.__dbDAT.length>0){var i=$(this).parent().data("datI"),e=o.__dbDAT[i-1];if(!e||!e.tok)return;srclocked(!0),$(t.target).trigger("X2NtZGRldg",[50,e,i])}})).on("rst_devstas",(function(t,i,e,a,s,d){if(d)return void d.bind([].slice.apply(arguments,[1,5]))();if("OK"!=i)return;h.calcMaxAt=new Date(1659427921374);var r=JSON.parse(a.wdmo),c=$(t.target);c=c.hasClass("btn")?c:c.parent();const l=e[3]&&"localconn"==e[3][0]?e[0][4][6]:e[4][6];r[2]!=l&&(r[2]=l,a.wdmo=JSON.stringify(r),g(o.__dbDAT),n._deviceDAT.upt(a,s-1),h([c,r,s],1,o.__dbDAT))})),function(){var t;if("noU"==l&&(t=st("getItem",window[st0("1")](m.dbNa)))&&(t=JSON.parse(window[st0("2")](atob(t)))),o.__dbDAT=[],t&&t.length>0){o.__dbDAT=t,t[0].olsta=0,p.col0(t[0]);for(var i=1;i<t.length;i++)t[i].olsta=0,p.coln(t[i])}else p.col0();o[(o.__dbDAT.length>0?"remove":"add")+"Class"]("empty_mcc")}(),Main.isMobile()||(m.mcc_lst_scroll=new PerfectScrollbar(o.parent()[0],{suppressScrollY:!0})),w.EVTS.RZ_EVT=x,n._deviceMEM(o.__dbDAT,o.find(".deviceMEM")[0]),x(),m.fnHANDSHAKE=function(t,i){m.fnHANDSHAKE.currMSG=t[2];var e,a,n,s=(n=$(""),o.find(".mcc-statux").each((function(s,d){var r=$(d);if(-1!=t[1].indexOf(r.attr("tok"))){var c=(n=r).closest("td").index();o.find("tr td:nth-child("+(c+1)+")").each((function(n,s){var d=$(s),r=d.attr("f");if(p[r+"_sub"]&&t[4].length>0&&d.html(p[r+"_sub"](c-1,t[4][d.attr("ixs")])),d.hasClass("refresh_devstas")){const e=JSON.parse(o.__dbDAT[c-1].wdmo);i&&(e[3]=i[4]&&i[4][5]||JSON.stringify([])),t[5]&&(e[2]=t[5]),a=[d.data("datI",c).find(".btn"),e,c]}d.hasClass("kickoff")&&(e=[c,d])}))}})),n),d=function(i){var e=s.parent().data("statux"),a="text-secondary";return"online"==t[2]&&(a="text-success",i=1),(!e||e&&e[0]!=i)&&(s.removeClass("text-secondary text-success").addClass(a).find("span").html(t[2]),s.parent().data("statux",[i]).find(".comparison-item-titleuser").html('<span class="eye-moter">'+t[3]+"</span>"),$(document).trigger("click")),i};switch(t[0]){case"sigLIVE":if(a&&a[1]){const t=d(0);o.__dbDAT[a[2]-1].olsta=t,h(a,t,o.__dbDAT)}break;case"usr":s.parent().find(".comparison-item-titleuser").html('<span class="eye-moter">'+t[3]+"</span>");break;case"kickoff":if(e){var r=o.__dbDAT[e[0]-1];-9999!=r.kind&&(r.kind=-9999,D.sua(r,e[0]-1)),t[2]="offline",d(-9999),f(e[1]),u()}}},o.__dbDAT.length>0&&T((function(){var t,i=window.sockjo?1:200,e=function(){clearTimeout(t),t=-1,window.sockjo?s.trigger("d2Rtc19jb25u",[o.__dbDAT,D.mcc_onoffline]):t=setTimeout(e,i)};t=setTimeout(e,i)})),o.find(".xyzku .btn").on("click",(function(t){$(t.currentTarget).find("i[class^=ti-angle]").toggleClass("ti-angle-up ti-angle-down").closest("tbody").toggleClass("state_colai")})),o.find(".head-cmd").on("click",".btn:not(.dropdown-toggle)",(function(t){t.preventDefault();var i=t.currentTarget,e=$(i),a=o.__dbDAT,s=e.closest("td").index();if(e.hasClass("chinhsua")){if(!i.__menu){i.__menu=s;const t=e.closest(".comparison-table"),d=t.find(">.lang-lst").clone().insertAfter(e).off().on("click","a",(function(e){e.preventDefault();const s=o.__dbDAT[i.__menu-1],d=e.currentTarget.getAttribute("mnu");switch(d){case"1":{const t=101==s.kind?"js_009_18|2":"js_009_14",a=$(e.currentTarget).closest("tr").find('[data-lang="'+t+'"]');y(D.sua,s,i.__menu-1,s.kind,a.text().trim());break}case"15":case"20":case"1004":{const a=t.find("td.refresh_devstas > .btn");if(0==a.length)return;srclocked(!0),devDlg(1,_La$N("js_001_27",aLAN)+".. -> "+$(e.currentTarget).find("[data-lang]").text()+"?",null,{cb:function(t){srclocked(!1)}}).show().done((function(t){1==t&&(srclocked(!0),$(a[i.__menu-1]).trigger("X2NtZGRldg",[d,s,i.__menu]))}));break}case"3":T((function(){c._confirmDEL(1,(function(t,e){if(!t)return;const d=JSON.parse(s.wdmo);"localconn"==e(s.tok,1,s.serno,d)&&delete m.WDM[btoa(s.serno+";"+d[0])],a.splice(i.__menu-1,1),n._deviceDAT.rmv(i.__menu-1,1),g(a),0==s.kind&&gloEVTs.elUI_localDEV&&gloEVTs.elUI_localDEV("fcmdev",[s,"1"]),a.length>0?(o.find("tr td:nth-child("+(i.__menu+1)+")").each((function(t,i){var e=$(i),a=e.attr("colspan");a?e.attr("colspan",parseInt(a)-1):e.remove()})),x(),u()):0==a.length&&p.col0(),x(),_[2]=0,v.drawRULER(),toastMsg("HOAN TAT XOA THIET BI","success")}))}))}}));d.parent().on("show.bs.dropdown",(function(t){i.__menu=$(this).closest("td").index();const e=$(this).next().hasClass("text-success")?"remove":"add",a=d.find("a[mnu]");for(var n=0;n<a.length;n++)parseInt(a[n].getAttribute("mnu"))>3&&$(a[n]).parent()[e+"Class"]("d-none")}))}}else if(e.hasClass("xoabo"));else if(e.hasClass("mcc-statux"))for(var d in m.WDM)m.WDM.hasOwnProperty(d)})).on("click",".themmoi",(function(t){var i=$(t.currentTarget),e=1e3;if(i.hasClass("downattlog")||i.hasClass("mngusrs")){srclocked(!0);const e=$("<div><div>").appendTo(o);if(e.__dbDAT=o.__dbDAT.filter((function(t){return 1==t.olsta})),0==e.__dbDAT.length)return void admin$.popup({a:"d",m:'<i class="ti-face-sad text-danger mr-2"></i>'+(m.lan.js_009_32||"No devices. Please check and try again.")}).one("shown.bs.modal",(function(){srclocked(!1)})).modal("show").find("#popupdone").remove();const a=$(t.currentTarget).clone(),n="<span>"+a.children().last().remove().text().trim()+"</span>",c=[a.html()+n,"on"];i.hasClass("mngusrs")&&(c[0]="dev-user-get",c[1]="one");const l=(new Date).getTime(),u=function(t){const i=(new Date).getTime()-l;console.log(t,i>0?i>3e4?Math.floor(i/3e4)+"s":i+" ms":"")},h=gloEVTs.giaidoan2(t,c[0],e,c[1]);if(i.hasClass("mngusrs")){const t=h.find(".modal-dialog").addClass(" js_js_att mngusrs all_usr_inf").css({perspective:"600px"}),i=t.find(".modal-content").css({height:"auto"}),a=(s[0].getBoundingClientRect(),1),n=$.Deferred();h.one("shown.bs.modal",(function(){i.addClass("container_x"+(0==a?" fuk_desktop":"")).css({height:"auto",transform:"rotateX(50deg) scale(0.7)",overflow:"hidden"}),t.parent(),0==a?admin$.DEV((function(){u("admin$.DEV"),srclocked(!1),n.resolve()})):n.resolve()})).one("DOWN_ATTLOG_END",(function(t,i){const e=$(this);$.when(C(),n).done((function(t,a){const n=Main._devget.createUPL({lan:m.lan,_tabId:r,$mainO:d("dbEngine"),dynjs:C.dynjs.join(""),mobiui:$(window).width()<768?1:0,c_$_b:function(t){if("dev_chg"==t)return[o.__dbDAT,D]}});u("sWIX.init"),n.init(s,e,C.raw,i)}))})).one("hidden.bs.modal",(function(){delete e.__dbDAT,e.find("*").off().unbind().removeData(),e.empty(),e.remove()}))}else h.on("click","actionline .btn",(function(t){const i=h.find(".modal-body");i.find("*").off().unbind().removeData(),i.empty(),h.trigger("shown.bs.modal")}))}else i.hasClass("menuitem_wdms")&&(e=0),i.hasClass("connlocal")&&(e=101),0!=e&&101!=e||(srclocked(!0),y(D.moi,{id:1,DeviceName:"",ten:"ZK-DEV",serno:"",pkey:"",pubkey:"2TCVkVIIudv5wOl5qWLx8px69XtXvxkDJu9lzj65tMIobn+C460EBlpx3fIIEl00",kind:e,wdms:0==e?"":"192.168.1.201",baku:[]},-1,e,i.text().trim()))})).on("show.bs.dropdown",(function(){}));var A=st("getItem",m.__[2]);m[m.__[2]]=A?JSON.parse(window[st0("2")](atob(A))):{mod24:12},v.in$t(),srclocked(!1)},this.dispose=function(){a&&a.destroy(),m.socIO&&m.socIO.close(),$("#tabBODY_"+r).trigger("dispose")},this.mod=function(t){alert(t)}}return t.prototype.comm1={exS:function(t){},uplog:"html"},t}();