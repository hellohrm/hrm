var tikestep=function(){"use strict";return function(t,e,n){t.find("#step-2").on("click","kbd:not(.frst)",function(e){var n=e.target.tagName.toLowerCase();if("kbd"==n||"span"==n){e.preventDefault(),e.stopPropagation(),$(document).trigger("click.bs.dropdown.data-api",{causeby:"clearmenu"});var o=$("span"==n?e.target.parentNode:e.target),i=e.target.getBoundingClientRect(),s=t.find(".s2_fuckdrowdown"),a=t.find(".s2_fuckdrowdown_body");a.find(".menuitems").each(function(t,e){e.style.display=e.className.indexOf(o[0].className)>=0?"":"none"}),a.detach().appendTo(o),s.detach().appendTo(o);var r=function(){if((s=o.find(".s2_fuckdrowdown")).length>0){a=o.find(".s2_fuckdrowdown_body");var t=s.dropdown().data()["bs.dropdown"],e=t._getPopperConfig(),n=function(t){var e=30;i.right<t.popper.width&&(e=t.popper.width-i.right+30),a.find("[class^=arrow]").css("right",e)};e.onCreate=function(t){n(t)},e.onUpdate=function(t){n(t)},e.modifiers.offset={offset:"20,0"},t._getPopperConfig=function(){return e},$(t.constructor._getParentFromElement(s[0])).one("hidden.bs.dropdown",function(t){s.dropdown("dispose")}),s.dropdown("toggle")}else setTimeout(r,20)};setTimeout(r,20)}else if("a"==n){var l=$(e.target).find(":input"),c=$(e.target).closest("kbd").find("span"),f=apisvr.a$.trim($(e.target).attr("f")),p=apisvr.a$.trim(l.length>0?l.val():$(e.target).text()),u=!1;if(""==f)p.length>0&&p!=apisvr.a$.trim(c.text())&&(c.html(p),u=!0);else{if(c.attr("f")!=f){var h=$(e.target).closest("kbd").parent().find(".fdata>span[f='"+f+"']"),g=apisvr.a$.trim(c.text());"b"!=f&&h.attr("f",c.attr("f")).html(""==g?"&nbsp;":g),u=!0}"b"==f?c.html("&nbsp;"):c.html(""==p?"&nbsp;":p),c.attr("f",f)}u&&(srclocked(!0),setTimeout(function(){m(d($(e.target).closest("kbd").parent().find("kbd>span"))),srclocked(!1)},20))}});var o,i,s=function(t,e){return 0!=apisvr.a$.trim(t).length&&(e.i=t,!0)},a=function(t,e){return e.n=t,!0},r=function(t,e,n){if(t.length<10)return!1;var o=dayjs(t,n);return e.t=o.$d,o.isValid()},l=function(t,e){return!0},c="<a class='close' onclick='javascript:$(this).closest(&quot;.popover&quot;).popover(&quot;hide&quot;).data(&quot;bs.popover&quot;).element.showBack = false;'>&times;</a>",d=function(e){e||(e=t.find("#step-2  .log-ctrl kbd>span"));for(var o=[],i=$(e[0]),c=apisvr.a$.trim($(e[e.length-1]).text()),d=[],f=apisvr.a$.trim(i.text()),p=1;p<e.length-1;p++)switch($(e[p]).attr("f")){case"i":d.push(s);break;case"n":d.push(a);break;case"t":d.push(r);break;default:d.push(l)}"tab"==f&&(f=/\t/),$.each(n.showinvisibles.val().split(/\r?\n/),function(t,e){var n=e.split(f);if(n.length>1)for(var i=!0,s={},a=0;a<n.length;a++)if(a<d.length&&!d[a](n[a],s,c)){i=!1;break}i&&s.hasOwnProperty("i")&&s.hasOwnProperty("t")&&o.push(s)}),t.find("span.logok").html(o.length);var u=t.find(".log-sample kbd.frst"),h=new Date,g=new Date;o.length>0?(h=o[0].t,g=o[0].t,o[0].hasOwnProperty("i")&&(u[0].innerHTML=o[0].i),u[1].innerHTML=o[0].hasOwnProperty("n")&&""!=o[0].n?o[0].n:"&nbsp;",o[0].hasOwnProperty("t")&&(u[2].innerHTML=dayjs(o[0].t).format(c))):u.html("&nbsp;");var v=o.reduce(function(t,e){return t[e.i]=t[e.i]||[],t[e.i].push(e),h>e.t&&(h=e.t),g<e.t&&(g=e.t),t},{}),m=[];return $.each(v,function(t,e){var n=e[0],o=e.sort(function(t,e){return t.t-e.t});m.push({acno:t,ten:n.n,logs:e.length,aLogs:$.map(o,function(t,e){return t.t}),minL:dayjs(o[0].t).format(c),maxL:dayjs(o[o.length-1].t).format(c)})}),t.find("span.totalemps").html(m.length),n.allLOGs=[[m,h,g],null,{f:$.map(e,function(t,e){return $(t).attr("f")}),l:o.length,e:m.length,s:f,tf:c,p:"",p0:"",p1:"",p2:"",p3:"",p4:"",p5:"",p6:"",p7:"",p8:"",p9:""}],n.stepHis.isTiCo=!0,n.allLOGs[0]},f=function(t){return"verifyLOG"==t?d:"LAN"==t?(o||(o=e("lan")),o):"cTIP"==t?c:"uiDEV"==t?m:"hisLOG"==t?g:"logFROMDB"==t?u:"resetUPLOAD"==t?y:"cleanHIS"==t?T:void 0},p=function(){n.selEMP_popover&&n.selEMP_popover.popover("hide"),n.log_fromto_popover&&n.log_fromto_popover.popover("hide")},u=function(o,s){b.parent().find(".logFROMDB").off("click").on("click",function(o){helloguy.css("display",""),p(),v(function(){i||(i=new FormWizard.s2log.init(t,e,n,f)),i.lstHis(b.parent())})}).css("display",!o||o[2]+s<=1?"none":"")},h=function(){n.puSAVELOG||(n.puSAVELOG=t.find(".saveAttlog"),n.puSAVELOG.on("click",function(o){srclocked(!0),p();var s=$(this);admin$.DEV(function(){v(function(){i||(i=new FormWizard.s2log.init(t,e,n,f)),i.saveUplog(s)})})})),n.puSAVELOG.parent().css("display","")},g=function(t,e,o,i){"noU"==n.hasUA&&lo$DB(function(n){if(0==n.kq)n.cb("cancel"),t.resolve();else if(1==n.kq){var s,a,r=[],l=0,c=n.rst.transaction(e,i?"readwrite":"readonly"),d=c.objectStore(e[0]);c.oncomplete=function(){n.rst.close(),t.resolve([r,s,l])},d.openCursor().onsuccess=function(t){var n=t.target.result;n?(l+=1,i&&void 0!==i[n.value.id]&&(n.value.issel=i[n.value.id],n.update(n.value)),o&&!function(t){for(var e in o)if(o.hasOwnProperty(e)&&t[e]!=o[e])return"id"==e&&(a=parseInt(o[e])),!1;return!0}(n.value)||r.push(n.value),n.continue()):e.length>1&&r.length>0&&(a=a||r[r.length-1].id,c.objectStore(e[1]).index("LogIndex").get(a).onsuccess=function(t){s=t.target.result})}}})},v=function(t){_gsC(srcpf$+"/media/js/tikestep_s2.js?"+(new Date).getTime(),"js",function(){t()},"tikestep_s2.js")},m=function(t){n.rst_attlog&&n.rst_attlog.option("dataSource",t[0]),n.log_fromto_popover&&(n.log_from.option("value",t[1]),n.log_to.option("value",t[2]))},w=-1,k=!0,_=function(){if(n.step3_rst_grid_cmd){var t={visible:k,"items[0].template":$("<div/>").html("<i class='ti-alert'/> Ket qua cu hon Log gat the o #step-2")};n.step3_rst_grid_cmd.option(t)}},b=t.find(".uploadattlog"),y=function(t){b.find(".hislog-list").remove();var e=x(t);L(t,!0,function(){e||(n.fileinfo?b.find("iframe")[0].contentWindow.showUpLog(n.fileinfo.file):b.find("iframe")[0].contentWindow.dropzone.removeAllFiles())});var o=d();return n.puSAVELOG&&n.puSAVELOG.parent().css("display","none"),o},D=function(t){var i,s=$('<table style="display:none" class="table hislog-list table-fixed"><thead></thead><tbody style="height: 125px;"></tbody></table>'),a=s.find("thead"),r=null,l=null,c=function(t,e){-1==unlockedHWND&&srclocked(!0),t=parseInt(t);var o=function(t){var e=d();l&&"function"==typeof l&&l(t),n.rst_attlog?(n.rst_attlog.clearFilter(),n.ReadyEMP=function(t){srclocked(!1)},m(e)):srclocked(!1)};if(n.logDAT[t])L([[n.logDAT[t][0]],n.logDAT[t][1]],!1,function(){o("CACHE")});else{var i=$.Deferred();$.when(i).then(function(t){L(t,!1,function(){o("DB")})}),g(i,n.dbTBname,{id:t},e)}},f=function(t,e,o,s){if("th"==t.target.tagName.toLowerCase()){srclocked(!0),o&&(o.off("hide.bs.modal"),o.modal("hide"));var a={};i.find("tr:not(.row-sum)").each(function(t,e){a[parseInt(e.getAttribute("idx"))]=!1});var r=$.Deferred();$.when(r).then(function(t){T(t),s&&"function"==typeof s&&s(),srclocked(!1)}),g(r,n.dbTBname,{id:-1,issel:!0},a)}else e.animate({height:10},200,function(t){e.remove(),s&&"function"==typeof s&&s(),o&&o.modal("hide")})};a.html("<tr style='font-size:11px'><th class='col-1 center ti-trash bntrmv'></th><th class='col-5'>File Name</th><th class='col-2 center'>Size (KB)</th><th class='col-2 center'>Log The</th><th class='col-2 center'>Nhan Vien</th></tr>");for(var p=0,u=0,h=0,v=t[0].length-1;v>-1;v--){var w=Math.floor(t[0][v].file.size/1e3);p+=t[0][v].conf.l,u+=t[0][v].conf.e,h+=w,i+="<tr idx='"+t[0][v].id+"' "+(v==t[0].length-1?"class='selected'":"")+"><td class='col-1 ti-close bntrmv center'></td><td class='col-5'>"+t[0][v].file.name+"</td><td class='col-2 text-right'>"+w+"</td><td class='col-2 text-right'>"+t[0][v].conf.l+"</td><td class='col-2 text-right'>"+t[0][v].conf.e+"</td></tr>"}i+="<tr class='row-sum'><td class='col-6 text-right'>Tong cong</td><td class='col-2 text-right'>"+h+"</td><td class='col-2 text-right'>"+p+"</td><td class='col-2 text-right'>"+u+"</td></tr>",s.on("click",".bntrmv",function(t,n){t.stopPropagation(),t.preventDefault(),srclocked(!0);var i=t,s=$(this).parent();n?f(t,s,null,function(){r.resolve(n)}):setTimeout(function(){!function(t,n){o||(o=e("lan"));var i,s=null,a=admin$.popup({a:"d",t:o.js_gojs_6[0],m:o.js_gojs_6[2]}),l=a.find("#popupdone");l.html(o.js_004_3),l.removeClass("btn-secondary").addClass("btn-danger"),l.click(function(){s=n.attr("idx"),f(t,n,a)}),l[((i=!0)?"add":"remove")+"Class"]("btn-primary").prop("disabled",!i),a.modal("show"),srclocked(!1),a.one("hide.bs.modal",function(t){r&&(srclocked(!0),r.resolve(s))})}(i,s)},20)}),(i=s.find("tbody").html(i)).on("click","tr:not(.row-sum)",function(t){var e,o,a,d=$(this),f=$(t.target).hasClass("bntrmv");f&&(r=new $.Deferred,$.when(r).then(function(t){if(r=null,t){var f={},p=function(o){if("-1"!=t){var i=$.Deferred();parseInt(parseInt(e)),$.when(i).then(function(t){o&&srclocked(!1)}),g(i,n.dbTBname,{id:-1,issel:!0},f)}};f[parseInt(t)]=!1,e!=a.attr("idx")?(l=function(t){l=null,"CACHE"==t&&p(!1)},c(a.attr("idx"),f)):p(!0),i.find("tr:not(.row-sum)").length<=1?s.fadeOut("fast",function(){s.remove();var t=b.find("iframe");t.css({display:"none",opacity:"1"}).fadeIn(),t[0].contentWindow.showUpLog(n.fileinfo.file)}):a.addClass("selected")}else o&&o.attr("idx")==d.attr("idx")?srclocked(!1):c(d.attr("idx"))})),o=function(t,e){var n=i.find("tr.selected"),o=e.getAttribute("idx");return 0!=n.length&&n.attr("idx")==o||(i.find("tr").removeClass("selected"),$(e).addClass("selected"),r||(srclocked(!0),setTimeout(function(){c(o)},20))),0==n.length?null:n}(0,this),f&&(e=o?o.attr("idx"):0,0==(a=d.next("tr:not(.row-sum)")).length&&(a=$(this).prev("tr")))}),b.append(s),s.fadeIn()},x=function(t){var e=t&&t[0].length>1,n=b.find(".hislog-list"),o=b.find("iframe");return e?(D(t),o.length>0&&o.fadeOut("fast",function(){o.css({display:"",opacity:"0"})})):(n.length>0&&n.fadeOut("fast",function(){n.remove()}),o.length>0&&o.css({display:"none",opacity:"1"}).fadeIn()),e},L=function(t,e,o){if(t&&t[1]){n.showinvisibles.val(t[1].dat);var i=t[0][t[0].length-1];i.tc3id=t[1].id,n.logDAT[i.id]||(n.logDAT[i.id]=[i,t[1]]),n.fileinfo=i}o&&"function"==typeof o&&o(),e&&u(t,0)},T=function(t){delete n.fileinfo,n.showinvisibles.val("");var e=y(t);m(e)};this.doStep=function(s,a,r,l){var c=function(t){FormWizard.locked(t),t?s.find(".stepNumber").html('<i class="ti-lock" style="color:red"></i>'):s.find(".stepNumber").html(s.attr("rel"))};if(p(),"2"==a.fromStep.toString()&&(n.selEMP_popover&&n.selEMP_popover.popover("hide"),n.log_fromto_popover&&n.log_fromto_popover.popover("hide")),"2"==a.toStep.toString()){if(n[l[0]]?n[l[0]].showBack&&n[l[0]].popover("show"):(n[l[0]]=t.find(".testupload .needuptclick"),n[l[0]].parent().on("click",function(){srclocked(!0),p(),admin$.DEV(function(){v(function(){i||(i=new FormWizard.s2log.init(t,e,n,f)),n.ReadyEMP=function(t){n.ReadyEMP=null,srclocked(!1)},i.grid_attlog()}),srclocked(!1)})})),!n[l[1]]){var u=$.Deferred(),y=$.Deferred(),D=$.Deferred();"noU"==n.hasUA?($.when(u).then(function(t){var e=x(t);L(t,!0,function(){D.resolve([e,t])})}),$.when(y,D).then(function(t,e){var o=e[0],i=e[1];!o&&n.fileinfo&&t[0].contentWindow.showUpLog(n.fileinfo.file),i&&d(),t[1]()}),g(u,n.dbTBname,{issel:!0})):(e("___").comm1.logsvc(e("alog")),$.when(y).then(function(t){$(t[0]).fadeIn(),t[1]()})),function(s){var a=n.s2_session,r="/"!=apisvr.a$.mainHolePath?window.location.protocol+"//"+apisvr.a$.mainHolePath:"";if(0==b.find("iframe").length){var l,c=helloguy.clone();c.css({display:"",position:"absolute",height:"200px"}).removeAttr("id"),b.append(c),apisvr.a$.sessions[a]={hwndTO:null,id:a,fn:function(o,a,r){if("postmsg"==o){var d=b.find("#ifrm_"+a)[0].contentWindow;d.focus(),d.postMessage({msgtype:"session",msgkind:a,evtData:{a$:"olshift"}},"*")}else"job"==o&&("loaded"==a.evtData.evt?(clearTimeout(void 0),this.origin=a.evtData.origin,s.resolve([l,function(){c.remove()}])):"attlog"==a.evtData.evt?(n.showinvisibles.val(a.evtData.dat),n.fileinfo={file:a.evtData.file,issave:!0,issel:!0,uptime:new Date},l.style.opacity=1,b.find(".table.hislog-list").remove(),v(function(){i||(i=new FormWizard.s2log.init(t,e,n,f)),i.upload_attlog(),n.trapHwnd=h})):"function"==typeof this[a.evtData.evt]&&this[a.evtData.evt](o,a,r))}},b.find("iframe").remove(),(l=document.createElement("iframe")).style.opacity=1,l.style.display="none",l.style.width="100%",l.style.height="300px",l.setAttribute("scrolling","no"),l.setAttribute("frameBorder","0"),l.src=r+"/chamcong/iframeattlog."+e("___").comm1.uplog+"#"+window[st0("1")](a+"|"+apisvr.a$.mainHolePath+"|"+window.location.origin+"|"+GetIEVersion()+"|"+$("#app").hasClass("darkcolor")),l.onload=function(){o=e("lan"),l.contentWindow.lan(o.js_004_12)},b[0].appendChild(l)}}(y),n[l[1]]=t.find("."+l[1]),n[l[1]].off("change").on("change",function(t){-1==unlockedHWND&&srclocked(!0),setTimeout(function(){m(d()),n.fileinfo&&(n.fileinfo.issave=!0,h()),"function"==typeof w?w():srclocked(!1)},20)}),t.find(".dropzonecmd").on("click",".selAttlog",function(t){p();var e=b.find("iframe");e.length>0&&e[0].contentWindow.clickE()}),t.find(".attlog_verify").off("mousedown touchstart").on("mousedown touchstart",function(){w=function(){w=-1,t.find(".attlog_verify").trigger("click")}})}}else if("3"==a.toStep.toString()){if(w=-1,"0"==r)return void _();c(!0),_gsC(srcpf$+"/media/js/tikestep_s3.js?"+(new Date).getTime(),"js",function(){if(n.allLOGs||d(),k){var e=function(){n.selEMP_popover&&"mixed"==n.selEMP_popover.attr("aria-checked")?n.allLOGs[1]=n.rst_attlog.getSelectedRowKeys():n.allLOGs[1]=null,n.s3calc.exec(n,t,function(){c(!1),k=!1})};n.s3calc?(-1!=unlockedHWND&&srclocked(!1),devDlg(4,"da co su thay doi logs, co can tinh lai k?").show().done(function(t){6==t?e():(_(),c(!1))})):(n.s3calc=FormWizard.s3calc.createCalc({kind:"noshift",opts:{}}),e())}else c(!1)},"tikestep_s3.js")}else"4"==a.toStep.toString()&&_gsC(srcpf$+"/media/js/tikestep_s4.js?"+(new Date).getTime(),"js",function(){n.s4end||(n.s4end=FormWizard.s4end.createCalc({kind:"excelhost",opts:{}}),n.s4end.renderUI(n,t,function(){}))})}}}();
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",s="minute",u="hour",a="day",o="week",f="month",h="quarter",c="year",d="date",$="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},D="en",v={};v[D]=M;var p=function(t){return t instanceof _},S=function(t,e,n){var r;if(!t)return D;if("string"==typeof t)v[t]&&(r=t),e&&(v[t]=e,r=t);else{var i=t.name;v[i]=t,r=i}return!n&&r&&(D=r),r||!n&&D},w=function(t,e){if(p(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var D=this.$locale().weekStart||0,v=(y<D?y+7:y)-D;return $(r?m-v:m+(6-v),M);case a:case d:return l(g+"Hours",0);case u:return l(g+"Minutes",1);case s:return l(g+"Seconds",2);case i:return l(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h="set"+(this.$u?"UTC":""),$=(n={},n[a]=h+"Date",n[d]=h+"Date",n[f]=h+"Month",n[c]=h+"FullYear",n[u]=h+"Hours",n[s]=h+"Minutes",n[i]=h+"Seconds",n[r]=h+"Milliseconds",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this;if(!this.isValid())return $;var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=O.z(this),i=this.$locale(),s=this.$H,u=this.$m,a=this.$M,o=i.weekdays,f=i.months,h=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].substr(0,s)},c=function(t){return O.s(s%12||12,t,"0")},d=i.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,"0"),MMM:h(i.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,o,2),ddd:h(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,"0"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:r};return n.replace(y,(function(t,e){return e||l[t]||r.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,D=O.m(this,M);return D=(l={},l[c]=D/12,l[f]=D,l[h]=D/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?D:O.a(D)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),b=_.prototype;return w.prototype=b,[["$ms",r],["$s",i],["$m",s],["$H",u],["$W",a],["$M",f],["$y",c],["$D",d]].forEach((function(t){b[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=v[D],w.Ls=v,w.p={},w}));